var _f=Object.defineProperty;var yf=(n,e,t)=>e in n?_f(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var le=(n,e,t)=>yf(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var oc={};/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function sa(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Ce={},fs=[],Zt=()=>{},bf=()=>!1,Fi=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),ra=n=>n.startsWith("onUpdate:"),ut=Object.assign,ia=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},vf=Object.prototype.hasOwnProperty,we=(n,e)=>vf.call(n,e),ce=Array.isArray,ds=n=>gr(n)==="[object Map]",Bi=n=>gr(n)==="[object Set]",ac=n=>gr(n)==="[object Date]",de=n=>typeof n=="function",Xe=n=>typeof n=="string",Ut=n=>typeof n=="symbol",Pe=n=>n!==null&&typeof n=="object",Ml=n=>(Pe(n)||de(n))&&de(n.then)&&de(n.catch),Nl=Object.prototype.toString,gr=n=>Nl.call(n),wf=n=>gr(n).slice(8,-1),Ol=n=>gr(n)==="[object Object]",oa=n=>Xe(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,qs=sa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Li=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},xf=/-(\w)/g,xn=Li(n=>n.replace(xf,(e,t)=>t?t.toUpperCase():"")),Tf=/\B([A-Z])/g,En=Li(n=>n.replace(Tf,"-$1").toLowerCase()),Rl=Li(n=>n.charAt(0).toUpperCase()+n.slice(1)),lo=Li(n=>n?`on${Rl(n)}`:""),bn=(n,e)=>!Object.is(n,e),Hr=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Dl=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},Sf=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let cc;const Ui=()=>cc||(cc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof oc<"u"?oc:{});function aa(n){if(ce(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=Xe(s)?Cf(s):aa(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(Xe(n)||Pe(n))return n}const kf=/;(?![^(]*\))/g,If=/:([^]+)/,Ef=/\/\*[^]*?\*\//g;function Cf(n){const e={};return n.replace(Ef,"").split(kf).forEach(t=>{if(t){const s=t.split(If);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function _r(n){let e="";if(Xe(n))e=n;else if(ce(n))for(let t=0;t<n.length;t++){const s=_r(n[t]);s&&(e+=s+" ")}else if(Pe(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Af="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mf=sa(Af);function Pl(n){return!!n||n===""}function Nf(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=Vi(n[s],e[s]);return t}function Vi(n,e){if(n===e)return!0;let t=ac(n),s=ac(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=Ut(n),s=Ut(e),t||s)return n===e;if(t=ce(n),s=ce(e),t||s)return t&&s?Nf(n,e):!1;if(t=Pe(n),s=Pe(e),t||s){if(!t||!s)return!1;const r=Object.keys(n).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in n){const a=n.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Vi(n[o],e[o]))return!1}}return String(n)===String(e)}function Fl(n,e){return n.findIndex(t=>Vi(t,e))}const Bl=n=>!!(n&&n.__v_isRef===!0),cn=n=>Xe(n)?n:n==null?"":ce(n)||Pe(n)&&(n.toString===Nl||!de(n.toString))?Bl(n)?cn(n.value):JSON.stringify(n,Ll,2):String(n),Ll=(n,e)=>Bl(e)?Ll(n,e.value):ds(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r],i)=>(t[uo(s,i)+" =>"]=r,t),{})}:Bi(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>uo(t))}:Ut(e)?uo(e):Pe(e)&&!ce(e)&&!Ol(e)?String(e):e,uo=(n,e="")=>{var t;return Ut(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dt;class Ul{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=dt,!e&&dt&&(this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=dt;try{return dt=this,e()}finally{dt=t}}}on(){dt=this}off(){dt=this.parent}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Vl(n){return new Ul(n)}function ql(){return dt}function Of(n,e=!1){dt&&dt.cleanups.push(n)}let Ae;const ho=new WeakSet;class $l{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,dt&&dt.active&&dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ho.has(this)&&(ho.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,lc(this),Gl(this);const e=Ae,t=Bt;Ae=this,Bt=!0;try{return this.fn()}finally{Hl(this),Ae=e,Bt=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ua(e);this.deps=this.depsTail=void 0,lc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ho.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mo(this)&&this.run()}get dirty(){return Mo(this)}}let Wl=0,$s,Ws;function jl(n,e=!1){if(n.flags|=8,e){n.next=Ws,Ws=n;return}n.next=$s,$s=n}function ca(){Wl++}function la(){if(--Wl>0)return;if(Ws){let e=Ws;for(Ws=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;$s;){let e=$s;for($s=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function Gl(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Hl(n){let e,t=n.depsTail,s=t;for(;s;){const r=s.prevDep;s.version===-1?(s===t&&(t=r),ua(s),Rf(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}n.deps=e,n.depsTail=t}function Mo(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zl(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function zl(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Js))return;n.globalVersion=Js;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Mo(n)){n.flags&=-3;return}const t=Ae,s=Bt;Ae=n,Bt=!0;try{Gl(n);const r=n.fn(n._value);(e.version===0||bn(r,n._value))&&(n._value=r,e.version++)}catch(r){throw e.version++,r}finally{Ae=t,Bt=s,Hl(n),n.flags&=-3}}function ua(n,e=!1){const{dep:t,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)ua(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Rf(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Bt=!0;const Yl=[];function Cn(){Yl.push(Bt),Bt=!1}function An(){const n=Yl.pop();Bt=n===void 0?!0:n}function lc(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Ae;Ae=void 0;try{e()}finally{Ae=t}}}let Js=0;class Df{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ha{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ae||!Bt||Ae===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ae)t=this.activeLink=new Df(Ae,this),Ae.deps?(t.prevDep=Ae.depsTail,Ae.depsTail.nextDep=t,Ae.depsTail=t):Ae.deps=Ae.depsTail=t,Zl(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=Ae.depsTail,t.nextDep=void 0,Ae.depsTail.nextDep=t,Ae.depsTail=t,Ae.deps===t&&(Ae.deps=s)}return t}trigger(e){this.version++,Js++,this.notify(e)}notify(e){ca();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{la()}}}function Zl(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Zl(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const ni=new WeakMap,Ln=Symbol(""),No=Symbol(""),Qs=Symbol("");function at(n,e,t){if(Bt&&Ae){let s=ni.get(n);s||ni.set(n,s=new Map);let r=s.get(t);r||(s.set(t,r=new ha),r.map=s,r.key=t),r.track()}}function rn(n,e,t,s,r,i){const o=ni.get(n);if(!o){Js++;return}const a=c=>{c&&c.trigger()};if(ca(),e==="clear")o.forEach(a);else{const c=ce(n),l=c&&oa(t);if(c&&t==="length"){const u=Number(s);o.forEach((h,m)=>{(m==="length"||m===Qs||!Ut(m)&&m>=u)&&a(h)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),l&&a(o.get(Qs)),e){case"add":c?l&&a(o.get("length")):(a(o.get(Ln)),ds(n)&&a(o.get(No)));break;case"delete":c||(a(o.get(Ln)),ds(n)&&a(o.get(No)));break;case"set":ds(n)&&a(o.get(Ln));break}}la()}function Pf(n,e){const t=ni.get(n);return t&&t.get(e)}function rs(n){const e=ve(n);return e===n?e:(at(e,"iterate",Qs),Ot(n)?e:e.map(ct))}function qi(n){return at(n=ve(n),"iterate",Qs),n}const Ff={__proto__:null,[Symbol.iterator](){return fo(this,Symbol.iterator,ct)},concat(...n){return rs(this).concat(...n.map(e=>ce(e)?rs(e):e))},entries(){return fo(this,"entries",n=>(n[1]=ct(n[1]),n))},every(n,e){return tn(this,"every",n,e,void 0,arguments)},filter(n,e){return tn(this,"filter",n,e,t=>t.map(ct),arguments)},find(n,e){return tn(this,"find",n,e,ct,arguments)},findIndex(n,e){return tn(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return tn(this,"findLast",n,e,ct,arguments)},findLastIndex(n,e){return tn(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return tn(this,"forEach",n,e,void 0,arguments)},includes(...n){return po(this,"includes",n)},indexOf(...n){return po(this,"indexOf",n)},join(n){return rs(this).join(n)},lastIndexOf(...n){return po(this,"lastIndexOf",n)},map(n,e){return tn(this,"map",n,e,void 0,arguments)},pop(){return Rs(this,"pop")},push(...n){return Rs(this,"push",n)},reduce(n,...e){return uc(this,"reduce",n,e)},reduceRight(n,...e){return uc(this,"reduceRight",n,e)},shift(){return Rs(this,"shift")},some(n,e){return tn(this,"some",n,e,void 0,arguments)},splice(...n){return Rs(this,"splice",n)},toReversed(){return rs(this).toReversed()},toSorted(n){return rs(this).toSorted(n)},toSpliced(...n){return rs(this).toSpliced(...n)},unshift(...n){return Rs(this,"unshift",n)},values(){return fo(this,"values",ct)}};function fo(n,e,t){const s=qi(n),r=s[e]();return s!==n&&!Ot(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=t(i.value)),i}),r}const Bf=Array.prototype;function tn(n,e,t,s,r,i){const o=qi(n),a=o!==n&&!Ot(n),c=o[e];if(c!==Bf[e]){const h=c.apply(n,i);return a?ct(h):h}let l=t;o!==n&&(a?l=function(h,m){return t.call(this,ct(h),m,n)}:t.length>2&&(l=function(h,m){return t.call(this,h,m,n)}));const u=c.call(o,l,s);return a&&r?r(u):u}function uc(n,e,t,s){const r=qi(n);let i=t;return r!==n&&(Ot(n)?t.length>3&&(i=function(o,a,c){return t.call(this,o,a,c,n)}):i=function(o,a,c){return t.call(this,o,ct(a),c,n)}),r[e](i,...s)}function po(n,e,t){const s=ve(n);at(s,"iterate",Qs);const r=s[e](...t);return(r===-1||r===!1)&&pa(t[0])?(t[0]=ve(t[0]),s[e](...t)):r}function Rs(n,e,t=[]){Cn(),ca();const s=ve(n)[e].apply(n,t);return la(),An(),s}const Lf=sa("__proto__,__v_isRef,__isVue"),Xl=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Ut));function Uf(n){Ut(n)||(n=String(n));const e=ve(this);return at(e,"has",n),e.hasOwnProperty(n)}class Kl{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return s===(r?i?Zf:tu:i?eu:Ql).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ce(e);if(!r){let c;if(o&&(c=Ff[t]))return c;if(t==="hasOwnProperty")return Uf}const a=Reflect.get(e,t,He(e)?e:s);return(Ut(t)?Xl.has(t):Lf(t))||(r||at(e,"get",t),i)?a:He(a)?o&&oa(t)?a:a.value:Pe(a)?r?nu(a):$i(a):a}}class Jl extends Kl{constructor(e=!1){super(!1,e)}set(e,t,s,r){let i=e[t];if(!this._isShallow){const c=jn(i);if(!Ot(s)&&!jn(s)&&(i=ve(i),s=ve(s)),!ce(e)&&He(i)&&!He(s))return c?!1:(i.value=s,!0)}const o=ce(e)&&oa(t)?Number(t)<e.length:we(e,t),a=Reflect.set(e,t,s,He(e)?e:r);return e===ve(r)&&(o?bn(s,i)&&rn(e,"set",t,s):rn(e,"add",t,s)),a}deleteProperty(e,t){const s=we(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&s&&rn(e,"delete",t,void 0),r}has(e,t){const s=Reflect.has(e,t);return(!Ut(t)||!Xl.has(t))&&at(e,"has",t),s}ownKeys(e){return at(e,"iterate",ce(e)?"length":Ln),Reflect.ownKeys(e)}}class Vf extends Kl{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const qf=new Jl,$f=new Vf,Wf=new Jl(!0);const Oo=n=>n,Or=n=>Reflect.getPrototypeOf(n);function jf(n,e,t){return function(...s){const r=this.__v_raw,i=ve(r),o=ds(i),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,l=r[n](...s),u=t?Oo:e?Ro:ct;return!e&&at(i,"iterate",c?No:Ln),{next(){const{value:h,done:m}=l.next();return m?{value:h,done:m}:{value:a?[u(h[0]),u(h[1])]:u(h),done:m}},[Symbol.iterator](){return this}}}}function Rr(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Gf(n,e){const t={get(r){const i=this.__v_raw,o=ve(i),a=ve(r);n||(bn(r,a)&&at(o,"get",r),at(o,"get",a));const{has:c}=Or(o),l=e?Oo:n?Ro:ct;if(c.call(o,r))return l(i.get(r));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!n&&at(ve(r),"iterate",Ln),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=ve(i),a=ve(r);return n||(bn(r,a)&&at(o,"has",r),at(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,c=ve(a),l=e?Oo:n?Ro:ct;return!n&&at(c,"iterate",Ln),a.forEach((u,h)=>r.call(i,l(u),l(h),o))}};return ut(t,n?{add:Rr("add"),set:Rr("set"),delete:Rr("delete"),clear:Rr("clear")}:{add(r){!e&&!Ot(r)&&!jn(r)&&(r=ve(r));const i=ve(this);return Or(i).has.call(i,r)||(i.add(r),rn(i,"add",r,r)),this},set(r,i){!e&&!Ot(i)&&!jn(i)&&(i=ve(i));const o=ve(this),{has:a,get:c}=Or(o);let l=a.call(o,r);l||(r=ve(r),l=a.call(o,r));const u=c.call(o,r);return o.set(r,i),l?bn(i,u)&&rn(o,"set",r,i):rn(o,"add",r,i),this},delete(r){const i=ve(this),{has:o,get:a}=Or(i);let c=o.call(i,r);c||(r=ve(r),c=o.call(i,r)),a&&a.call(i,r);const l=i.delete(r);return c&&rn(i,"delete",r,void 0),l},clear(){const r=ve(this),i=r.size!==0,o=r.clear();return i&&rn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=jf(r,n,e)}),t}function fa(n,e){const t=Gf(n,e);return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(we(t,r)&&r in s?t:s,r,i)}const Hf={get:fa(!1,!1)},zf={get:fa(!1,!0)},Yf={get:fa(!0,!1)};const Ql=new WeakMap,eu=new WeakMap,tu=new WeakMap,Zf=new WeakMap;function Xf(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kf(n){return n.__v_skip||!Object.isExtensible(n)?0:Xf(wf(n))}function $i(n){return jn(n)?n:da(n,!1,qf,Hf,Ql)}function Jf(n){return da(n,!1,Wf,zf,eu)}function nu(n){return da(n,!0,$f,Yf,tu)}function da(n,e,t,s,r){if(!Pe(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const o=Kf(n);if(o===0)return n;const a=new Proxy(n,o===2?s:t);return r.set(n,a),a}function vn(n){return jn(n)?vn(n.__v_raw):!!(n&&n.__v_isReactive)}function jn(n){return!!(n&&n.__v_isReadonly)}function Ot(n){return!!(n&&n.__v_isShallow)}function pa(n){return n?!!n.__v_raw:!1}function ve(n){const e=n&&n.__v_raw;return e?ve(e):n}function ma(n){return!we(n,"__v_skip")&&Object.isExtensible(n)&&Dl(n,"__v_skip",!0),n}const ct=n=>Pe(n)?$i(n):n,Ro=n=>Pe(n)?nu(n):n;function He(n){return n?n.__v_isRef===!0:!1}function nt(n){return Qf(n,!1)}function Qf(n,e){return He(n)?n:new ed(n,e)}class ed{constructor(e,t){this.dep=new ha,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ve(e),this._value=t?e:ct(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||Ot(e)||jn(e);e=s?e:ve(e),bn(e,t)&&(this._rawValue=e,this._value=s?e:ct(e),this.dep.trigger())}}function zr(n){return He(n)?n.value:n}const td={get:(n,e,t)=>e==="__v_raw"?n:zr(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return He(r)&&!He(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function su(n){return vn(n)?n:new Proxy(n,td)}function nd(n){const e=ce(n)?new Array(n.length):{};for(const t in n)e[t]=rd(n,t);return e}class sd{constructor(e,t,s){this._object=e,this._key=t,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Pf(ve(this._object),this._key)}}function rd(n,e,t){const s=n[e];return He(s)?s:new sd(n,e,t)}class id{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new ha(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Js-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ae!==this)return jl(this,!0),!0}get value(){const e=this.dep.track();return zl(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function od(n,e,t=!1){let s,r;return de(n)?s=n:(s=n.get,r=n.set),new id(s,r,t)}const Dr={},si=new WeakMap;let Pn;function ad(n,e=!1,t=Pn){if(t){let s=si.get(t);s||si.set(t,s=[]),s.push(n)}}function cd(n,e,t=Ce){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:c}=t,l=S=>r?S:Ot(S)||r===!1||r===0?on(S,1):on(S);let u,h,m,p,g=!1,y=!1;if(He(n)?(h=()=>n.value,g=Ot(n)):vn(n)?(h=()=>l(n),g=!0):ce(n)?(y=!0,g=n.some(S=>vn(S)||Ot(S)),h=()=>n.map(S=>{if(He(S))return S.value;if(vn(S))return l(S);if(de(S))return c?c(S,2):S()})):de(n)?e?h=c?()=>c(n,2):n:h=()=>{if(m){Cn();try{m()}finally{An()}}const S=Pn;Pn=u;try{return c?c(n,3,[p]):n(p)}finally{Pn=S}}:h=Zt,e&&r){const S=h,b=r===!0?1/0:r;h=()=>on(S(),b)}const w=ql(),x=()=>{u.stop(),w&&w.active&&ia(w.effects,u)};if(i&&e){const S=e;e=(...b)=>{S(...b),x()}}let M=y?new Array(n.length).fill(Dr):Dr;const P=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(e){const b=u.run();if(r||g||(y?b.some((I,C)=>bn(I,M[C])):bn(b,M))){m&&m();const I=Pn;Pn=u;try{const C=[b,M===Dr?void 0:y&&M[0]===Dr?[]:M,p];c?c(e,3,C):e(...C),M=b}finally{Pn=I}}}else u.run()};return a&&a(P),u=new $l(h),u.scheduler=o?()=>o(P,!1):P,p=S=>ad(S,!1,u),m=u.onStop=()=>{const S=si.get(u);if(S){if(c)c(S,4);else for(const b of S)b();si.delete(u)}},e?s?P(!0):M=u.run():o?o(P.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function on(n,e=1/0,t){if(e<=0||!Pe(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,He(n))on(n.value,e,t);else if(ce(n))for(let s=0;s<n.length;s++)on(n[s],e,t);else if(Bi(n)||ds(n))n.forEach(s=>{on(s,e,t)});else if(Ol(n)){for(const s in n)on(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&on(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function yr(n,e,t,s){try{return s?n(...s):n()}catch(r){Wi(r,e,t)}}function Xt(n,e,t,s){if(de(n)){const r=yr(n,e,t,s);return r&&Ml(r)&&r.catch(i=>{Wi(i,e,t)}),r}if(ce(n)){const r=[];for(let i=0;i<n.length;i++)r.push(Xt(n[i],e,t,s));return r}}function Wi(n,e,t,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ce;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](n,c,l)===!1)return}a=a.parent}if(i){Cn(),yr(i,null,10,[n,c,l]),An();return}}ld(n,t,r,s,o)}function ld(n,e,t,s=!0,r=!1){if(r)throw n;console.error(n)}const pt=[];let zt=-1;const ps=[];let gn=null,as=0;const ru=Promise.resolve();let ri=null;function iu(n){const e=ri||ru;return n?e.then(this?n.bind(this):n):e}function ud(n){let e=zt+1,t=pt.length;for(;e<t;){const s=e+t>>>1,r=pt[s],i=er(r);i<n||i===n&&r.flags&2?e=s+1:t=s}return e}function ga(n){if(!(n.flags&1)){const e=er(n),t=pt[pt.length-1];!t||!(n.flags&2)&&e>=er(t)?pt.push(n):pt.splice(ud(e),0,n),n.flags|=1,ou()}}function ou(){ri||(ri=ru.then(cu))}function hd(n){ce(n)?ps.push(...n):gn&&n.id===-1?gn.splice(as+1,0,n):n.flags&1||(ps.push(n),n.flags|=1),ou()}function hc(n,e,t=zt+1){for(;t<pt.length;t++){const s=pt[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;pt.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function au(n){if(ps.length){const e=[...new Set(ps)].sort((t,s)=>er(t)-er(s));if(ps.length=0,gn){gn.push(...e);return}for(gn=e,as=0;as<gn.length;as++){const t=gn[as];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}gn=null,as=0}}const er=n=>n.id==null?n.flags&2?-1:1/0:n.id;function cu(n){try{for(zt=0;zt<pt.length;zt++){const e=pt[zt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),yr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;zt<pt.length;zt++){const e=pt[zt];e&&(e.flags&=-2)}zt=-1,pt.length=0,au(),ri=null,(pt.length||ps.length)&&cu()}}let it=null,lu=null;function ii(n){const e=it;return it=n,lu=n&&n.type.__scopeId||null,e}function Do(n,e=it,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&vc(-1);const i=ii(e);let o;try{o=n(...r)}finally{ii(i),s._d&&vc(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function fd(n,e){if(it===null)return n;const t=Yi(it),s=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,c=Ce]=e[r];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&on(o),s.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:c}))}return n}function Rn(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(Cn(),Xt(c,t,8,[n.el,a,n,e]),An())}}const dd=Symbol("_vte"),pd=n=>n.__isTeleport;function _a(n,e){n.shapeFlag&6&&n.component?(n.transition=e,_a(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Qn(n,e){return de(n)?ut({name:n.name},e,{setup:n}):n}function uu(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function oi(n,e,t,s,r=!1){if(ce(n)){n.forEach((g,y)=>oi(g,e&&(ce(e)?e[y]:e),t,s,r));return}if(ms(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&oi(n,e,t,s.component.subTree);return}const i=s.shapeFlag&4?Yi(s.component):s.el,o=r?null:i,{i:a,r:c}=n,l=e&&e.r,u=a.refs===Ce?a.refs={}:a.refs,h=a.setupState,m=ve(h),p=h===Ce?()=>!1:g=>we(m,g);if(l!=null&&l!==c&&(Xe(l)?(u[l]=null,p(l)&&(h[l]=null)):He(l)&&(l.value=null)),de(c))yr(c,a,12,[o,u]);else{const g=Xe(c),y=He(c);if(g||y){const w=()=>{if(n.f){const x=g?p(c)?h[c]:u[c]:c.value;r?ce(x)&&ia(x,i):ce(x)?x.includes(i)||x.push(i):g?(u[c]=[i],p(c)&&(h[c]=u[c])):(c.value=[i],n.k&&(u[n.k]=c.value))}else g?(u[c]=o,p(c)&&(h[c]=o)):y&&(c.value=o,n.k&&(u[n.k]=o))};o?(w.id=-1,kt(w,t)):w()}}}Ui().requestIdleCallback;Ui().cancelIdleCallback;const ms=n=>!!n.type.__asyncLoader,hu=n=>n.type.__isKeepAlive;function md(n,e){fu(n,"a",e)}function gd(n,e){fu(n,"da",e)}function fu(n,e,t=lt){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(ji(e,s,t),t){let r=t.parent;for(;r&&r.parent;)hu(r.parent.vnode)&&_d(s,e,t,r),r=r.parent}}function _d(n,e,t,s){const r=ji(e,n,s,!0);ya(()=>{ia(s[e],r)},t)}function ji(n,e,t=lt,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{Cn();const a=br(t),c=Xt(e,t,n,o);return a(),An(),c});return s?r.unshift(i):r.push(i),i}}const un=n=>(e,t=lt)=>{(!nr||n==="sp")&&ji(n,(...s)=>e(...s),t)},yd=un("bm"),Gi=un("m"),bd=un("bu"),vd=un("u"),wd=un("bum"),ya=un("um"),xd=un("sp"),Td=un("rtg"),Sd=un("rtc");function kd(n,e=lt){ji("ec",n,e)}const Id=Symbol.for("v-ndc");function ba(n,e,t,s){let r;const i=t,o=ce(n);if(o||Xe(n)){const a=o&&vn(n);let c=!1;a&&(c=!Ot(n),n=qi(n)),r=new Array(n.length);for(let l=0,u=n.length;l<u;l++)r[l]=e(c?ct(n[l]):n[l],l,void 0,i)}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,i)}else if(Pe(n))if(n[Symbol.iterator])r=Array.from(n,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(n);r=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];r[c]=e(n[u],u,c,i)}}else r=[];return r}function Ed(n,e,t={},s,r){if(it.ce||it.parent&&ms(it.parent)&&it.parent.ce)return Le(),Uo(mt,null,[Je("slot",t,s)],64);let i=n[e];i&&i._c&&(i._d=!1),Le();const o=i&&du(i(t)),a=t.key||o&&o.key,c=Uo(mt,{key:(a&&!Ut(a)?a:`_${e}`)+""},o||[],o&&n._===1?64:-2);return i&&i._c&&(i._d=!0),c}function du(n){return n.some(e=>wa(e)?!(e.type===Tn||e.type===mt&&!du(e.children)):!0)?n:null}const Po=n=>n?Du(n)?Yi(n):Po(n.parent):null,js=ut(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Po(n.parent),$root:n=>Po(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>mu(n),$forceUpdate:n=>n.f||(n.f=()=>{ga(n.update)}),$nextTick:n=>n.n||(n.n=iu.bind(n.proxy)),$watch:n=>Xd.bind(n)}),mo=(n,e)=>n!==Ce&&!n.__isScriptSetup&&we(n,e),Cd={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=n;let l;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(mo(s,e))return o[e]=1,s[e];if(r!==Ce&&we(r,e))return o[e]=2,r[e];if((l=n.propsOptions[0])&&we(l,e))return o[e]=3,i[e];if(t!==Ce&&we(t,e))return o[e]=4,t[e];Fo&&(o[e]=0)}}const u=js[e];let h,m;if(u)return e==="$attrs"&&at(n.attrs,"get",""),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==Ce&&we(t,e))return o[e]=4,t[e];if(m=c.config.globalProperties,we(m,e))return m[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return mo(r,e)?(r[e]=t,!0):s!==Ce&&we(s,e)?(s[e]=t,!0):we(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!t[o]||n!==Ce&&we(n,o)||mo(e,o)||(a=i[0])&&we(a,o)||we(s,o)||we(js,o)||we(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:we(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function fc(n){return ce(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Fo=!0;function Ad(n){const e=mu(n),t=n.proxy,s=n.ctx;Fo=!1,e.beforeCreate&&dc(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:m,beforeUpdate:p,updated:g,activated:y,deactivated:w,beforeDestroy:x,beforeUnmount:M,destroyed:P,unmounted:S,render:b,renderTracked:I,renderTriggered:C,errorCaptured:T,serverPrefetch:B,expose:F,inheritAttrs:V,components:W,directives:K,filters:X}=e;if(l&&Md(l,s,null),o)for(const H in o){const ee=o[H];de(ee)&&(s[H]=ee.bind(t))}if(r){const H=r.call(t,t);Pe(H)&&(n.data=$i(H))}if(Fo=!0,i)for(const H in i){const ee=i[H],re=de(ee)?ee.bind(t,t):de(ee.get)?ee.get.bind(t,t):Zt,oe=!de(ee)&&de(ee.set)?ee.set.bind(t):Zt,Q=Zi({get:re,set:oe});Object.defineProperty(s,H,{enumerable:!0,configurable:!0,get:()=>Q.value,set:ae=>Q.value=ae})}if(a)for(const H in a)pu(a[H],s,t,H);if(c){const H=de(c)?c.call(t):c;Reflect.ownKeys(H).forEach(ee=>{Fd(ee,H[ee])})}u&&dc(u,n,"c");function Z(H,ee){ce(ee)?ee.forEach(re=>H(re.bind(t))):ee&&H(ee.bind(t))}if(Z(yd,h),Z(Gi,m),Z(bd,p),Z(vd,g),Z(md,y),Z(gd,w),Z(kd,T),Z(Sd,I),Z(Td,C),Z(wd,M),Z(ya,S),Z(xd,B),ce(F))if(F.length){const H=n.exposed||(n.exposed={});F.forEach(ee=>{Object.defineProperty(H,ee,{get:()=>t[ee],set:re=>t[ee]=re})})}else n.exposed||(n.exposed={});b&&n.render===Zt&&(n.render=b),V!=null&&(n.inheritAttrs=V),W&&(n.components=W),K&&(n.directives=K),B&&uu(n)}function Md(n,e,t=Zt){ce(n)&&(n=Bo(n));for(const s in n){const r=n[s];let i;Pe(r)?"default"in r?i=Gs(r.from||s,r.default,!0):i=Gs(r.from||s):i=Gs(r),He(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function dc(n,e,t){Xt(ce(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function pu(n,e,t,s){let r=s.includes(".")?Au(t,s):()=>t[s];if(Xe(n)){const i=e[n];de(i)&&Vn(r,i)}else if(de(n))Vn(r,n.bind(t));else if(Pe(n))if(ce(n))n.forEach(i=>pu(i,e,t,s));else{const i=de(n.handler)?n.handler.bind(t):e[n.handler];de(i)&&Vn(r,i,n)}}function mu(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!t&&!s?c=e:(c={},r.length&&r.forEach(l=>ai(c,l,o,!0)),ai(c,e,o)),Pe(e)&&i.set(e,c),c}function ai(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&ai(n,i,t,!0),r&&r.forEach(o=>ai(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=Nd[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const Nd={data:pc,props:mc,emits:mc,methods:Vs,computed:Vs,beforeCreate:ft,created:ft,beforeMount:ft,mounted:ft,beforeUpdate:ft,updated:ft,beforeDestroy:ft,beforeUnmount:ft,destroyed:ft,unmounted:ft,activated:ft,deactivated:ft,errorCaptured:ft,serverPrefetch:ft,components:Vs,directives:Vs,watch:Rd,provide:pc,inject:Od};function pc(n,e){return e?n?function(){return ut(de(n)?n.call(this,this):n,de(e)?e.call(this,this):e)}:e:n}function Od(n,e){return Vs(Bo(n),Bo(e))}function Bo(n){if(ce(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ft(n,e){return n?[...new Set([].concat(n,e))]:e}function Vs(n,e){return n?ut(Object.create(null),n,e):e}function mc(n,e){return n?ce(n)&&ce(e)?[...new Set([...n,...e])]:ut(Object.create(null),fc(n),fc(e??{})):e}function Rd(n,e){if(!n)return e;if(!e)return n;const t=ut(Object.create(null),n);for(const s in e)t[s]=ft(n[s],e[s]);return t}function gu(){return{app:null,config:{isNativeTag:bf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Dd=0;function Pd(n,e){return function(s,r=null){de(s)||(s=ut({},s)),r!=null&&!Pe(r)&&(r=null);const i=gu(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:Dd++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:gp,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&de(u.install)?(o.add(u),u.install(l,...h)):de(u)&&(o.add(u),u(l,...h))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,h){return h?(i.components[u]=h,l):i.components[u]},directive(u,h){return h?(i.directives[u]=h,l):i.directives[u]},mount(u,h,m){if(!c){const p=l._ceVNode||Je(s,r);return p.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),n(p,u,m),c=!0,l._container=u,u.__vue_app__=l,Yi(p.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Xt(a,l._instance,16),n(null,l._container),delete l._container.__vue_app__)},provide(u,h){return i.provides[u]=h,l},runWithContext(u){const h=Un;Un=l;try{return u()}finally{Un=h}}};return l}}let Un=null;function Fd(n,e){if(lt){let t=lt.provides;const s=lt.parent&&lt.parent.provides;s===t&&(t=lt.provides=Object.create(s)),t[n]=e}}function Gs(n,e,t=!1){const s=lt||it;if(s||Un){const r=Un?Un._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&de(e)?e.call(s&&s.proxy):e}}function Bd(){return!!(lt||it||Un)}const _u={},yu=()=>Object.create(_u),bu=n=>Object.getPrototypeOf(n)===_u;function Ld(n,e,t,s=!1){const r={},i=yu();n.propsDefaults=Object.create(null),vu(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:Jf(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function Ud(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=ve(r),[c]=n.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let m=u[h];if(Hi(n.emitsOptions,m))continue;const p=e[m];if(c)if(we(i,m))p!==i[m]&&(i[m]=p,l=!0);else{const g=xn(m);r[g]=Lo(c,a,g,p,n,!1)}else p!==i[m]&&(i[m]=p,l=!0)}}}else{vu(n,e,r,i)&&(l=!0);let u;for(const h in a)(!e||!we(e,h)&&((u=En(h))===h||!we(e,u)))&&(c?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=Lo(c,a,h,void 0,n,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!we(e,h))&&(delete i[h],l=!0)}l&&rn(n.attrs,"set","")}function vu(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(qs(c))continue;const l=e[c];let u;r&&we(r,u=xn(c))?!i||!i.includes(u)?t[u]=l:(a||(a={}))[u]=l:Hi(n.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=ve(t),l=a||Ce;for(let u=0;u<i.length;u++){const h=i[u];t[h]=Lo(r,c,h,l[h],n,!we(l,h))}}return o}function Lo(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=we(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&de(c)){const{propsDefaults:l}=r;if(t in l)s=l[t];else{const u=br(r);s=l[t]=c.call(null,e),u()}}else s=c;r.ce&&r.ce._setProp(t,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===En(t))&&(s=!0))}return s}const Vd=new WeakMap;function wu(n,e,t=!1){const s=t?Vd:e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let c=!1;if(!de(n)){const u=h=>{c=!0;const[m,p]=wu(h,e,!0);ut(o,m),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!i&&!c)return Pe(n)&&s.set(n,fs),fs;if(ce(i))for(let u=0;u<i.length;u++){const h=xn(i[u]);gc(h)&&(o[h]=Ce)}else if(i)for(const u in i){const h=xn(u);if(gc(h)){const m=i[u],p=o[h]=ce(m)||de(m)?{type:m}:ut({},m),g=p.type;let y=!1,w=!0;if(ce(g))for(let x=0;x<g.length;++x){const M=g[x],P=de(M)&&M.name;if(P==="Boolean"){y=!0;break}else P==="String"&&(w=!1)}else y=de(g)&&g.name==="Boolean";p[0]=y,p[1]=w,(y||we(p,"default"))&&a.push(h)}}const l=[o,a];return Pe(n)&&s.set(n,l),l}function gc(n){return n[0]!=="$"&&!qs(n)}const xu=n=>n[0]==="_"||n==="$stable",va=n=>ce(n)?n.map(Yt):[Yt(n)],qd=(n,e,t)=>{if(e._n)return e;const s=Do((...r)=>va(e(...r)),t);return s._c=!1,s},Tu=(n,e,t)=>{const s=n._ctx;for(const r in n){if(xu(r))continue;const i=n[r];if(de(i))e[r]=qd(r,i,s);else if(i!=null){const o=va(i);e[r]=()=>o}}},Su=(n,e)=>{const t=va(e);n.slots.default=()=>t},ku=(n,e,t)=>{for(const s in e)(t||s!=="_")&&(n[s]=e[s])},$d=(n,e,t)=>{const s=n.slots=yu();if(n.vnode.shapeFlag&32){const r=e._;r?(ku(s,e,t),t&&Dl(s,"_",r,!0)):Tu(e,s)}else e&&Su(n,e)},Wd=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=Ce;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:ku(r,e,t):(i=!e.$stable,Tu(e,r)),o=e}else e&&(Su(n,e),o={default:1});if(i)for(const a in r)!xu(a)&&o[a]==null&&delete r[a]},kt=sp;function jd(n){return Gd(n)}function Gd(n,e){const t=Ui();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:m,setScopeId:p=Zt,insertStaticContent:g}=n,y=(E,A,q,D=null,L=null,G=null,O=void 0,N=null,U=!!A.dynamicChildren)=>{if(E===A)return;E&&!Ds(E,A)&&(D=Se(E),ae(E,L,G,!0),E=null),A.patchFlag===-2&&(U=!1,A.dynamicChildren=null);const{type:$,ref:Y,shapeFlag:z}=A;switch($){case zi:w(E,A,q,D);break;case Tn:x(E,A,q,D);break;case _o:E==null&&M(A,q,D,O);break;case mt:W(E,A,q,D,L,G,O,N,U);break;default:z&1?b(E,A,q,D,L,G,O,N,U):z&6?K(E,A,q,D,L,G,O,N,U):(z&64||z&128)&&$.process(E,A,q,D,L,G,O,N,U,$e)}Y!=null&&L&&oi(Y,E&&E.ref,G,A||E,!A)},w=(E,A,q,D)=>{if(E==null)s(A.el=a(A.children),q,D);else{const L=A.el=E.el;A.children!==E.children&&l(L,A.children)}},x=(E,A,q,D)=>{E==null?s(A.el=c(A.children||""),q,D):A.el=E.el},M=(E,A,q,D)=>{[E.el,E.anchor]=g(E.children,A,q,D,E.el,E.anchor)},P=({el:E,anchor:A},q,D)=>{let L;for(;E&&E!==A;)L=m(E),s(E,q,D),E=L;s(A,q,D)},S=({el:E,anchor:A})=>{let q;for(;E&&E!==A;)q=m(E),r(E),E=q;r(A)},b=(E,A,q,D,L,G,O,N,U)=>{A.type==="svg"?O="svg":A.type==="math"&&(O="mathml"),E==null?I(A,q,D,L,G,O,N,U):B(E,A,L,G,O,N,U)},I=(E,A,q,D,L,G,O,N)=>{let U,$;const{props:Y,shapeFlag:z,transition:ne,dirs:ie}=E;if(U=E.el=o(E.type,G,Y&&Y.is,Y),z&8?u(U,E.children):z&16&&T(E.children,U,null,D,L,go(E,G),O,N),ie&&Rn(E,null,D,"created"),C(U,E,E.scopeId,O,D),Y){for(const _ in Y)_!=="value"&&!qs(_)&&i(U,_,null,Y[_],G,D);"value"in Y&&i(U,"value",null,Y.value,G),($=Y.onVnodeBeforeMount)&&Gt($,D,E)}ie&&Rn(E,null,D,"beforeMount");const ue=Hd(L,ne);ue&&ne.beforeEnter(U),s(U,A,q),(($=Y&&Y.onVnodeMounted)||ue||ie)&&kt(()=>{$&&Gt($,D,E),ue&&ne.enter(U),ie&&Rn(E,null,D,"mounted")},L)},C=(E,A,q,D,L)=>{if(q&&p(E,q),D)for(let G=0;G<D.length;G++)p(E,D[G]);if(L){let G=L.subTree;if(A===G||Nu(G.type)&&(G.ssContent===A||G.ssFallback===A)){const O=L.vnode;C(E,O,O.scopeId,O.slotScopeIds,L.parent)}}},T=(E,A,q,D,L,G,O,N,U=0)=>{for(let $=U;$<E.length;$++){const Y=E[$]=N?_n(E[$]):Yt(E[$]);y(null,Y,A,q,D,L,G,O,N)}},B=(E,A,q,D,L,G,O)=>{const N=A.el=E.el;let{patchFlag:U,dynamicChildren:$,dirs:Y}=A;U|=E.patchFlag&16;const z=E.props||Ce,ne=A.props||Ce;let ie;if(q&&Dn(q,!1),(ie=ne.onVnodeBeforeUpdate)&&Gt(ie,q,A,E),Y&&Rn(A,E,q,"beforeUpdate"),q&&Dn(q,!0),(z.innerHTML&&ne.innerHTML==null||z.textContent&&ne.textContent==null)&&u(N,""),$?F(E.dynamicChildren,$,N,q,D,go(A,L),G):O||ee(E,A,N,null,q,D,go(A,L),G,!1),U>0){if(U&16)V(N,z,ne,q,L);else if(U&2&&z.class!==ne.class&&i(N,"class",null,ne.class,L),U&4&&i(N,"style",z.style,ne.style,L),U&8){const ue=A.dynamicProps;for(let _=0;_<ue.length;_++){const f=ue[_],d=z[f],v=ne[f];(v!==d||f==="value")&&i(N,f,d,v,L,q)}}U&1&&E.children!==A.children&&u(N,A.children)}else!O&&$==null&&V(N,z,ne,q,L);((ie=ne.onVnodeUpdated)||Y)&&kt(()=>{ie&&Gt(ie,q,A,E),Y&&Rn(A,E,q,"updated")},D)},F=(E,A,q,D,L,G,O)=>{for(let N=0;N<A.length;N++){const U=E[N],$=A[N],Y=U.el&&(U.type===mt||!Ds(U,$)||U.shapeFlag&70)?h(U.el):q;y(U,$,Y,null,D,L,G,O,!0)}},V=(E,A,q,D,L)=>{if(A!==q){if(A!==Ce)for(const G in A)!qs(G)&&!(G in q)&&i(E,G,A[G],null,L,D);for(const G in q){if(qs(G))continue;const O=q[G],N=A[G];O!==N&&G!=="value"&&i(E,G,N,O,L,D)}"value"in q&&i(E,"value",A.value,q.value,L)}},W=(E,A,q,D,L,G,O,N,U)=>{const $=A.el=E?E.el:a(""),Y=A.anchor=E?E.anchor:a("");let{patchFlag:z,dynamicChildren:ne,slotScopeIds:ie}=A;ie&&(N=N?N.concat(ie):ie),E==null?(s($,q,D),s(Y,q,D),T(A.children||[],q,Y,L,G,O,N,U)):z>0&&z&64&&ne&&E.dynamicChildren?(F(E.dynamicChildren,ne,q,L,G,O,N),(A.key!=null||L&&A===L.subTree)&&Iu(E,A,!0)):ee(E,A,q,Y,L,G,O,N,U)},K=(E,A,q,D,L,G,O,N,U)=>{A.slotScopeIds=N,E==null?A.shapeFlag&512?L.ctx.activate(A,q,D,O,U):X(A,q,D,L,G,O,U):te(E,A,U)},X=(E,A,q,D,L,G,O)=>{const N=E.component=up(E,D,L);if(hu(E)&&(N.ctx.renderer=$e),hp(N,!1,O),N.asyncDep){if(L&&L.registerDep(N,Z,O),!E.el){const U=N.subTree=Je(Tn);x(null,U,A,q)}}else Z(N,E,A,q,L,G,O)},te=(E,A,q)=>{const D=A.component=E.component;if(tp(E,A,q))if(D.asyncDep&&!D.asyncResolved){H(D,A,q);return}else D.next=A,D.update();else A.el=E.el,D.vnode=A},Z=(E,A,q,D,L,G,O)=>{const N=()=>{if(E.isMounted){let{next:z,bu:ne,u:ie,parent:ue,vnode:_}=E;{const R=Eu(E);if(R){z&&(z.el=_.el,H(E,z,O)),R.asyncDep.then(()=>{E.isUnmounted||N()});return}}let f=z,d;Dn(E,!1),z?(z.el=_.el,H(E,z,O)):z=_,ne&&Hr(ne),(d=z.props&&z.props.onVnodeBeforeUpdate)&&Gt(d,ue,z,_),Dn(E,!0);const v=yc(E),k=E.subTree;E.subTree=v,y(k,v,h(k.el),Se(k),E,L,G),z.el=v.el,f===null&&np(E,v.el),ie&&kt(ie,L),(d=z.props&&z.props.onVnodeUpdated)&&kt(()=>Gt(d,ue,z,_),L)}else{let z;const{el:ne,props:ie}=A,{bm:ue,m:_,parent:f,root:d,type:v}=E,k=ms(A);Dn(E,!1),ue&&Hr(ue),!k&&(z=ie&&ie.onVnodeBeforeMount)&&Gt(z,f,A),Dn(E,!0);{d.ce&&d.ce._injectChildStyle(v);const R=E.subTree=yc(E);y(null,R,q,D,E,L,G),A.el=R.el}if(_&&kt(_,L),!k&&(z=ie&&ie.onVnodeMounted)){const R=A;kt(()=>Gt(z,f,R),L)}(A.shapeFlag&256||f&&ms(f.vnode)&&f.vnode.shapeFlag&256)&&E.a&&kt(E.a,L),E.isMounted=!0,A=q=D=null}};E.scope.on();const U=E.effect=new $l(N);E.scope.off();const $=E.update=U.run.bind(U),Y=E.job=U.runIfDirty.bind(U);Y.i=E,Y.id=E.uid,U.scheduler=()=>ga(Y),Dn(E,!0),$()},H=(E,A,q)=>{A.component=E;const D=E.vnode.props;E.vnode=A,E.next=null,Ud(E,A.props,D,q),Wd(E,A.children,q),Cn(),hc(E),An()},ee=(E,A,q,D,L,G,O,N,U=!1)=>{const $=E&&E.children,Y=E?E.shapeFlag:0,z=A.children,{patchFlag:ne,shapeFlag:ie}=A;if(ne>0){if(ne&128){oe($,z,q,D,L,G,O,N,U);return}else if(ne&256){re($,z,q,D,L,G,O,N,U);return}}ie&8?(Y&16&&_e($,L,G),z!==$&&u(q,z)):Y&16?ie&16?oe($,z,q,D,L,G,O,N,U):_e($,L,G,!0):(Y&8&&u(q,""),ie&16&&T(z,q,D,L,G,O,N,U))},re=(E,A,q,D,L,G,O,N,U)=>{E=E||fs,A=A||fs;const $=E.length,Y=A.length,z=Math.min($,Y);let ne;for(ne=0;ne<z;ne++){const ie=A[ne]=U?_n(A[ne]):Yt(A[ne]);y(E[ne],ie,q,null,L,G,O,N,U)}$>Y?_e(E,L,G,!0,!1,z):T(A,q,D,L,G,O,N,U,z)},oe=(E,A,q,D,L,G,O,N,U)=>{let $=0;const Y=A.length;let z=E.length-1,ne=Y-1;for(;$<=z&&$<=ne;){const ie=E[$],ue=A[$]=U?_n(A[$]):Yt(A[$]);if(Ds(ie,ue))y(ie,ue,q,null,L,G,O,N,U);else break;$++}for(;$<=z&&$<=ne;){const ie=E[z],ue=A[ne]=U?_n(A[ne]):Yt(A[ne]);if(Ds(ie,ue))y(ie,ue,q,null,L,G,O,N,U);else break;z--,ne--}if($>z){if($<=ne){const ie=ne+1,ue=ie<Y?A[ie].el:D;for(;$<=ne;)y(null,A[$]=U?_n(A[$]):Yt(A[$]),q,ue,L,G,O,N,U),$++}}else if($>ne)for(;$<=z;)ae(E[$],L,G,!0),$++;else{const ie=$,ue=$,_=new Map;for($=ue;$<=ne;$++){const ge=A[$]=U?_n(A[$]):Yt(A[$]);ge.key!=null&&_.set(ge.key,$)}let f,d=0;const v=ne-ue+1;let k=!1,R=0;const j=new Array(v);for($=0;$<v;$++)j[$]=0;for($=ie;$<=z;$++){const ge=E[$];if(d>=v){ae(ge,L,G,!0);continue}let be;if(ge.key!=null)be=_.get(ge.key);else for(f=ue;f<=ne;f++)if(j[f-ue]===0&&Ds(ge,A[f])){be=f;break}be===void 0?ae(ge,L,G,!0):(j[be-ue]=$+1,be>=R?R=be:k=!0,y(ge,A[be],q,null,L,G,O,N,U),d++)}const fe=k?zd(j):fs;for(f=fe.length-1,$=v-1;$>=0;$--){const ge=ue+$,be=A[ge],Oe=ge+1<Y?A[ge+1].el:D;j[$]===0?y(null,be,q,Oe,L,G,O,N,U):k&&(f<0||$!==fe[f]?Q(be,q,Oe,2):f--)}}},Q=(E,A,q,D,L=null)=>{const{el:G,type:O,transition:N,children:U,shapeFlag:$}=E;if($&6){Q(E.component.subTree,A,q,D);return}if($&128){E.suspense.move(A,q,D);return}if($&64){O.move(E,A,q,$e);return}if(O===mt){s(G,A,q);for(let z=0;z<U.length;z++)Q(U[z],A,q,D);s(E.anchor,A,q);return}if(O===_o){P(E,A,q);return}if(D!==2&&$&1&&N)if(D===0)N.beforeEnter(G),s(G,A,q),kt(()=>N.enter(G),L);else{const{leave:z,delayLeave:ne,afterLeave:ie}=N,ue=()=>s(G,A,q),_=()=>{z(G,()=>{ue(),ie&&ie()})};ne?ne(G,ue,_):_()}else s(G,A,q)},ae=(E,A,q,D=!1,L=!1)=>{const{type:G,props:O,ref:N,children:U,dynamicChildren:$,shapeFlag:Y,patchFlag:z,dirs:ne,cacheIndex:ie}=E;if(z===-2&&(L=!1),N!=null&&oi(N,null,q,E,!0),ie!=null&&(A.renderCache[ie]=void 0),Y&256){A.ctx.deactivate(E);return}const ue=Y&1&&ne,_=!ms(E);let f;if(_&&(f=O&&O.onVnodeBeforeUnmount)&&Gt(f,A,E),Y&6)he(E.component,q,D);else{if(Y&128){E.suspense.unmount(q,D);return}ue&&Rn(E,null,A,"beforeUnmount"),Y&64?E.type.remove(E,A,q,$e,D):$&&!$.hasOnce&&(G!==mt||z>0&&z&64)?_e($,A,q,!1,!0):(G===mt&&z&384||!L&&Y&16)&&_e(U,A,q),D&&qe(E)}(_&&(f=O&&O.onVnodeUnmounted)||ue)&&kt(()=>{f&&Gt(f,A,E),ue&&Rn(E,null,A,"unmounted")},q)},qe=E=>{const{type:A,el:q,anchor:D,transition:L}=E;if(A===mt){Ye(q,D);return}if(A===_o){S(E);return}const G=()=>{r(q),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(E.shapeFlag&1&&L&&!L.persisted){const{leave:O,delayLeave:N}=L,U=()=>O(q,G);N?N(E.el,G,U):U()}else G()},Ye=(E,A)=>{let q;for(;E!==A;)q=m(E),r(E),E=q;r(A)},he=(E,A,q)=>{const{bum:D,scope:L,job:G,subTree:O,um:N,m:U,a:$}=E;_c(U),_c($),D&&Hr(D),L.stop(),G&&(G.flags|=8,ae(O,E,A,q)),N&&kt(N,A),kt(()=>{E.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},_e=(E,A,q,D=!1,L=!1,G=0)=>{for(let O=G;O<E.length;O++)ae(E[O],A,q,D,L)},Se=E=>{if(E.shapeFlag&6)return Se(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const A=m(E.anchor||E.el),q=A&&A[dd];return q?m(q):A};let se=!1;const rt=(E,A,q)=>{E==null?A._vnode&&ae(A._vnode,null,null,!0):y(A._vnode||null,E,A,null,null,null,q),A._vnode=E,se||(se=!0,hc(),au(),se=!1)},$e={p:y,um:ae,m:Q,r:qe,mt:X,mc:T,pc:ee,pbc:F,n:Se,o:n};return{render:rt,hydrate:void 0,createApp:Pd(rt)}}function go({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Dn({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function Hd(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Iu(n,e,t=!1){const s=n.children,r=e.children;if(ce(s)&&ce(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=_n(r[i]),a.el=o.el),!t&&a.patchFlag!==-2&&Iu(o,a)),a.type===zi&&(a.el=o.el)}}function zd(n){const e=n.slice(),t=[0];let s,r,i,o,a;const c=n.length;for(s=0;s<c;s++){const l=n[s];if(l!==0){if(r=t[t.length-1],n[r]<l){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<l?i=a+1:o=a;l<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function Eu(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Eu(e)}function _c(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Yd=Symbol.for("v-scx"),Zd=()=>Gs(Yd);function Vn(n,e,t){return Cu(n,e,t)}function Cu(n,e,t=Ce){const{immediate:s,deep:r,flush:i,once:o}=t,a=ut({},t),c=e&&s||!e&&i!=="post";let l;if(nr){if(i==="sync"){const p=Zd();l=p.__watcherHandles||(p.__watcherHandles=[])}else if(!c){const p=()=>{};return p.stop=Zt,p.resume=Zt,p.pause=Zt,p}}const u=lt;a.call=(p,g,y)=>Xt(p,u,g,y);let h=!1;i==="post"?a.scheduler=p=>{kt(p,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(p,g)=>{g?p():ga(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const m=cd(n,e,a);return nr&&(l?l.push(m):c&&m()),m}function Xd(n,e,t){const s=this.proxy,r=Xe(n)?n.includes(".")?Au(s,n):()=>s[n]:n.bind(s,s);let i;de(e)?i=e:(i=e.handler,t=e);const o=br(this),a=Cu(r,i.bind(s),t);return o(),a}function Au(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}const Kd=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${xn(e)}Modifiers`]||n[`${En(e)}Modifiers`];function Jd(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||Ce;let r=t;const i=e.startsWith("update:"),o=i&&Kd(s,e.slice(7));o&&(o.trim&&(r=t.map(u=>Xe(u)?u.trim():u)),o.number&&(r=t.map(Sf)));let a,c=s[a=lo(e)]||s[a=lo(xn(e))];!c&&i&&(c=s[a=lo(En(e))]),c&&Xt(c,n,6,r);const l=s[a+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Xt(l,n,6,r)}}function Mu(n,e,t=!1){const s=e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!de(n)){const c=l=>{const u=Mu(l,e,!0);u&&(a=!0,ut(o,u))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(Pe(n)&&s.set(n,null),null):(ce(i)?i.forEach(c=>o[c]=null):ut(o,i),Pe(n)&&s.set(n,o),o)}function Hi(n,e){return!n||!Fi(e)?!1:(e=e.slice(2).replace(/Once$/,""),we(n,e[0].toLowerCase()+e.slice(1))||we(n,En(e))||we(n,e))}function yc(n){const{type:e,vnode:t,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:h,data:m,setupState:p,ctx:g,inheritAttrs:y}=n,w=ii(n);let x,M;try{if(t.shapeFlag&4){const S=r||s,b=S;x=Yt(l.call(b,S,u,h,p,m,g)),M=a}else{const S=e;x=Yt(S.length>1?S(h,{attrs:a,slots:o,emit:c}):S(h,null)),M=e.props?a:Qd(a)}}catch(S){Hs.length=0,Wi(S,n,1),x=Je(Tn)}let P=x;if(M&&y!==!1){const S=Object.keys(M),{shapeFlag:b}=P;S.length&&b&7&&(i&&S.some(ra)&&(M=ep(M,i)),P=ys(P,M,!1,!0))}return t.dirs&&(P=ys(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(t.dirs):t.dirs),t.transition&&_a(P,t.transition),x=P,ii(w),x}const Qd=n=>{let e;for(const t in n)(t==="class"||t==="style"||Fi(t))&&((e||(e={}))[t]=n[t]);return e},ep=(n,e)=>{const t={};for(const s in n)(!ra(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function tp(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return s?bc(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const m=u[h];if(o[m]!==s[m]&&!Hi(l,m))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?bc(s,o,l):!0:!!o;return!1}function bc(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!Hi(t,i))return!0}return!1}function np({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const Nu=n=>n.__isSuspense;function sp(n,e){e&&e.pendingBranch?ce(n)?e.effects.push(...n):e.effects.push(n):hd(n)}const mt=Symbol.for("v-fgt"),zi=Symbol.for("v-txt"),Tn=Symbol.for("v-cmt"),_o=Symbol.for("v-stc"),Hs=[];let Et=null;function Le(n=!1){Hs.push(Et=n?null:[])}function rp(){Hs.pop(),Et=Hs[Hs.length-1]||null}let tr=1;function vc(n,e=!1){tr+=n,n<0&&Et&&e&&(Et.hasOnce=!0)}function Ou(n){return n.dynamicChildren=tr>0?Et||fs:null,rp(),tr>0&&Et&&Et.push(n),n}function Ge(n,e,t,s,r,i){return Ou(Me(n,e,t,s,r,i,!0))}function Uo(n,e,t,s,r){return Ou(Je(n,e,t,s,r,!0))}function wa(n){return n?n.__v_isVNode===!0:!1}function Ds(n,e){return n.type===e.type&&n.key===e.key}const Ru=({key:n})=>n??null,Yr=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Xe(n)||He(n)||de(n)?{i:it,r:n,k:e,f:!!t}:n:null);function Me(n,e=null,t=null,s=0,r=null,i=n===mt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Ru(e),ref:e&&Yr(e),scopeId:lu,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:it};return a?(xa(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=Xe(t)?8:16),tr>0&&!o&&Et&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Et.push(c),c}const Je=ip;function ip(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===Id)&&(n=Tn),wa(n)){const a=ys(n,e,!0);return t&&xa(a,t),tr>0&&!i&&Et&&(a.shapeFlag&6?Et[Et.indexOf(n)]=a:Et.push(a)),a.patchFlag=-2,a}if(mp(n)&&(n=n.__vccOpts),e){e=op(e);let{class:a,style:c}=e;a&&!Xe(a)&&(e.class=_r(a)),Pe(c)&&(pa(c)&&!ce(c)&&(c=ut({},c)),e.style=aa(c))}const o=Xe(n)?1:Nu(n)?128:pd(n)?64:Pe(n)?4:de(n)?2:0;return Me(n,e,t,s,r,o,i,!0)}function op(n){return n?pa(n)||bu(n)?ut({},n):n:null}function ys(n,e,t=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:c}=n,l=e?ap(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:l,key:l&&Ru(l),ref:e&&e.ref?t&&i?ce(i)?i.concat(Yr(e)):[i,Yr(e)]:Yr(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==mt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&ys(n.ssContent),ssFallback:n.ssFallback&&ys(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&s&&_a(u,c.clone(u)),u}function bs(n=" ",e=0){return Je(zi,null,n,e)}function ci(n="",e=!1){return e?(Le(),Uo(Tn,null,n)):Je(Tn,null,n)}function Yt(n){return n==null||typeof n=="boolean"?Je(Tn):ce(n)?Je(mt,null,n.slice()):wa(n)?_n(n):Je(zi,null,String(n))}function _n(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:ys(n)}function xa(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(ce(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),xa(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!bu(e)?e._ctx=it:r===3&&it&&(it.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:it},t=32):(e=String(e),s&64?(t=16,e=[bs(e)]):t=8);n.children=e,n.shapeFlag|=t}function ap(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=_r([e.class,s.class]));else if(r==="style")e.style=aa([e.style,s.style]);else if(Fi(r)){const i=e[r],o=s[r];o&&i!==o&&!(ce(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Gt(n,e,t,s=null){Xt(n,e,7,[t,s])}const cp=gu();let lp=0;function up(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||cp,i={uid:lp++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ul(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wu(s,r),emitsOptions:Mu(s,r),emit:null,emitted:null,propsDefaults:Ce,inheritAttrs:s.inheritAttrs,ctx:Ce,data:Ce,props:Ce,attrs:Ce,slots:Ce,refs:Ce,setupState:Ce,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Jd.bind(null,i),n.ce&&n.ce(i),i}let lt=null,li,Vo;{const n=Ui(),e=(t,s)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};li=e("__VUE_INSTANCE_SETTERS__",t=>lt=t),Vo=e("__VUE_SSR_SETTERS__",t=>nr=t)}const br=n=>{const e=lt;return li(n),n.scope.on(),()=>{n.scope.off(),li(e)}},wc=()=>{lt&&lt.scope.off(),li(null)};function Du(n){return n.vnode.shapeFlag&4}let nr=!1;function hp(n,e=!1,t=!1){e&&Vo(e);const{props:s,children:r}=n.vnode,i=Du(n);Ld(n,s,i,e),$d(n,r,t);const o=i?fp(n,e):void 0;return e&&Vo(!1),o}function fp(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Cd);const{setup:s}=t;if(s){Cn();const r=n.setupContext=s.length>1?pp(n):null,i=br(n),o=yr(s,n,0,[n.props,r]),a=Ml(o);if(An(),i(),(a||n.sp)&&!ms(n)&&uu(n),a){if(o.then(wc,wc),e)return o.then(c=>{xc(n,c)}).catch(c=>{Wi(c,n,0)});n.asyncDep=o}else xc(n,o)}else Pu(n)}function xc(n,e,t){de(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Pe(e)&&(n.setupState=su(e)),Pu(n)}function Pu(n,e,t){const s=n.type;n.render||(n.render=s.render||Zt);{const r=br(n);Cn();try{Ad(n)}finally{An(),r()}}}const dp={get(n,e){return at(n,"get",""),n[e]}};function pp(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,dp),slots:n.slots,emit:n.emit,expose:e}}function Yi(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(su(ma(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in js)return js[t](n)},has(e,t){return t in e||t in js}})):n.proxy}function mp(n){return de(n)&&"__vccOpts"in n}const Zi=(n,e)=>od(n,e,nr),gp="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qo;const Tc=typeof window<"u"&&window.trustedTypes;if(Tc)try{qo=Tc.createPolicy("vue",{createHTML:n=>n})}catch{}const Fu=qo?n=>qo.createHTML(n):n=>n,_p="http://www.w3.org/2000/svg",yp="http://www.w3.org/1998/Math/MathML",nn=typeof document<"u"?document:null,Sc=nn&&nn.createElement("template"),bp={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e==="svg"?nn.createElementNS(_p,n):e==="mathml"?nn.createElementNS(yp,n):t?nn.createElement(n,{is:t}):nn.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>nn.createTextNode(n),createComment:n=>nn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>nn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{Sc.innerHTML=Fu(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=Sc.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},vp=Symbol("_vtc");function wp(n,e,t){const s=n[vp];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const kc=Symbol("_vod"),xp=Symbol("_vsh"),Tp=Symbol(""),Sp=/(^|;)\s*display\s*:/;function kp(n,e,t){const s=n.style,r=Xe(t);let i=!1;if(t&&!r){if(e)if(Xe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Zr(s,a,"")}else for(const o in e)t[o]==null&&Zr(s,o,"");for(const o in t)o==="display"&&(i=!0),Zr(s,o,t[o])}else if(r){if(e!==t){const o=s[Tp];o&&(t+=";"+o),s.cssText=t,i=Sp.test(t)}}else e&&n.removeAttribute("style");kc in n&&(n[kc]=i?s.display:"",n[xp]&&(s.display="none"))}const Ic=/\s*!important$/;function Zr(n,e,t){if(ce(t))t.forEach(s=>Zr(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=Ip(n,e);Ic.test(t)?n.setProperty(En(s),t.replace(Ic,""),"important"):n[s]=t}}const Ec=["Webkit","Moz","ms"],yo={};function Ip(n,e){const t=yo[e];if(t)return t;let s=xn(e);if(s!=="filter"&&s in n)return yo[e]=s;s=Rl(s);for(let r=0;r<Ec.length;r++){const i=Ec[r]+s;if(i in n)return yo[e]=i}return e}const Cc="http://www.w3.org/1999/xlink";function Ac(n,e,t,s,r,i=Mf(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Cc,e.slice(6,e.length)):n.setAttributeNS(Cc,e,t):t==null||i&&!Pl(t)?n.removeAttribute(e):n.setAttribute(e,i?"":Ut(t)?String(t):t)}function Mc(n,e,t,s,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?Fu(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(a!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=Pl(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(r||e)}function Bu(n,e,t,s){n.addEventListener(e,t,s)}function Ep(n,e,t,s){n.removeEventListener(e,t,s)}const Nc=Symbol("_vei");function Cp(n,e,t,s,r=null){const i=n[Nc]||(n[Nc]={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=Ap(e);if(s){const l=i[e]=Op(s,r);Bu(n,a,l,c)}else o&&(Ep(n,a,o,c),i[e]=void 0)}}const Oc=/(?:Once|Passive|Capture)$/;function Ap(n){let e;if(Oc.test(n)){e={};let s;for(;s=n.match(Oc);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):En(n.slice(2)),e]}let bo=0;const Mp=Promise.resolve(),Np=()=>bo||(Mp.then(()=>bo=0),bo=Date.now());function Op(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;Xt(Rp(s,t.value),e,5,[s])};return t.value=n,t.attached=Np(),t}function Rp(n,e){if(ce(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Rc=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Dp=(n,e,t,s,r,i)=>{const o=r==="svg";e==="class"?wp(n,s,o):e==="style"?kp(n,t,s):Fi(e)?ra(e)||Cp(n,e,t,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Pp(n,e,s,o))?(Mc(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ac(n,e,s,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Xe(s))?Mc(n,xn(e),s,i,e):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),Ac(n,e,s,o))};function Pp(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&Rc(e)&&de(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Rc(e)&&Xe(t)?!1:e in n}const Dc=n=>{const e=n.props["onUpdate:modelValue"]||!1;return ce(e)?t=>Hr(e,t):e},vo=Symbol("_assign"),Fp={deep:!0,created(n,e,t){n[vo]=Dc(t),Bu(n,"change",()=>{const s=n._modelValue,r=Bp(n),i=n.checked,o=n[vo];if(ce(s)){const a=Fl(s,r),c=a!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const l=[...s];l.splice(a,1),o(l)}}else if(Bi(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(Lu(n,i))})},mounted:Pc,beforeUpdate(n,e,t){n[vo]=Dc(t),Pc(n,e,t)}};function Pc(n,{value:e,oldValue:t},s){n._modelValue=e;let r;if(ce(e))r=Fl(e,s.props.value)>-1;else if(Bi(e))r=e.has(s.props.value);else{if(e===t)return;r=Vi(e,Lu(n,!0))}n.checked!==r&&(n.checked=r)}function Bp(n){return"_value"in n?n._value:n.value}function Lu(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const Lp=["ctrl","shift","alt","meta"],Up={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>Lp.some(t=>n[`${t}Key`]&&!e.includes(t))},Ps=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=Up[e[o]];if(a&&a(r,e))return}return n(r,...i)})},Vp={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qp=(n,e)=>{const t=n._withKeys||(n._withKeys={}),s=e.join(".");return t[s]||(t[s]=r=>{if(!("key"in r))return;const i=En(r.key);if(e.some(o=>o===i||Vp[o]===i))return n(r)})},$p=ut({patchProp:Dp},bp);let Fc;function Wp(){return Fc||(Fc=jd($p))}const jp=(...n)=>{const e=Wp().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=Hp(s);if(!r)return;const i=e._component;!de(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,Gp(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Gp(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Hp(n){return Xe(n)?document.querySelector(n):n}let Uu;const Xi=n=>Uu=n,Vu=Symbol();function $o(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var zs;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(zs||(zs={}));function zp(){const n=Vl(!0),e=n.run(()=>nt({}));let t=[],s=[];const r=ma({install(i){Xi(r),r._a=i,i.provide(Vu,r),i.config.globalProperties.$pinia=r,s.forEach(o=>t.push(o)),s=[]},use(i){return this._a?t.push(i):s.push(i),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return r}const qu=()=>{};function Bc(n,e,t,s=qu){n.push(e);const r=()=>{const i=n.indexOf(e);i>-1&&(n.splice(i,1),s())};return!t&&ql()&&Of(r),r}function is(n,...e){n.slice().forEach(t=>{t(...e)})}const Yp=n=>n(),Lc=Symbol(),wo=Symbol();function Wo(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,s)=>n.set(s,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const s=e[t],r=n[t];$o(r)&&$o(s)&&n.hasOwnProperty(t)&&!He(s)&&!vn(s)?n[t]=Wo(r,s):n[t]=s}return n}const Zp=Symbol();function Xp(n){return!$o(n)||!n.hasOwnProperty(Zp)}const{assign:mn}=Object;function Kp(n){return!!(He(n)&&n.effect)}function Jp(n,e,t,s){const{state:r,actions:i,getters:o}=e,a=t.state.value[n];let c;function l(){a||(t.state.value[n]=r?r():{});const u=nd(t.state.value[n]);return mn(u,i,Object.keys(o||{}).reduce((h,m)=>(h[m]=ma(Zi(()=>{Xi(t);const p=t._s.get(n);return o[m].call(p,p)})),h),{}))}return c=$u(n,l,e,t,s,!0),c}function $u(n,e,t={},s,r,i){let o;const a=mn({actions:{}},t),c={deep:!0};let l,u,h=[],m=[],p;const g=s.state.value[n];!i&&!g&&(s.state.value[n]={}),nt({});let y;function w(T){let B;l=u=!1,typeof T=="function"?(T(s.state.value[n]),B={type:zs.patchFunction,storeId:n,events:p}):(Wo(s.state.value[n],T),B={type:zs.patchObject,payload:T,storeId:n,events:p});const F=y=Symbol();iu().then(()=>{y===F&&(l=!0)}),u=!0,is(h,B,s.state.value[n])}const x=i?function(){const{state:B}=t,F=B?B():{};this.$patch(V=>{mn(V,F)})}:qu;function M(){o.stop(),h=[],m=[],s._s.delete(n)}const P=(T,B="")=>{if(Lc in T)return T[wo]=B,T;const F=function(){Xi(s);const V=Array.from(arguments),W=[],K=[];function X(H){W.push(H)}function te(H){K.push(H)}is(m,{args:V,name:F[wo],store:b,after:X,onError:te});let Z;try{Z=T.apply(this&&this.$id===n?this:b,V)}catch(H){throw is(K,H),H}return Z instanceof Promise?Z.then(H=>(is(W,H),H)).catch(H=>(is(K,H),Promise.reject(H))):(is(W,Z),Z)};return F[Lc]=!0,F[wo]=B,F},S={_p:s,$id:n,$onAction:Bc.bind(null,m),$patch:w,$reset:x,$subscribe(T,B={}){const F=Bc(h,T,B.detached,()=>V()),V=o.run(()=>Vn(()=>s.state.value[n],W=>{(B.flush==="sync"?u:l)&&T({storeId:n,type:zs.direct,events:p},W)},mn({},c,B)));return F},$dispose:M},b=$i(S);s._s.set(n,b);const C=(s._a&&s._a.runWithContext||Yp)(()=>s._e.run(()=>(o=Vl()).run(()=>e({action:P}))));for(const T in C){const B=C[T];if(He(B)&&!Kp(B)||vn(B))i||(g&&Xp(B)&&(He(B)?B.value=g[T]:Wo(B,g[T])),s.state.value[n][T]=B);else if(typeof B=="function"){const F=P(B,T);C[T]=F,a.actions[T]=B}}return mn(b,C),mn(ve(b),C),Object.defineProperty(b,"$state",{get:()=>s.state.value[n],set:T=>{w(B=>{mn(B,T)})}}),s._p.forEach(T=>{mn(b,o.run(()=>T({store:b,app:s._a,pinia:s,options:a})))}),g&&i&&t.hydrate&&t.hydrate(b.$state,g),l=!0,u=!0,b}/*! #__NO_SIDE_EFFECTS__ */function Qp(n,e,t){let s,r;const i=typeof e=="function";s=n,r=i?t:e;function o(a,c){const l=Bd();return a=a||(l?Gs(Vu,null):null),a&&Xi(a),a=Uu,a._s.has(s)||(i?$u(s,e,r,a):Jp(s,r,a)),a._s.get(s)}return o.$id=s,o}function Ta(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let es=Ta();function Wu(n){es=n}const Ys={exec:()=>null};function xe(n,e=""){let t=typeof n=="string"?n:n.source;const s={replace:(r,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(_t.caret,"$1"),t=t.replace(r,o),s},getRegex:()=>new RegExp(t,e)};return s}const _t={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},em=/^(?:[ \t]*(?:\n|$))+/,tm=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,nm=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,vr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,sm=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Sa=/(?:[*+-]|\d{1,9}[.)])/,ju=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Gu=xe(ju).replace(/bull/g,Sa).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),rm=xe(ju).replace(/bull/g,Sa).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),ka=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,im=/^[^\n]+/,Ia=/(?!\s*\])(?:\\.|[^\[\]\\])+/,om=xe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ia).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),am=xe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Sa).getRegex(),Ki="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ea=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,cm=xe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ea).replace("tag",Ki).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Hu=xe(ka).replace("hr",vr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ki).getRegex(),lm=xe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Hu).getRegex(),Ca={blockquote:lm,code:tm,def:om,fences:nm,heading:sm,hr:vr,html:cm,lheading:Gu,list:am,newline:em,paragraph:Hu,table:Ys,text:im},Uc=xe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",vr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ki).getRegex(),um={...Ca,lheading:rm,table:Uc,paragraph:xe(ka).replace("hr",vr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Uc).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ki).getRegex()},hm={...Ca,html:xe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ea).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ys,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:xe(ka).replace("hr",vr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Gu).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},fm=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,dm=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,zu=/^( {2,}|\\)\n(?!\s*$)/,pm=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ji=/[\p{P}\p{S}]/u,Aa=/[\s\p{P}\p{S}]/u,Yu=/[^\s\p{P}\p{S}]/u,mm=xe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Aa).getRegex(),Zu=/(?!~)[\p{P}\p{S}]/u,gm=/(?!~)[\s\p{P}\p{S}]/u,_m=/(?:[^\s\p{P}\p{S}]|~)/u,ym=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Xu=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,bm=xe(Xu,"u").replace(/punct/g,Ji).getRegex(),vm=xe(Xu,"u").replace(/punct/g,Zu).getRegex(),Ku="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",wm=xe(Ku,"gu").replace(/notPunctSpace/g,Yu).replace(/punctSpace/g,Aa).replace(/punct/g,Ji).getRegex(),xm=xe(Ku,"gu").replace(/notPunctSpace/g,_m).replace(/punctSpace/g,gm).replace(/punct/g,Zu).getRegex(),Tm=xe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Yu).replace(/punctSpace/g,Aa).replace(/punct/g,Ji).getRegex(),Sm=xe(/\\(punct)/,"gu").replace(/punct/g,Ji).getRegex(),km=xe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Im=xe(Ea).replace("(?:-->|$)","-->").getRegex(),Em=xe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Im).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ui=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Cm=xe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ui).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ju=xe(/^!?\[(label)\]\[(ref)\]/).replace("label",ui).replace("ref",Ia).getRegex(),Qu=xe(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ia).getRegex(),Am=xe("reflink|nolink(?!\\()","g").replace("reflink",Ju).replace("nolink",Qu).getRegex(),Ma={_backpedal:Ys,anyPunctuation:Sm,autolink:km,blockSkip:ym,br:zu,code:dm,del:Ys,emStrongLDelim:bm,emStrongRDelimAst:wm,emStrongRDelimUnd:Tm,escape:fm,link:Cm,nolink:Qu,punctuation:mm,reflink:Ju,reflinkSearch:Am,tag:Em,text:pm,url:Ys},Mm={...Ma,link:xe(/^!?\[(label)\]\((.*?)\)/).replace("label",ui).getRegex(),reflink:xe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ui).getRegex()},jo={...Ma,emStrongRDelimAst:xm,emStrongLDelim:vm,url:xe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Nm={...jo,br:xe(zu).replace("{2,}","*").getRegex(),text:xe(jo.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Pr={normal:Ca,gfm:um,pedantic:hm},Fs={normal:Ma,gfm:jo,breaks:Nm,pedantic:Mm},Om={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vc=n=>Om[n];function Ht(n,e){if(e){if(_t.escapeTest.test(n))return n.replace(_t.escapeReplace,Vc)}else if(_t.escapeTestNoEncode.test(n))return n.replace(_t.escapeReplaceNoEncode,Vc);return n}function qc(n){try{n=encodeURI(n).replace(_t.percentDecode,"%")}catch{return null}return n}function $c(n,e){var i;const t=n.replace(_t.findPipe,(o,a,c)=>{let l=!1,u=a;for(;--u>=0&&c[u]==="\\";)l=!l;return l?"|":" |"}),s=t.split(_t.splitPipe);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!((i=s.at(-1))!=null&&i.trim())&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(_t.slashPipe,"|");return s}function Bs(n,e,t){const s=n.length;if(s===0)return"";let r=0;for(;r<s&&n.charAt(s-r-1)===e;)r++;return n.slice(0,s-r)}function Rm(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function Wc(n,e,t,s,r){const i=e.href,o=e.title||null,a=n[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;const c={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:o,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,c}function Dm(n,e,t){const s=n.match(t.other.indentCodeCompensation);if(s===null)return e;const r=s[1];return e.split(`
`).map(i=>{const o=i.match(t.other.beginningSpace);if(o===null)return i;const[a]=o;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}class hi{constructor(e){le(this,"options");le(this,"rules");le(this,"lexer");this.options=e||es}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const s=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Bs(s,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const s=t[0],r=Dm(s,t[3]||"",this.rules);return{type:"code",raw:s,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let s=t[2].trim();if(this.rules.other.endingHash.test(s)){const r=Bs(s,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(s=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Bs(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let s=Bs(t[0],`
`).split(`
`),r="",i="";const o=[];for(;s.length>0;){let a=!1;const c=[];let l;for(l=0;l<s.length;l++)if(this.rules.other.blockquoteStart.test(s[l]))c.push(s[l]),a=!0;else if(!a)c.push(s[l]);else break;s=s.slice(l);const u=c.join(`
`),h=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,i=i?`${i}
${h}`:h;const m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,o,!0),this.lexer.state.top=m,s.length===0)break;const p=o.at(-1);if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){const g=p,y=g.raw+`
`+s.join(`
`),w=this.blockquote(y);o[o.length-1]=w,r=r.substring(0,r.length-g.raw.length)+w.raw,i=i.substring(0,i.length-g.text.length)+w.text;break}else if((p==null?void 0:p.type)==="list"){const g=p,y=g.raw+`
`+s.join(`
`),w=this.list(y);o[o.length-1]=w,r=r.substring(0,r.length-p.raw.length)+w.raw,i=i.substring(0,i.length-g.raw.length)+w.raw,s=y.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let s=t[1].trim();const r=s.length>1,i={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const o=this.rules.other.listItemRegex(s);let a=!1;for(;e;){let l=!1,u="",h="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let m=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,M=>" ".repeat(3*M.length)),p=e.split(`
`,1)[0],g=!m.trim(),y=0;if(this.options.pedantic?(y=2,h=m.trimStart()):g?y=t[1].length+1:(y=t[2].search(this.rules.other.nonSpaceChar),y=y>4?1:y,h=m.slice(y),y+=t[1].length),g&&this.rules.other.blankLine.test(p)&&(u+=p+`
`,e=e.substring(p.length+1),l=!0),!l){const M=this.rules.other.nextBulletRegex(y),P=this.rules.other.hrRegex(y),S=this.rules.other.fencesBeginRegex(y),b=this.rules.other.headingBeginRegex(y),I=this.rules.other.htmlBeginRegex(y);for(;e;){const C=e.split(`
`,1)[0];let T;if(p=C,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),T=p):T=p.replace(this.rules.other.tabCharGlobal,"    "),S.test(p)||b.test(p)||I.test(p)||M.test(p)||P.test(p))break;if(T.search(this.rules.other.nonSpaceChar)>=y||!p.trim())h+=`
`+T.slice(y);else{if(g||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(m)||b.test(m)||P.test(m))break;h+=`
`+p}!g&&!p.trim()&&(g=!0),u+=C+`
`,e=e.substring(C.length+1),m=T.slice(y)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let w=null,x;this.options.gfm&&(w=this.rules.other.listIsTask.exec(h),w&&(x=w[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:u,task:!!w,checked:x,loose:!1,text:h,tokens:[]}),i.raw+=u}const c=i.items.at(-1);if(c)c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){const u=i.items[l].tokens.filter(m=>m.type==="space"),h=u.length>0&&u.some(m=>this.rules.other.anyLine.test(m.raw));i.loose=h}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const s=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:s,raw:t[0],href:r,title:i}}}table(e){var a;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const s=$c(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const c of r)this.rules.other.tableAlignRight.test(c)?o.align.push("right"):this.rules.other.tableAlignCenter.test(c)?o.align.push("center"):this.rules.other.tableAlignLeft.test(c)?o.align.push("left"):o.align.push(null);for(let c=0;c<s.length;c++)o.header.push({text:s[c],tokens:this.lexer.inline(s[c]),header:!0,align:o.align[c]});for(const c of i)o.rows.push($c(c,o.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[u]})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const s=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const s=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;const o=Bs(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=Rm(t[2],"()");if(o===-2)return;if(o>-1){const c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?r=r.slice(1):r=r.slice(1,-1)),Wc(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){const r=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[r.toLowerCase()];if(!i){const o=s[0].charAt(0);return{type:"text",raw:o,text:o}}return Wc(s,i,s[0],this.lexer,this.rules)}}emStrong(e,t,s=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&s.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const o=[...r[0]].length-1;let a,c,l=o,u=0;const h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(r=h.exec(t))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=[...a].length,r[3]||r[4]){l+=c;continue}else if((r[5]||r[6])&&o%3&&!((o+c)%3)){u+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+u);const m=[...r[0]][0].length,p=e.slice(0,o+r.index+m+c);if(Math.min(o,c)%2){const y=p.slice(1,-1);return{type:"em",raw:p,text:y,tokens:this.lexer.inlineTokens(y)}}const g=p.slice(2,-2);return{type:"strong",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let s=t[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(s),i=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return r&&i&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:t[0],text:s}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let s,r;return t[2]==="@"?(s=t[1],r="mailto:"+s):(s=t[1],r=s),{type:"link",raw:t[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(e){var s;let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=t[0],i="mailto:"+r;else{let o;do o=t[0],t[0]=((s=this.rules.inline._backpedal.exec(t[0]))==null?void 0:s[0])??"";while(o!==t[0]);r=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const s=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:s}}}}class Mt{constructor(e){le(this,"tokens");le(this,"options");le(this,"state");le(this,"tokenizer");le(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||es,this.options.tokenizer=this.options.tokenizer||new hi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:_t,block:Pr.normal,inline:Fs.normal};this.options.pedantic?(t.block=Pr.pedantic,t.inline=Fs.pedantic):this.options.gfm&&(t.block=Pr.gfm,this.options.breaks?t.inline=Fs.breaks:t.inline=Fs.gfm),this.tokenizer.rules=t}static get rules(){return{block:Pr,inline:Fs}}static lex(e,t){return new Mt(t).lex(e)}static lexInline(e,t){return new Mt(t).inlineTokens(e)}lex(e){e=e.replace(_t.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){var r,i,o;for(this.options.pedantic&&(e=e.replace(_t.tabCharGlobal,"    ").replace(_t.spaceLine,""));e;){let a;if((i=(r=this.options.extensions)==null?void 0:r.block)!=null&&i.some(l=>(a=l.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const l=t.at(-1);a.raw.length===1&&l!==void 0?l.raw+=`
`:t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.at(-1).src=l.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let c=e;if((o=this.options.extensions)!=null&&o.startBlock){let l=1/0;const u=e.slice(1);let h;this.options.extensions.startBlock.forEach(m=>{h=m.call({lexer:this},u),typeof h=="number"&&h>=0&&(l=Math.min(l,h))}),l<1/0&&l>=0&&(c=e.substring(0,l+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){const l=t.at(-1);s&&(l==null?void 0:l.type)==="paragraph"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(a),s=c.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const l=t.at(-1);(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):t.push(a);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var a,c,l;let s=e,r=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let u;if((c=(a=this.options.extensions)==null?void 0:a.inline)!=null&&c.some(m=>(u=m.call({lexer:this},e,t))?(e=e.substring(u.raw.length),t.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);const m=t.at(-1);u.type==="text"&&(m==null?void 0:m.type)==="text"?(m.raw+=u.raw,m.text+=u.text):t.push(u);continue}if(u=this.tokenizer.emStrong(e,s,o)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),t.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),t.push(u);continue}let h=e;if((l=this.options.extensions)!=null&&l.startInline){let m=1/0;const p=e.slice(1);let g;this.options.extensions.startInline.forEach(y=>{g=y.call({lexer:this},p),typeof g=="number"&&g>=0&&(m=Math.min(m,g))}),m<1/0&&m>=0&&(h=e.substring(0,m+1))}if(u=this.tokenizer.inlineText(h)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),i=!0;const m=t.at(-1);(m==null?void 0:m.type)==="text"?(m.raw+=u.raw,m.text+=u.text):t.push(u);continue}if(e){const m="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return t}}class fi{constructor(e){le(this,"options");le(this,"parser");this.options=e||es}space(e){return""}code({text:e,lang:t,escaped:s}){var o;const r=(o=(t||"").match(_t.notSpaceStart))==null?void 0:o[0],i=e.replace(_t.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Ht(r)+'">'+(s?i:Ht(i,!0))+`</code></pre>
`:"<pre><code>"+(s?i:Ht(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,s=e.start;let r="";for(let a=0;a<e.items.length;a++){const c=e.items[a];r+=this.listitem(c)}const i=t?"ol":"ul",o=t&&s!==1?' start="'+s+'"':"";return"<"+i+o+`>
`+r+"</"+i+`>
`}listitem(e){var s;let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?((s=e.tokens[0])==null?void 0:s.type)==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+Ht(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",s="";for(let i=0;i<e.header.length;i++)s+=this.tablecell(e.header[i]);t+=this.tablerow({text:s});let r="";for(let i=0;i<e.rows.length;i++){const o=e.rows[i];s="";for(let a=0;a<o.length;a++)s+=this.tablecell(o[a]);r+=this.tablerow({text:s})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),s=e.header?"th":"td";return(e.align?`<${s} align="${e.align}">`:`<${s}>`)+t+`</${s}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Ht(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:s}){const r=this.parser.parseInline(s),i=qc(e);if(i===null)return r;e=i;let o='<a href="'+e+'"';return t&&(o+=' title="'+Ht(t)+'"'),o+=">"+r+"</a>",o}image({href:e,title:t,text:s,tokens:r}){r&&(s=this.parser.parseInline(r,this.parser.textRenderer));const i=qc(e);if(i===null)return Ht(s);e=i;let o=`<img src="${e}" alt="${s}"`;return t&&(o+=` title="${Ht(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Ht(e.text)}}class Na{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Nt{constructor(e){le(this,"options");le(this,"renderer");le(this,"textRenderer");this.options=e||es,this.options.renderer=this.options.renderer||new fi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Na}static parse(e,t){return new Nt(t).parse(e)}static parseInline(e,t){return new Nt(t).parseInline(e)}parse(e,t=!0){var r,i;let s="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&i[a.type]){const l=a,u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){s+=u||"";continue}}const c=a;switch(c.type){case"space":{s+=this.renderer.space(c);continue}case"hr":{s+=this.renderer.hr(c);continue}case"heading":{s+=this.renderer.heading(c);continue}case"code":{s+=this.renderer.code(c);continue}case"table":{s+=this.renderer.table(c);continue}case"blockquote":{s+=this.renderer.blockquote(c);continue}case"list":{s+=this.renderer.list(c);continue}case"html":{s+=this.renderer.html(c);continue}case"paragraph":{s+=this.renderer.paragraph(c);continue}case"text":{let l=c,u=this.renderer.text(l);for(;o+1<e.length&&e[o+1].type==="text";)l=e[++o],u+=`
`+this.renderer.text(l);t?s+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):s+=u;continue}default:{const l='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}parseInline(e,t=this.renderer){var r,i;let s="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&i[a.type]){const l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=l||"";continue}}const c=a;switch(c.type){case"escape":{s+=t.text(c);break}case"html":{s+=t.html(c);break}case"link":{s+=t.link(c);break}case"image":{s+=t.image(c);break}case"strong":{s+=t.strong(c);break}case"em":{s+=t.em(c);break}case"codespan":{s+=t.codespan(c);break}case"br":{s+=t.br(c);break}case"del":{s+=t.del(c);break}case"text":{s+=t.text(c);break}default:{const l='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}}class Zs{constructor(e){le(this,"options");le(this,"block");this.options=e||es}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Mt.lex:Mt.lexInline}provideParser(){return this.block?Nt.parse:Nt.parseInline}}le(Zs,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Pm{constructor(...e){le(this,"defaults",Ta());le(this,"options",this.setOptions);le(this,"parse",this.parseMarkdown(!0));le(this,"parseInline",this.parseMarkdown(!1));le(this,"Parser",Nt);le(this,"Renderer",fi);le(this,"TextRenderer",Na);le(this,"Lexer",Mt);le(this,"Tokenizer",hi);le(this,"Hooks",Zs);this.use(...e)}walkTokens(e,t){var r,i;let s=[];for(const o of e)switch(s=s.concat(t.call(this,o)),o.type){case"table":{const a=o;for(const c of a.header)s=s.concat(this.walkTokens(c.tokens,t));for(const c of a.rows)for(const l of c)s=s.concat(this.walkTokens(l.tokens,t));break}case"list":{const a=o;s=s.concat(this.walkTokens(a.items,t));break}default:{const a=o;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(c=>{const l=a[c].flat(1/0);s=s.concat(this.walkTokens(l,t))}):a.tokens&&(s=s.concat(this.walkTokens(a.tokens,t)))}}return s}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=t.renderers[i.name];o?t.renderers[i.name]=function(...a){let c=i.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),s.renderer){const i=this.defaults.renderer||new fi(this.defaults);for(const o in s.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,c=s.renderer[a],l=i[a];i[a]=(...u)=>{let h=c.apply(i,u);return h===!1&&(h=l.apply(i,u)),h||""}}r.renderer=i}if(s.tokenizer){const i=this.defaults.tokenizer||new hi(this.defaults);for(const o in s.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,c=s.tokenizer[a],l=i[a];i[a]=(...u)=>{let h=c.apply(i,u);return h===!1&&(h=l.apply(i,u)),h}}r.tokenizer=i}if(s.hooks){const i=this.defaults.hooks||new Zs;for(const o in s.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const a=o,c=s.hooks[a],l=i[a];Zs.passThroughHooks.has(o)?i[a]=u=>{if(this.defaults.async)return Promise.resolve(c.call(i,u)).then(m=>l.call(i,m));const h=c.call(i,u);return l.call(i,h)}:i[a]=(...u)=>{let h=c.apply(i,u);return h===!1&&(h=l.apply(i,u)),h}}r.hooks=i}if(s.walkTokens){const i=this.defaults.walkTokens,o=s.walkTokens;r.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),i&&(c=c.concat(i.call(this,a))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Mt.lex(e,t??this.defaults)}parser(e,t){return Nt.parse(e,t??this.defaults)}parseMarkdown(e){return(s,r)=>{const i={...r},o={...this.defaults,...i},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const c=o.hooks?o.hooks.provideLexer():e?Mt.lex:Mt.lexInline,l=o.hooks?o.hooks.provideParser():e?Nt.parse:Nt.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(s):s).then(u=>c(u,o)).then(u=>o.hooks?o.hooks.processAllTokens(u):u).then(u=>o.walkTokens?Promise.all(this.walkTokens(u,o.walkTokens)).then(()=>u):u).then(u=>l(u,o)).then(u=>o.hooks?o.hooks.postprocess(u):u).catch(a);try{o.hooks&&(s=o.hooks.preprocess(s));let u=c(s,o);o.hooks&&(u=o.hooks.processAllTokens(u)),o.walkTokens&&this.walkTokens(u,o.walkTokens);let h=l(u,o);return o.hooks&&(h=o.hooks.postprocess(h)),h}catch(u){return a(u)}}}onError(e,t){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+Ht(s.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(s);throw s}}}const Gn=new Pm;function Te(n,e){return Gn.parse(n,e)}Te.options=Te.setOptions=function(n){return Gn.setOptions(n),Te.defaults=Gn.defaults,Wu(Te.defaults),Te};Te.getDefaults=Ta;Te.defaults=es;Te.use=function(...n){return Gn.use(...n),Te.defaults=Gn.defaults,Wu(Te.defaults),Te};Te.walkTokens=function(n,e){return Gn.walkTokens(n,e)};Te.parseInline=Gn.parseInline;Te.Parser=Nt;Te.parser=Nt.parse;Te.Renderer=fi;Te.TextRenderer=Na;Te.Lexer=Mt;Te.lexer=Mt.lex;Te.Tokenizer=hi;Te.Hooks=Zs;Te.parse=Te;Te.options;Te.setOptions;Te.use;Te.walkTokens;Te.parseInline;Nt.parse;Mt.lex;function Fm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xo={},Ls={},jc;function Bm(){if(jc)return Ls;jc=1,Ls.byteLength=a,Ls.toByteArray=l,Ls.fromByteArray=m;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,i=s.length;r<i;++r)n[r]=s[r],e[s.charCodeAt(r)]=r;e[45]=62,e[95]=63;function o(p){var g=p.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=p.indexOf("=");y===-1&&(y=g);var w=y===g?0:4-y%4;return[y,w]}function a(p){var g=o(p),y=g[0],w=g[1];return(y+w)*3/4-w}function c(p,g,y){return(g+y)*3/4-y}function l(p){var g,y=o(p),w=y[0],x=y[1],M=new t(c(p,w,x)),P=0,S=x>0?w-4:w,b;for(b=0;b<S;b+=4)g=e[p.charCodeAt(b)]<<18|e[p.charCodeAt(b+1)]<<12|e[p.charCodeAt(b+2)]<<6|e[p.charCodeAt(b+3)],M[P++]=g>>16&255,M[P++]=g>>8&255,M[P++]=g&255;return x===2&&(g=e[p.charCodeAt(b)]<<2|e[p.charCodeAt(b+1)]>>4,M[P++]=g&255),x===1&&(g=e[p.charCodeAt(b)]<<10|e[p.charCodeAt(b+1)]<<4|e[p.charCodeAt(b+2)]>>2,M[P++]=g>>8&255,M[P++]=g&255),M}function u(p){return n[p>>18&63]+n[p>>12&63]+n[p>>6&63]+n[p&63]}function h(p,g,y){for(var w,x=[],M=g;M<y;M+=3)w=(p[M]<<16&16711680)+(p[M+1]<<8&65280)+(p[M+2]&255),x.push(u(w));return x.join("")}function m(p){for(var g,y=p.length,w=y%3,x=[],M=16383,P=0,S=y-w;P<S;P+=M)x.push(h(p,P,P+M>S?S:P+M));return w===1?(g=p[y-1],x.push(n[g>>2]+n[g<<4&63]+"==")):w===2&&(g=(p[y-2]<<8)+p[y-1],x.push(n[g>>10]+n[g>>4&63]+n[g<<2&63]+"=")),x.join("")}return Ls}var Fr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Gc;function Lm(){return Gc||(Gc=1,Fr.read=function(n,e,t,s,r){var i,o,a=r*8-s-1,c=(1<<a)-1,l=c>>1,u=-7,h=t?r-1:0,m=t?-1:1,p=n[e+h];for(h+=m,i=p&(1<<-u)-1,p>>=-u,u+=a;u>0;i=i*256+n[e+h],h+=m,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=s;u>0;o=o*256+n[e+h],h+=m,u-=8);if(i===0)i=1-l;else{if(i===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,s),i=i-l}return(p?-1:1)*o*Math.pow(2,i-s)},Fr.write=function(n,e,t,s,r,i){var o,a,c,l=i*8-r-1,u=(1<<l)-1,h=u>>1,m=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=s?0:i-1,g=s?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=m/c:e+=m*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*c-1)*Math.pow(2,r),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;n[t+p]=a&255,p+=g,a/=256,r-=8);for(o=o<<r|a,l+=r;l>0;n[t+p]=o&255,p+=g,o/=256,l-=8);n[t+p-g]|=y*128}),Fr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Hc;function Um(){return Hc||(Hc=1,function(n){const e=Bm(),t=Lm(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=M,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const _=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(_,f),_.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(_){if(_>r)throw new RangeError('The value "'+_+'" is invalid for option "size"');const f=new Uint8Array(_);return Object.setPrototypeOf(f,a.prototype),f}function a(_,f,d){if(typeof _=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(_)}return c(_,f,d)}a.poolSize=8192;function c(_,f,d){if(typeof _=="string")return m(_,f);if(ArrayBuffer.isView(_))return g(_);if(_==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _);if(Y(_,ArrayBuffer)||_&&Y(_.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Y(_,SharedArrayBuffer)||_&&Y(_.buffer,SharedArrayBuffer)))return y(_,f,d);if(typeof _=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const v=_.valueOf&&_.valueOf();if(v!=null&&v!==_)return a.from(v,f,d);const k=w(_);if(k)return k;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _[Symbol.toPrimitive]=="function")return a.from(_[Symbol.toPrimitive]("string"),f,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _)}a.from=function(_,f,d){return c(_,f,d)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(_){if(typeof _!="number")throw new TypeError('"size" argument must be of type number');if(_<0)throw new RangeError('The value "'+_+'" is invalid for option "size"')}function u(_,f,d){return l(_),_<=0?o(_):f!==void 0?typeof d=="string"?o(_).fill(f,d):o(_).fill(f):o(_)}a.alloc=function(_,f,d){return u(_,f,d)};function h(_){return l(_),o(_<0?0:x(_)|0)}a.allocUnsafe=function(_){return h(_)},a.allocUnsafeSlow=function(_){return h(_)};function m(_,f){if((typeof f!="string"||f==="")&&(f="utf8"),!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const d=P(_,f)|0;let v=o(d);const k=v.write(_,f);return k!==d&&(v=v.slice(0,k)),v}function p(_){const f=_.length<0?0:x(_.length)|0,d=o(f);for(let v=0;v<f;v+=1)d[v]=_[v]&255;return d}function g(_){if(Y(_,Uint8Array)){const f=new Uint8Array(_);return y(f.buffer,f.byteOffset,f.byteLength)}return p(_)}function y(_,f,d){if(f<0||_.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(_.byteLength<f+(d||0))throw new RangeError('"length" is outside of buffer bounds');let v;return f===void 0&&d===void 0?v=new Uint8Array(_):d===void 0?v=new Uint8Array(_,f):v=new Uint8Array(_,f,d),Object.setPrototypeOf(v,a.prototype),v}function w(_){if(a.isBuffer(_)){const f=x(_.length)|0,d=o(f);return d.length===0||_.copy(d,0,0,f),d}if(_.length!==void 0)return typeof _.length!="number"||z(_.length)?o(0):p(_);if(_.type==="Buffer"&&Array.isArray(_.data))return p(_.data)}function x(_){if(_>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return _|0}function M(_){return+_!=_&&(_=0),a.alloc(+_)}a.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==a.prototype},a.compare=function(f,d){if(Y(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),Y(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(f)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===d)return 0;let v=f.length,k=d.length;for(let R=0,j=Math.min(v,k);R<j;++R)if(f[R]!==d[R]){v=f[R],k=d[R];break}return v<k?-1:k<v?1:0},a.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(f,d){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return a.alloc(0);let v;if(d===void 0)for(d=0,v=0;v<f.length;++v)d+=f[v].length;const k=a.allocUnsafe(d);let R=0;for(v=0;v<f.length;++v){let j=f[v];if(Y(j,Uint8Array))R+j.length>k.length?(a.isBuffer(j)||(j=a.from(j)),j.copy(k,R)):Uint8Array.prototype.set.call(k,j,R);else if(a.isBuffer(j))j.copy(k,R);else throw new TypeError('"list" argument must be an Array of Buffers');R+=j.length}return k};function P(_,f){if(a.isBuffer(_))return _.length;if(ArrayBuffer.isView(_)||Y(_,ArrayBuffer))return _.byteLength;if(typeof _!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _);const d=_.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&d===0)return 0;let k=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return G(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return U(_).length;default:if(k)return v?-1:G(_).length;f=(""+f).toLowerCase(),k=!0}}a.byteLength=P;function S(_,f,d){let v=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,f>>>=0,d<=f))return"";for(_||(_="utf8");;)switch(_){case"hex":return re(this,f,d);case"utf8":case"utf-8":return X(this,f,d);case"ascii":return H(this,f,d);case"latin1":case"binary":return ee(this,f,d);case"base64":return K(this,f,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,f,d);default:if(v)throw new TypeError("Unknown encoding: "+_);_=(_+"").toLowerCase(),v=!0}}a.prototype._isBuffer=!0;function b(_,f,d){const v=_[f];_[f]=_[d],_[d]=v}a.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<f;d+=2)b(this,d,d+1);return this},a.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<f;d+=4)b(this,d,d+3),b(this,d+1,d+2);return this},a.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<f;d+=8)b(this,d,d+7),b(this,d+1,d+6),b(this,d+2,d+5),b(this,d+3,d+4);return this},a.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?X(this,0,f):S.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:a.compare(this,f)===0},a.prototype.inspect=function(){let f="";const d=n.INSPECT_MAX_BYTES;return f=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(f+=" ... "),"<Buffer "+f+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(f,d,v,k,R){if(Y(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(d===void 0&&(d=0),v===void 0&&(v=f?f.length:0),k===void 0&&(k=0),R===void 0&&(R=this.length),d<0||v>f.length||k<0||R>this.length)throw new RangeError("out of range index");if(k>=R&&d>=v)return 0;if(k>=R)return-1;if(d>=v)return 1;if(d>>>=0,v>>>=0,k>>>=0,R>>>=0,this===f)return 0;let j=R-k,fe=v-d;const ge=Math.min(j,fe),be=this.slice(k,R),Oe=f.slice(d,v);for(let Ee=0;Ee<ge;++Ee)if(be[Ee]!==Oe[Ee]){j=be[Ee],fe=Oe[Ee];break}return j<fe?-1:fe<j?1:0};function I(_,f,d,v,k){if(_.length===0)return-1;if(typeof d=="string"?(v=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,z(d)&&(d=k?0:_.length-1),d<0&&(d=_.length+d),d>=_.length){if(k)return-1;d=_.length-1}else if(d<0)if(k)d=0;else return-1;if(typeof f=="string"&&(f=a.from(f,v)),a.isBuffer(f))return f.length===0?-1:C(_,f,d,v,k);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?k?Uint8Array.prototype.indexOf.call(_,f,d):Uint8Array.prototype.lastIndexOf.call(_,f,d):C(_,[f],d,v,k);throw new TypeError("val must be string, number or Buffer")}function C(_,f,d,v,k){let R=1,j=_.length,fe=f.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(_.length<2||f.length<2)return-1;R=2,j/=2,fe/=2,d/=2}function ge(Oe,Ee){return R===1?Oe[Ee]:Oe.readUInt16BE(Ee*R)}let be;if(k){let Oe=-1;for(be=d;be<j;be++)if(ge(_,be)===ge(f,Oe===-1?0:be-Oe)){if(Oe===-1&&(Oe=be),be-Oe+1===fe)return Oe*R}else Oe!==-1&&(be-=be-Oe),Oe=-1}else for(d+fe>j&&(d=j-fe),be=d;be>=0;be--){let Oe=!0;for(let Ee=0;Ee<fe;Ee++)if(ge(_,be+Ee)!==ge(f,Ee)){Oe=!1;break}if(Oe)return be}return-1}a.prototype.includes=function(f,d,v){return this.indexOf(f,d,v)!==-1},a.prototype.indexOf=function(f,d,v){return I(this,f,d,v,!0)},a.prototype.lastIndexOf=function(f,d,v){return I(this,f,d,v,!1)};function T(_,f,d,v){d=Number(d)||0;const k=_.length-d;v?(v=Number(v),v>k&&(v=k)):v=k;const R=f.length;v>R/2&&(v=R/2);let j;for(j=0;j<v;++j){const fe=parseInt(f.substr(j*2,2),16);if(z(fe))return j;_[d+j]=fe}return j}function B(_,f,d,v){return $(G(f,_.length-d),_,d,v)}function F(_,f,d,v){return $(O(f),_,d,v)}function V(_,f,d,v){return $(U(f),_,d,v)}function W(_,f,d,v){return $(N(f,_.length-d),_,d,v)}a.prototype.write=function(f,d,v,k){if(d===void 0)k="utf8",v=this.length,d=0;else if(v===void 0&&typeof d=="string")k=d,v=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(v)?(v=v>>>0,k===void 0&&(k="utf8")):(k=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const R=this.length-d;if((v===void 0||v>R)&&(v=R),f.length>0&&(v<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let j=!1;for(;;)switch(k){case"hex":return T(this,f,d,v);case"utf8":case"utf-8":return B(this,f,d,v);case"ascii":case"latin1":case"binary":return F(this,f,d,v);case"base64":return V(this,f,d,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,f,d,v);default:if(j)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),j=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K(_,f,d){return f===0&&d===_.length?e.fromByteArray(_):e.fromByteArray(_.slice(f,d))}function X(_,f,d){d=Math.min(_.length,d);const v=[];let k=f;for(;k<d;){const R=_[k];let j=null,fe=R>239?4:R>223?3:R>191?2:1;if(k+fe<=d){let ge,be,Oe,Ee;switch(fe){case 1:R<128&&(j=R);break;case 2:ge=_[k+1],(ge&192)===128&&(Ee=(R&31)<<6|ge&63,Ee>127&&(j=Ee));break;case 3:ge=_[k+1],be=_[k+2],(ge&192)===128&&(be&192)===128&&(Ee=(R&15)<<12|(ge&63)<<6|be&63,Ee>2047&&(Ee<55296||Ee>57343)&&(j=Ee));break;case 4:ge=_[k+1],be=_[k+2],Oe=_[k+3],(ge&192)===128&&(be&192)===128&&(Oe&192)===128&&(Ee=(R&15)<<18|(ge&63)<<12|(be&63)<<6|Oe&63,Ee>65535&&Ee<1114112&&(j=Ee))}}j===null?(j=65533,fe=1):j>65535&&(j-=65536,v.push(j>>>10&1023|55296),j=56320|j&1023),v.push(j),k+=fe}return Z(v)}const te=4096;function Z(_){const f=_.length;if(f<=te)return String.fromCharCode.apply(String,_);let d="",v=0;for(;v<f;)d+=String.fromCharCode.apply(String,_.slice(v,v+=te));return d}function H(_,f,d){let v="";d=Math.min(_.length,d);for(let k=f;k<d;++k)v+=String.fromCharCode(_[k]&127);return v}function ee(_,f,d){let v="";d=Math.min(_.length,d);for(let k=f;k<d;++k)v+=String.fromCharCode(_[k]);return v}function re(_,f,d){const v=_.length;(!f||f<0)&&(f=0),(!d||d<0||d>v)&&(d=v);let k="";for(let R=f;R<d;++R)k+=ne[_[R]];return k}function oe(_,f,d){const v=_.slice(f,d);let k="";for(let R=0;R<v.length-1;R+=2)k+=String.fromCharCode(v[R]+v[R+1]*256);return k}a.prototype.slice=function(f,d){const v=this.length;f=~~f,d=d===void 0?v:~~d,f<0?(f+=v,f<0&&(f=0)):f>v&&(f=v),d<0?(d+=v,d<0&&(d=0)):d>v&&(d=v),d<f&&(d=f);const k=this.subarray(f,d);return Object.setPrototypeOf(k,a.prototype),k};function Q(_,f,d){if(_%1!==0||_<0)throw new RangeError("offset is not uint");if(_+f>d)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(f,d,v){f=f>>>0,d=d>>>0,v||Q(f,d,this.length);let k=this[f],R=1,j=0;for(;++j<d&&(R*=256);)k+=this[f+j]*R;return k},a.prototype.readUintBE=a.prototype.readUIntBE=function(f,d,v){f=f>>>0,d=d>>>0,v||Q(f,d,this.length);let k=this[f+--d],R=1;for(;d>0&&(R*=256);)k+=this[f+--d]*R;return k},a.prototype.readUint8=a.prototype.readUInt8=function(f,d){return f=f>>>0,d||Q(f,1,this.length),this[f]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(f,d){return f=f>>>0,d||Q(f,2,this.length),this[f]|this[f+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(f,d){return f=f>>>0,d||Q(f,2,this.length),this[f]<<8|this[f+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(f,d){return f=f>>>0,d||Q(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(f,d){return f=f>>>0,d||Q(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},a.prototype.readBigUInt64LE=ie(function(f){f=f>>>0,A(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&q(f,this.length-8);const k=d+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,R=this[++f]+this[++f]*2**8+this[++f]*2**16+v*2**24;return BigInt(k)+(BigInt(R)<<BigInt(32))}),a.prototype.readBigUInt64BE=ie(function(f){f=f>>>0,A(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&q(f,this.length-8);const k=d*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],R=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+v;return(BigInt(k)<<BigInt(32))+BigInt(R)}),a.prototype.readIntLE=function(f,d,v){f=f>>>0,d=d>>>0,v||Q(f,d,this.length);let k=this[f],R=1,j=0;for(;++j<d&&(R*=256);)k+=this[f+j]*R;return R*=128,k>=R&&(k-=Math.pow(2,8*d)),k},a.prototype.readIntBE=function(f,d,v){f=f>>>0,d=d>>>0,v||Q(f,d,this.length);let k=d,R=1,j=this[f+--k];for(;k>0&&(R*=256);)j+=this[f+--k]*R;return R*=128,j>=R&&(j-=Math.pow(2,8*d)),j},a.prototype.readInt8=function(f,d){return f=f>>>0,d||Q(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},a.prototype.readInt16LE=function(f,d){f=f>>>0,d||Q(f,2,this.length);const v=this[f]|this[f+1]<<8;return v&32768?v|4294901760:v},a.prototype.readInt16BE=function(f,d){f=f>>>0,d||Q(f,2,this.length);const v=this[f+1]|this[f]<<8;return v&32768?v|4294901760:v},a.prototype.readInt32LE=function(f,d){return f=f>>>0,d||Q(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},a.prototype.readInt32BE=function(f,d){return f=f>>>0,d||Q(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},a.prototype.readBigInt64LE=ie(function(f){f=f>>>0,A(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&q(f,this.length-8);const k=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(v<<24);return(BigInt(k)<<BigInt(32))+BigInt(d+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),a.prototype.readBigInt64BE=ie(function(f){f=f>>>0,A(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&q(f,this.length-8);const k=(d<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(k)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+v)}),a.prototype.readFloatLE=function(f,d){return f=f>>>0,d||Q(f,4,this.length),t.read(this,f,!0,23,4)},a.prototype.readFloatBE=function(f,d){return f=f>>>0,d||Q(f,4,this.length),t.read(this,f,!1,23,4)},a.prototype.readDoubleLE=function(f,d){return f=f>>>0,d||Q(f,8,this.length),t.read(this,f,!0,52,8)},a.prototype.readDoubleBE=function(f,d){return f=f>>>0,d||Q(f,8,this.length),t.read(this,f,!1,52,8)};function ae(_,f,d,v,k,R){if(!a.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>k||f<R)throw new RangeError('"value" argument is out of bounds');if(d+v>_.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(f,d,v,k){if(f=+f,d=d>>>0,v=v>>>0,!k){const fe=Math.pow(2,8*v)-1;ae(this,f,d,v,fe,0)}let R=1,j=0;for(this[d]=f&255;++j<v&&(R*=256);)this[d+j]=f/R&255;return d+v},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(f,d,v,k){if(f=+f,d=d>>>0,v=v>>>0,!k){const fe=Math.pow(2,8*v)-1;ae(this,f,d,v,fe,0)}let R=v-1,j=1;for(this[d+R]=f&255;--R>=0&&(j*=256);)this[d+R]=f/j&255;return d+v},a.prototype.writeUint8=a.prototype.writeUInt8=function(f,d,v){return f=+f,d=d>>>0,v||ae(this,f,d,1,255,0),this[d]=f&255,d+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(f,d,v){return f=+f,d=d>>>0,v||ae(this,f,d,2,65535,0),this[d]=f&255,this[d+1]=f>>>8,d+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(f,d,v){return f=+f,d=d>>>0,v||ae(this,f,d,2,65535,0),this[d]=f>>>8,this[d+1]=f&255,d+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(f,d,v){return f=+f,d=d>>>0,v||ae(this,f,d,4,4294967295,0),this[d+3]=f>>>24,this[d+2]=f>>>16,this[d+1]=f>>>8,this[d]=f&255,d+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(f,d,v){return f=+f,d=d>>>0,v||ae(this,f,d,4,4294967295,0),this[d]=f>>>24,this[d+1]=f>>>16,this[d+2]=f>>>8,this[d+3]=f&255,d+4};function qe(_,f,d,v,k){E(f,v,k,_,d,7);let R=Number(f&BigInt(4294967295));_[d++]=R,R=R>>8,_[d++]=R,R=R>>8,_[d++]=R,R=R>>8,_[d++]=R;let j=Number(f>>BigInt(32)&BigInt(4294967295));return _[d++]=j,j=j>>8,_[d++]=j,j=j>>8,_[d++]=j,j=j>>8,_[d++]=j,d}function Ye(_,f,d,v,k){E(f,v,k,_,d,7);let R=Number(f&BigInt(4294967295));_[d+7]=R,R=R>>8,_[d+6]=R,R=R>>8,_[d+5]=R,R=R>>8,_[d+4]=R;let j=Number(f>>BigInt(32)&BigInt(4294967295));return _[d+3]=j,j=j>>8,_[d+2]=j,j=j>>8,_[d+1]=j,j=j>>8,_[d]=j,d+8}a.prototype.writeBigUInt64LE=ie(function(f,d=0){return qe(this,f,d,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ie(function(f,d=0){return Ye(this,f,d,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(f,d,v,k){if(f=+f,d=d>>>0,!k){const ge=Math.pow(2,8*v-1);ae(this,f,d,v,ge-1,-ge)}let R=0,j=1,fe=0;for(this[d]=f&255;++R<v&&(j*=256);)f<0&&fe===0&&this[d+R-1]!==0&&(fe=1),this[d+R]=(f/j>>0)-fe&255;return d+v},a.prototype.writeIntBE=function(f,d,v,k){if(f=+f,d=d>>>0,!k){const ge=Math.pow(2,8*v-1);ae(this,f,d,v,ge-1,-ge)}let R=v-1,j=1,fe=0;for(this[d+R]=f&255;--R>=0&&(j*=256);)f<0&&fe===0&&this[d+R+1]!==0&&(fe=1),this[d+R]=(f/j>>0)-fe&255;return d+v},a.prototype.writeInt8=function(f,d,v){return f=+f,d=d>>>0,v||ae(this,f,d,1,127,-128),f<0&&(f=255+f+1),this[d]=f&255,d+1},a.prototype.writeInt16LE=function(f,d,v){return f=+f,d=d>>>0,v||ae(this,f,d,2,32767,-32768),this[d]=f&255,this[d+1]=f>>>8,d+2},a.prototype.writeInt16BE=function(f,d,v){return f=+f,d=d>>>0,v||ae(this,f,d,2,32767,-32768),this[d]=f>>>8,this[d+1]=f&255,d+2},a.prototype.writeInt32LE=function(f,d,v){return f=+f,d=d>>>0,v||ae(this,f,d,4,2147483647,-2147483648),this[d]=f&255,this[d+1]=f>>>8,this[d+2]=f>>>16,this[d+3]=f>>>24,d+4},a.prototype.writeInt32BE=function(f,d,v){return f=+f,d=d>>>0,v||ae(this,f,d,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[d]=f>>>24,this[d+1]=f>>>16,this[d+2]=f>>>8,this[d+3]=f&255,d+4},a.prototype.writeBigInt64LE=ie(function(f,d=0){return qe(this,f,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ie(function(f,d=0){return Ye(this,f,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function he(_,f,d,v,k,R){if(d+v>_.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function _e(_,f,d,v,k){return f=+f,d=d>>>0,k||he(_,f,d,4),t.write(_,f,d,v,23,4),d+4}a.prototype.writeFloatLE=function(f,d,v){return _e(this,f,d,!0,v)},a.prototype.writeFloatBE=function(f,d,v){return _e(this,f,d,!1,v)};function Se(_,f,d,v,k){return f=+f,d=d>>>0,k||he(_,f,d,8),t.write(_,f,d,v,52,8),d+8}a.prototype.writeDoubleLE=function(f,d,v){return Se(this,f,d,!0,v)},a.prototype.writeDoubleBE=function(f,d,v){return Se(this,f,d,!1,v)},a.prototype.copy=function(f,d,v,k){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");if(v||(v=0),!k&&k!==0&&(k=this.length),d>=f.length&&(d=f.length),d||(d=0),k>0&&k<v&&(k=v),k===v||f.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),f.length-d<k-v&&(k=f.length-d+v);const R=k-v;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,v,k):Uint8Array.prototype.set.call(f,this.subarray(v,k),d),R},a.prototype.fill=function(f,d,v,k){if(typeof f=="string"){if(typeof d=="string"?(k=d,d=0,v=this.length):typeof v=="string"&&(k=v,v=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!a.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(f.length===1){const j=f.charCodeAt(0);(k==="utf8"&&j<128||k==="latin1")&&(f=j)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(d<0||this.length<d||this.length<v)throw new RangeError("Out of range index");if(v<=d)return this;d=d>>>0,v=v===void 0?this.length:v>>>0,f||(f=0);let R;if(typeof f=="number")for(R=d;R<v;++R)this[R]=f;else{const j=a.isBuffer(f)?f:a.from(f,k),fe=j.length;if(fe===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(R=0;R<v-d;++R)this[R+d]=j[R%fe]}return this};const se={};function rt(_,f,d){se[_]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${_}]`,this.stack,delete this.name}get code(){return _}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${_}]: ${this.message}`}}}rt("ERR_BUFFER_OUT_OF_BOUNDS",function(_){return _?`${_} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),rt("ERR_INVALID_ARG_TYPE",function(_,f){return`The "${_}" argument must be of type number. Received type ${typeof f}`},TypeError),rt("ERR_OUT_OF_RANGE",function(_,f,d){let v=`The value of "${_}" is out of range.`,k=d;return Number.isInteger(d)&&Math.abs(d)>2**32?k=$e(String(d)):typeof d=="bigint"&&(k=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(k=$e(k)),k+="n"),v+=` It must be ${f}. Received ${k}`,v},RangeError);function $e(_){let f="",d=_.length;const v=_[0]==="-"?1:0;for(;d>=v+4;d-=3)f=`_${_.slice(d-3,d)}${f}`;return`${_.slice(0,d)}${f}`}function St(_,f,d){A(f,"offset"),(_[f]===void 0||_[f+d]===void 0)&&q(f,_.length-(d+1))}function E(_,f,d,v,k,R){if(_>d||_<f){const j=typeof f=="bigint"?"n":"";let fe;throw f===0||f===BigInt(0)?fe=`>= 0${j} and < 2${j} ** ${(R+1)*8}${j}`:fe=`>= -(2${j} ** ${(R+1)*8-1}${j}) and < 2 ** ${(R+1)*8-1}${j}`,new se.ERR_OUT_OF_RANGE("value",fe,_)}St(v,k,R)}function A(_,f){if(typeof _!="number")throw new se.ERR_INVALID_ARG_TYPE(f,"number",_)}function q(_,f,d){throw Math.floor(_)!==_?(A(_,d),new se.ERR_OUT_OF_RANGE("offset","an integer",_)):f<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,_)}const D=/[^+/0-9A-Za-z-_]/g;function L(_){if(_=_.split("=")[0],_=_.trim().replace(D,""),_.length<2)return"";for(;_.length%4!==0;)_=_+"=";return _}function G(_,f){f=f||1/0;let d;const v=_.length;let k=null;const R=[];for(let j=0;j<v;++j){if(d=_.charCodeAt(j),d>55295&&d<57344){if(!k){if(d>56319){(f-=3)>-1&&R.push(239,191,189);continue}else if(j+1===v){(f-=3)>-1&&R.push(239,191,189);continue}k=d;continue}if(d<56320){(f-=3)>-1&&R.push(239,191,189),k=d;continue}d=(k-55296<<10|d-56320)+65536}else k&&(f-=3)>-1&&R.push(239,191,189);if(k=null,d<128){if((f-=1)<0)break;R.push(d)}else if(d<2048){if((f-=2)<0)break;R.push(d>>6|192,d&63|128)}else if(d<65536){if((f-=3)<0)break;R.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((f-=4)<0)break;R.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return R}function O(_){const f=[];for(let d=0;d<_.length;++d)f.push(_.charCodeAt(d)&255);return f}function N(_,f){let d,v,k;const R=[];for(let j=0;j<_.length&&!((f-=2)<0);++j)d=_.charCodeAt(j),v=d>>8,k=d%256,R.push(k),R.push(v);return R}function U(_){return e.toByteArray(L(_))}function $(_,f,d,v){let k;for(k=0;k<v&&!(k+d>=f.length||k>=_.length);++k)f[k+d]=_[k];return k}function Y(_,f){return _ instanceof f||_!=null&&_.constructor!=null&&_.constructor.name!=null&&_.constructor.name===f.name}function z(_){return _!==_}const ne=function(){const _="0123456789abcdef",f=new Array(256);for(let d=0;d<16;++d){const v=d*16;for(let k=0;k<16;++k)f[v+k]=_[d]+_[k]}return f}();function ie(_){return typeof BigInt>"u"?ue:_}function ue(){throw new Error("BigInt not supported")}}(xo)),xo}Um();const eh="14.9.17",zc=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),Yc=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),Go=(n,e)=>({startTime:e,type:"setValue",value:n}),th=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),nh=(n,e,{startTime:t,target:s,timeConstant:r})=>s+(e-s)*Math.exp((t-n)/r),ls=n=>n.type==="exponentialRampToValue",di=n=>n.type==="linearRampToValue",yn=n=>ls(n)||di(n),Oa=n=>n.type==="setValue",sn=n=>n.type==="setValueCurve",pi=(n,e,t,s)=>{const r=n[e];return r===void 0?s:yn(r)||Oa(r)?r.value:sn(r)?r.values[r.values.length-1]:nh(t,pi(n,e-1,r.startTime,s),r)},Zc=(n,e,t,s,r)=>t===void 0?[s.insertTime,r]:yn(t)?[t.endTime,t.value]:Oa(t)?[t.startTime,t.value]:sn(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,pi(n,e-1,t.startTime,r)],Ho=n=>n.type==="cancelAndHold",zo=n=>n.type==="cancelScheduledValues",pn=n=>Ho(n)||zo(n)?n.cancelTime:ls(n)||di(n)?n.endTime:n.startTime,Xc=(n,e,t,{endTime:s,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((n-e)/(s-e)):0,Kc=(n,e,t,{endTime:s,value:r})=>t+(n-e)/(s-e)*(r-t),Vm=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},qm=(n,{duration:e,startTime:t,values:s})=>{const r=(n-t)/e*(s.length-1);return Vm(s,r)},Br=n=>n.type==="setTarget";class $m{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=pn(e);if(Ho(e)||zo(e)){const s=this._automationEvents.findIndex(i=>zo(e)&&sn(i)?i.startTime+i.duration>=t:pn(i)>=t),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Ho(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&yn(r)){if(i!==void 0&&Br(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:sn(i)?i.startTime+i.duration:pn(i),a=i===void 0?this._defaultValue:sn(i)?i.values[i.values.length-1]:i.value,c=ls(r)?Xc(t,o,a,r):Kc(t,o,a,r),l=ls(r)?zc(c,t,this._currenTime):Yc(c,t,this._currenTime);this._automationEvents.push(l)}if(i!==void 0&&Br(i)&&this._automationEvents.push(Go(this.getValue(t),t)),i!==void 0&&sn(i)&&i.startTime+i.duration>t){const o=t-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),l=o/(c-1)*a,u=i.values.slice(0,c);if(l<1)for(let h=1;h<c;h+=1){const m=l*h%1;u[h]=i.values[h-1]*(1-m)+i.values[h]*m}this._automationEvents[this._automationEvents.length-1]=th(u,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>pn(o)>t),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&sn(r)&&pn(r)+r.duration>t)return!1;const i=ls(e)?zc(e.value,e.endTime,this._currenTime):di(e)?Yc(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(sn(e)&&t+e.duration>pn(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>pn(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),r=s[0];Br(r)&&s.unshift(Go(pi(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>pn(o)>e),s=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&Br(i)&&(s===void 0||!yn(s)||s.insertTime>e))return nh(e,pi(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Oa(i)&&(s===void 0||!yn(s)))return i.value;if(i!==void 0&&sn(i)&&(s===void 0||!yn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?qm(e,i):i.values[i.values.length-1];if(i!==void 0&&yn(i)&&(s===void 0||!yn(s)))return i.value;if(s!==void 0&&ls(s)){const[o,a]=Zc(this._automationEvents,r,i,s,this._defaultValue);return Xc(e,o,a,s)}if(s!==void 0&&di(s)){const[o,a]=Zc(this._automationEvents,r,i,s,this._defaultValue);return Kc(e,o,a,s)}return this._defaultValue}}const Wm=n=>({cancelTime:n,type:"cancelAndHold"}),jm=n=>({cancelTime:n,type:"cancelScheduledValues"}),Gm=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),Hm=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),zm=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),Ym=()=>new DOMException("","AbortError"),Zm=n=>(e,t,[s,r,i],o)=>{n(e[r],[t,s,i],a=>a[0]===t&&a[1]===s,o)},Xm=n=>(e,t,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},Km=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},vs=new WeakSet,sh=new WeakMap,Ra=new WeakMap,rh=new WeakMap,Da=new WeakMap,Qi=new WeakMap,ih=new WeakMap,Yo=new WeakMap,Zo=new WeakMap,Xo=new WeakMap,oh={construct(){return oh}},Jm=n=>{try{const e=new Proxy(n,oh);new e}catch{return!1}return!0},Jc=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Qc=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),r=s.match(Jc);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Jc)}return[t.join(";"),s]},el=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},tl=n=>{if(!Jm(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Qm=(n,e,t,s,r,i,o,a,c,l,u,h,m)=>{let p=0;return(g,y,w={credentials:"omit"})=>{const x=u.get(g);if(x!==void 0&&x.has(y))return Promise.resolve();const M=l.get(g);if(M!==void 0){const b=M.get(y);if(b!==void 0)return b}const P=i(g),S=P.audioWorklet===void 0?r(y).then(([b,I])=>{const[C,T]=Qc(b,I),B=`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return t(B)}).then(()=>{const b=m._AWGS.pop();if(b===void 0)throw new SyntaxError;s(P.currentTime,P.sampleRate,()=>b(class{},void 0,(I,C)=>{if(I.trim()==="")throw e();const T=Zo.get(P);if(T!==void 0){if(T.has(I))throw e();tl(C),el(C.parameterDescriptors),T.set(I,C)}else tl(C),el(C.parameterDescriptors),Zo.set(P,new Map([[I,C]]))},P.sampleRate,void 0,void 0))}):Promise.all([r(y),Promise.resolve(n(h,h))]).then(([[b,I],C])=>{const T=p+1;p=T;const[B,F]=Qc(b,I),X=`${B};((AudioWorkletProcessor,registerProcessor)=>{${F}
})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,te=new Blob([X],{type:"application/javascript; charset=utf-8"}),Z=URL.createObjectURL(te);return P.audioWorklet.addModule(Z,w).then(()=>{if(a(P))return P;const H=o(P);return H.audioWorklet.addModule(Z,w).then(()=>H)}).then(H=>{if(c===null)throw new SyntaxError;try{new c(H,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Z))});return M===void 0?l.set(g,new Map([[y,S]])):M.set(y,S),S.then(()=>{const b=u.get(g);b===void 0?u.set(g,new Set([y])):b.add(y)}).finally(()=>{const b=l.get(g);b!==void 0&&b.delete(y)}),S}},Vt=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},eo=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},ah=(n,e,t,s)=>{const r=Vt(n,e),i=eo(r,o=>o[0]===t&&o[1]===s);return r.size===0&&n.delete(e),i},wr=n=>Vt(ih,n),ws=n=>{if(vs.has(n))throw new Error("The AudioNode is already stored.");vs.add(n),wr(n).forEach(e=>e(!0))},ch=n=>"port"in n,xr=n=>{if(!vs.has(n))throw new Error("The AudioNode is not stored.");vs.delete(n),wr(n).forEach(e=>e(!1))},Ko=(n,e)=>{!ch(n)&&e.every(t=>t.size===0)&&xr(n)},eg=(n,e,t,s,r,i,o,a,c,l,u,h,m)=>{const p=new WeakMap;return(g,y,w,x,M)=>{const{activeInputs:P,passiveInputs:S}=i(y),{outputs:b}=i(g),I=a(g),C=T=>{const B=c(y),F=c(g);if(T){const V=ah(S,g,w,x);n(P,g,V,!1),!M&&!h(g)&&t(F,B,w,x),m(y)&&ws(y)}else{const V=s(P,g,w,x);e(S,x,V,!1),!M&&!h(g)&&r(F,B,w,x);const W=o(y);if(W===0)u(y)&&Ko(y,P);else{const K=p.get(y);K!==void 0&&clearTimeout(K),p.set(y,setTimeout(()=>{u(y)&&Ko(y,P)},W*1e3))}}};return l(b,[y,w,x],T=>T[0]===y&&T[1]===w&&T[2]===x,!0)?(I.add(C),u(g)?n(P,g,[w,x,C],!0):e(S,x,[g,w,C],!0),!0):!1}},tg=n=>(e,t,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,t,i]])):n(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)},ng=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(s),s.disconnect()};t.addEventListener("ended",r)},sg=n=>(e,t)=>{n(e).add(t)},rg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ig=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...rg,...c},h=s(l,u),m=i(l)?e():null;super(a,!1,h,m),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},ht=(n,e)=>n.context===e,og=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ht(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},mi=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Jt=()=>new DOMException("","IndexSizeError"),Pa=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?Jt():s}})(n.getChannelData)},ag={numberOfChannels:1},cg=(n,e,t,s,r,i,o,a)=>{let c=null;return class lh{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:m,sampleRate:p}={...ag,...u};c===null&&(c=new r(1,1,44100));const g=s!==null&&e(i,i)?new s({length:h,numberOfChannels:m,sampleRate:p}):c.createBuffer(m,h,p);if(g.numberOfChannels===0)throw t();return typeof g.copyFromChannel!="function"?(o(g),Pa(g)):e(mi,()=>mi(g))||a(g),n.add(g),g}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===lh.prototype||n.has(u)}}},It=-34028234663852886e22,gt=34028234663852886e22,an=n=>vs.has(n),lg={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ug=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),m={...lg,...u},p=r(h,m),g=o(h),y=g?e():null;super(l,!1,p,y),this._audioBufferSourceNodeRenderer=y,this._isBufferNullified=!1,this._isBufferSet=m.buffer!==null,this._nativeAudioBufferSourceNode=p,this._onended=null,this._playbackRate=t(this,g,p.playbackRate,gt,It)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?l:h}get playbackRate(){return this._playbackRate}start(l=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(l,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[l,u]:[l,u,h]),this.context.state!=="closed"){ws(this);const m=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",m),an(this)&&xr(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",m)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},hg=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const m=ht(h,u);if(!m){const p={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,p),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),m?await n(u,l.playbackRate,h.playbackRate):await s(u,l.playbackRate,h.playbackRate),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},fg=n=>"playbackRate"in n,dg=n=>"frequency"in n&&"gain"in n,pg=n=>"offset"in n,mg=n=>!("frequency"in n)&&"gain"in n,gg=n=>"detune"in n&&"frequency"in n&&!("gain"in n),_g=n=>"pan"in n,yt=n=>Vt(sh,n),Tr=n=>Vt(rh,n),Jo=(n,e)=>{const{activeInputs:t}=yt(n);t.forEach(r=>r.forEach(([i])=>{e.includes(n)||Jo(i,[...e,n])}));const s=fg(n)?[n.playbackRate]:ch(n)?Array.from(n.parameters.values()):dg(n)?[n.Q,n.detune,n.frequency,n.gain]:pg(n)?[n.offset]:mg(n)?[n.gain]:gg(n)?[n.detune,n.frequency]:_g(n)?[n.pan]:[];for(const r of s){const i=Tr(r);i!==void 0&&i.activeInputs.forEach(([o])=>Jo(o,e))}an(n)&&xr(n)},uh=n=>{Jo(n.destination,[])},yg=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),bg=(n,e,t,s,r,i,o,a,c)=>class extends n{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(u)}catch(g){throw g.code===12&&g.message==="sampleRate is not in range"?t():g}if(h===null)throw s();if(!yg(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw t();super(h,2);const{latencyHint:m}=u,{sampleRate:p}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:m==="balanced"?512/p:m==="interactive"||m===void 0?256/p:m==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(m*p/128)))*128/p,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const g=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",g)};h.addEventListener("statechange",g)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),uh(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const m=()=>{this._nativeAudioContext.removeEventListener("statechange",m),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",m)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},vg=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),m=o(h),p=r(h,u,m),g=m?e(a):null;super(l,!1,p,g),this._isNodeOfNativeOfflineAudioContext=m,this._nativeAudioDestinationNode=p}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},wg=n=>{const e=new WeakMap,t=async(s,r)=>{const i=r.destination;return e.set(r,i),await n(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(s,r)}}},xg=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=l.listener,h=()=>{const b=new Float32Array(1),I=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=o(l);let T=!1,B=[0,0,-1,0,1,0],F=[0,0,0];const V=()=>{if(T)return;T=!0;const te=s(l,256,9,0);te.onaudioprocess=({inputBuffer:Z})=>{const H=[i(Z,b,0),i(Z,b,1),i(Z,b,2),i(Z,b,3),i(Z,b,4),i(Z,b,5)];H.some((re,oe)=>re!==B[oe])&&(u.setOrientation(...H),B=H);const ee=[i(Z,b,6),i(Z,b,7),i(Z,b,8)];ee.some((re,oe)=>re!==F[oe])&&(u.setPosition(...ee),F=ee)},I.connect(te)},W=te=>Z=>{Z!==B[te]&&(B[te]=Z,u.setOrientation(...B))},K=te=>Z=>{Z!==F[te]&&(F[te]=Z,u.setPosition(...F))},X=(te,Z,H)=>{const ee=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z});ee.connect(I,0,te),ee.start(),Object.defineProperty(ee.offset,"defaultValue",{get(){return Z}});const re=n({context:c},C,ee.offset,gt,It);return a(re,"value",oe=>()=>oe.call(re),oe=>Q=>{try{oe.call(re,Q)}catch(ae){if(ae.code!==9)throw ae}V(),C&&H(Q)}),re.cancelAndHoldAtTime=(oe=>C?()=>{throw r()}:(...Q)=>{const ae=oe.apply(re,Q);return V(),ae})(re.cancelAndHoldAtTime),re.cancelScheduledValues=(oe=>C?()=>{throw r()}:(...Q)=>{const ae=oe.apply(re,Q);return V(),ae})(re.cancelScheduledValues),re.exponentialRampToValueAtTime=(oe=>C?()=>{throw r()}:(...Q)=>{const ae=oe.apply(re,Q);return V(),ae})(re.exponentialRampToValueAtTime),re.linearRampToValueAtTime=(oe=>C?()=>{throw r()}:(...Q)=>{const ae=oe.apply(re,Q);return V(),ae})(re.linearRampToValueAtTime),re.setTargetAtTime=(oe=>C?()=>{throw r()}:(...Q)=>{const ae=oe.apply(re,Q);return V(),ae})(re.setTargetAtTime),re.setValueAtTime=(oe=>C?()=>{throw r()}:(...Q)=>{const ae=oe.apply(re,Q);return V(),ae})(re.setValueAtTime),re.setValueCurveAtTime=(oe=>C?()=>{throw r()}:(...Q)=>{const ae=oe.apply(re,Q);return V(),ae})(re.setValueCurveAtTime),re};return{forwardX:X(0,0,W(0)),forwardY:X(1,0,W(1)),forwardZ:X(2,-1,W(2)),positionX:X(6,0,K(0)),positionY:X(7,0,K(1)),positionZ:X(8,0,K(2)),upX:X(3,0,W(3)),upY:X(4,1,W(4)),upZ:X(5,0,W(5))}},{forwardX:m,forwardY:p,forwardZ:g,positionX:y,positionY:w,positionZ:x,upX:M,upY:P,upZ:S}=u.forwardX===void 0?h():u;return{get forwardX(){return m},get forwardY(){return p},get forwardZ(){return g},get positionX(){return y},get positionY(){return w},get positionZ(){return x},get upX(){return M},get upY(){return P},get upZ(){return S}}},gi=n=>"context"in n,Sr=n=>gi(n[0]),ts=(n,e,t,s)=>{for(const r of n)if(t(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},nl=(n,e,[t,s],r)=>{ts(n,[e,t,s],i=>i[0]===e&&i[1]===t,r)},sl=(n,[e,t,s],r)=>{const i=n.get(e);i===void 0?n.set(e,new Set([[t,s]])):ts(i,[t,s],o=>o[0]===t,r)},Es=n=>"inputs"in n,_i=(n,e,t,s)=>{if(Es(e)){const r=e.inputs[s];return n.connect(r,t,0),[r,t,0]}return n.connect(e,t,s),[e,t,s]},hh=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},Tg=(n,e,t)=>eo(n,s=>s[0]===e&&s[1]===t),fh=(n,e)=>{if(!wr(n).delete(e))throw new Error("Missing the expected event listener.")},dh=(n,e,t)=>{const s=Vt(n,e),r=eo(s,i=>i[0]===t);return s.size===0&&n.delete(e),r},yi=(n,e,t,s)=>{Es(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},De=n=>Vt(Ra,n),sr=n=>Vt(Da,n),Hn=n=>Yo.has(n),Xr=n=>!vs.has(n),rl=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(n.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(n.destination)},a.start()}}),To=(n,e)=>{const t=new Map;for(const s of n)for(const r of s){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((s,r)=>e(r,s))},bi=n=>"context"in n,Sg=n=>{const e=new Map;n.connect=(t=>(s,r=0,i=0)=>{const o=bi(s)?t(s,r,i):t(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(n.connect.bind(n)),n.disconnect=(t=>(s,r,i)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==s);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(c=>{bi(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},kg=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=Tr(e),{outputs:o}=yt(n),a=wr(n),c=l=>{const u=De(n),h=sr(e);if(l){const m=dh(i,n,t);nl(r,n,m,!1),!s&&!Hn(n)&&u.connect(h,t)}else{const m=Tg(r,n,t);sl(i,m,!1),!s&&!Hn(n)&&u.disconnect(h,t)}};return ts(o,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),an(n)?nl(r,n,[t,c],!0):sl(i,[n,t,c],!0),!0):!1},Ig=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=yt(e),o=hh(r[s],n,t);return o===null?[ah(i,n,t,s)[2],!1]:[o[2],!0]},Eg=(n,e,t)=>{const{activeInputs:s,passiveInputs:r}=Tr(e),i=hh(s,n,t);return i===null?[dh(r,n,t)[1],!1]:[i[2],!0]},Fa=(n,e,t,s,r)=>{const[i,o]=Ig(n,t,s,r);if(i!==null&&(fh(n,i),o&&!e&&!Hn(n)&&yi(De(n),De(t),s,r)),an(t)){const{activeInputs:a}=yt(t);Ko(t,a)}},Ba=(n,e,t,s)=>{const[r,i]=Eg(n,t,s);r!==null&&(fh(n,r),i&&!e&&!Hn(n)&&De(n).disconnect(sr(t),s))},Cg=(n,e)=>{const t=yt(n),s=[];for(const r of t.outputs)Sr(r)?Fa(n,e,...r):Ba(n,e,...r),s.push(r[0]);return t.outputs.clear(),s},Ag=(n,e,t)=>{const s=yt(n),r=[];for(const i of s.outputs)i[1]===t&&(Sr(i)?Fa(n,e,...i):Ba(n,e,...i),r.push(i[0]),s.outputs.delete(i));return r},Mg=(n,e,t,s,r)=>{const i=yt(n);return Array.from(i.outputs).filter(o=>o[0]===t&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(Sr(o)?Fa(n,e,...o):Ba(n,e,...o),i.outputs.delete(o),o[0]))},Ng=(n,e,t,s,r,i,o,a,c,l,u,h,m,p,g,y)=>class extends l{constructor(x,M,P,S){super(P),this._context=x,this._nativeAudioNode=P;const b=u(x);h(b)&&t(rl,()=>rl(b,y))!==!0&&Sg(P),Ra.set(this,P),ih.set(this,new Set),x.state!=="closed"&&M&&ws(this),n(this,S,P)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(x){this._nativeAudioNode.channelCount=x}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(x){this._nativeAudioNode.channelCountMode=x}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(x){this._nativeAudioNode.channelInterpretation=x}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(x,M=0,P=0){if(M<0||M>=this._nativeAudioNode.numberOfOutputs)throw r();const S=u(this._context),b=g(S);if(m(x)||p(x))throw i();if(gi(x)){const T=De(x);try{const F=_i(this._nativeAudioNode,T,M,P),V=Xr(this);(b||V)&&this._nativeAudioNode.disconnect(...F),this.context.state!=="closed"&&!V&&Xr(x)&&ws(x)}catch(F){throw F.code===12?i():F}if(e(this,x,M,P,b)){const F=c([this],x);To(F,s(b))}return x}const I=sr(x);if(I.name==="playbackRate"&&I.maxValue===1024)throw o();try{this._nativeAudioNode.connect(I,M),(b||Xr(this))&&this._nativeAudioNode.disconnect(I,M)}catch(T){throw T.code===12?i():T}if(kg(this,x,M,b)){const T=c([this],x);To(T,s(b))}}disconnect(x,M,P){let S;const b=u(this._context),I=g(b);if(x===void 0)S=Cg(this,I);else if(typeof x=="number"){if(x<0||x>=this.numberOfOutputs)throw r();S=Ag(this,I,x)}else{if(M!==void 0&&(M<0||M>=this.numberOfOutputs)||gi(x)&&P!==void 0&&(P<0||P>=x.numberOfInputs))throw r();if(S=Mg(this,I,x,M,P),S.length===0)throw i()}for(const C of S){const T=c([this],C);To(T,a)}}},Og=(n,e,t,s,r,i,o,a,c,l,u,h,m)=>(p,g,y,w=null,x=null)=>{const M=y.value,P=new $m(M),S=g?s(P):null,b={get defaultValue(){return M},get maxValue(){return w===null?y.maxValue:w},get minValue(){return x===null?y.minValue:x},get value(){return y.value},set value(I){y.value=I,b.setValueAtTime(I,p.context.currentTime)},cancelAndHoldAtTime(I){if(typeof y.cancelAndHoldAtTime=="function")S===null&&P.flush(p.context.currentTime),P.add(r(I)),y.cancelAndHoldAtTime(I);else{const C=Array.from(P).pop();S===null&&P.flush(p.context.currentTime),P.add(r(I));const T=Array.from(P).pop();y.cancelScheduledValues(I),C!==T&&T!==void 0&&(T.type==="exponentialRampToValue"?y.exponentialRampToValueAtTime(T.value,T.endTime):T.type==="linearRampToValue"?y.linearRampToValueAtTime(T.value,T.endTime):T.type==="setValue"?y.setValueAtTime(T.value,T.startTime):T.type==="setValueCurve"&&y.setValueCurveAtTime(T.values,T.startTime,T.duration))}return b},cancelScheduledValues(I){return S===null&&P.flush(p.context.currentTime),P.add(i(I)),y.cancelScheduledValues(I),b},exponentialRampToValueAtTime(I,C){if(I===0)throw new RangeError;if(!Number.isFinite(C)||C<0)throw new RangeError;const T=p.context.currentTime;return S===null&&P.flush(T),Array.from(P).length===0&&(P.add(l(M,T)),y.setValueAtTime(M,T)),P.add(o(I,C)),y.exponentialRampToValueAtTime(I,C),b},linearRampToValueAtTime(I,C){const T=p.context.currentTime;return S===null&&P.flush(T),Array.from(P).length===0&&(P.add(l(M,T)),y.setValueAtTime(M,T)),P.add(a(I,C)),y.linearRampToValueAtTime(I,C),b},setTargetAtTime(I,C,T){return S===null&&P.flush(p.context.currentTime),P.add(c(I,C,T)),y.setTargetAtTime(I,C,T),b},setValueAtTime(I,C){return S===null&&P.flush(p.context.currentTime),P.add(l(I,C)),y.setValueAtTime(I,C),b},setValueCurveAtTime(I,C,T){const B=I instanceof Float32Array?I:new Float32Array(I);if(h!==null&&h.name==="webkitAudioContext"){const F=C+T,V=p.context.sampleRate,W=Math.ceil(C*V),K=Math.floor(F*V),X=K-W,te=new Float32Array(X);for(let H=0;H<X;H+=1){const ee=(B.length-1)/T*((W+H)/V-C),re=Math.floor(ee),oe=Math.ceil(ee);te[H]=re===oe?B[re]:(1-(ee-re))*B[re]+(1-(oe-ee))*B[oe]}S===null&&P.flush(p.context.currentTime),P.add(u(te,C,T)),y.setValueCurveAtTime(te,C,T);const Z=K/V;Z<F&&m(b,te[te.length-1],Z),m(b,B[B.length-1],F)}else S===null&&P.flush(p.context.currentTime),P.add(u(B,C,T)),y.setValueCurveAtTime(B,C,T);return b}};return t.set(b,y),e.set(b,p),n(b,S),b},Rg=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:r}=t;e.exponentialRampToValueAtTime(r,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:r}=t;e.linearRampToValueAtTime(r,s)}else if(t.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=t;e.setTargetAtTime(r,s,i)}else if(t.type==="setValue"){const{startTime:s,value:r}=t;e.setValueAtTime(r,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class ph{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Dg={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Pg=(n,e,t,s,r,i,o,a,c,l,u,h,m,p)=>class extends e{constructor(y,w,x){var M;const P=a(y),S=c(P),b=u({...Dg,...x});m(b);const I=Zo.get(P),C=I==null?void 0:I.get(w),T=S||P.state!=="closed"?P:(M=o(P))!==null&&M!==void 0?M:P,B=r(T,S?null:y.baseLatency,l,w,C,b),F=S?s(w,b,C):null;super(y,!0,B,F);const V=[];B.parameters.forEach((K,X)=>{const te=t(this,S,K);V.push([X,te])}),this._nativeAudioWorkletNode=B,this._onprocessorerror=null,this._parameters=new ph(V),S&&n(P,this);const{activeInputs:W}=i(this);h(B,W)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(y){const w=typeof y=="function"?p(this,y):null;this._nativeAudioWorkletNode.onprocessorerror=w;const x=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=x!==null&&x===w?y:x}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function vi(n,e,t,s,r){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,r);else{const i=n.getChannelData(s);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const mh=(n,e,t,s,r)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,r):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],r)},wi=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},Fg=(n,e)=>{const t=Vt(Xo,n),s=De(e);return Vt(t,s)},Bg=async(n,e,t,s,r,i,o)=>{const a=e===null?Math.ceil(n.context.length/128)*128:e.length,c=s.channelCount*s.numberOfInputs,l=r.reduce((w,x)=>w+x,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=yt(n),m=await Fg(t,n),p=wi(s.numberOfInputs,s.channelCount),g=wi(s.numberOfOutputs,r),y=Array.from(n.parameters.keys()).reduce((w,x)=>({...w,[x]:new Float32Array(128)}),{});for(let w=0;w<a;w+=128){if(s.numberOfInputs>0&&e!==null)for(let x=0;x<s.numberOfInputs;x+=1)for(let M=0;M<s.channelCount;M+=1)vi(e,p[x],M,M,w);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:x},M)=>{vi(e,y,x,c+M,w)});for(let x=0;x<s.numberOfInputs;x+=1)for(let M=0;M<r[x];M+=1)g[x][M].byteLength===0&&(g[x][M]=new Float32Array(128));try{const x=p.map((P,S)=>h.activeInputs[S].size===0?[]:P),M=o(w/t.sampleRate,t.sampleRate,()=>m.process(x,g,y));if(u!==null)for(let P=0,S=0;P<s.numberOfOutputs;P+=1){for(let b=0;b<r[P];b+=1)mh(u,g[P],b,S+b,w);S+=r[P]}if(!M)break}catch(x){n.dispatchEvent(new ErrorEvent("processorerror",{colno:x.colno,filename:x.filename,lineno:x.lineno,message:x.message}));break}}return u},Lg=(n,e,t,s,r,i,o,a,c,l,u,h,m,p,g,y)=>(w,x,M)=>{const P=new WeakMap;let S=null;const b=async(I,C)=>{let T=u(I),B=null;const F=ht(T,C),V=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(h===null){const W=V.reduce((Z,H)=>Z+H,0),K=r(C,{channelCount:Math.max(1,W),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,W)}),X=[];for(let Z=0;Z<I.numberOfOutputs;Z+=1)X.push(s(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:V[Z]}));const te=o(C,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1});te.connect=e.bind(null,X),te.disconnect=c.bind(null,X),B=[K,X,te]}else F||(T=new h(C,w));if(P.set(C,B===null?T:B[2]),B!==null){if(S===null){if(M===void 0)throw new Error("Missing the processor constructor.");if(m===null)throw new Error("Missing the native OfflineAudioContext constructor.");const H=I.channelCount*I.numberOfInputs,ee=M.parameterDescriptors===void 0?0:M.parameterDescriptors.length,re=H+ee;S=Bg(I,re===0?null:await(async()=>{const Q=new m(re,Math.ceil(I.context.length/128)*128,C.sampleRate),ae=[],qe=[];for(let _e=0;_e<x.numberOfInputs;_e+=1)ae.push(o(Q,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),qe.push(r(Q,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));const Ye=await Promise.all(Array.from(I.parameters.values()).map(async _e=>{const Se=i(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:_e.value});return await p(Q,_e,Se.offset),Se})),he=s(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,H+ee)});for(let _e=0;_e<x.numberOfInputs;_e+=1){ae[_e].connect(qe[_e]);for(let Se=0;Se<x.channelCount;Se+=1)qe[_e].connect(he,Se,_e*x.channelCount+Se)}for(const[_e,Se]of Ye.entries())Se.connect(he,0,H+_e),Se.start(0);return he.connect(Q.destination),await Promise.all(ae.map(_e=>g(I,Q,_e))),y(Q)})(),C,x,V,M,l)}const W=await S,K=t(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[X,te,Z]=B;W!==null&&(K.buffer=W,K.start(0)),K.connect(X);for(let H=0,ee=0;H<I.numberOfOutputs;H+=1){const re=te[H];for(let oe=0;oe<V[H];oe+=1)X.connect(re,ee+oe,oe);ee+=V[H]}return Z}if(F)for(const[W,K]of I.parameters.entries())await n(C,K,T.parameters.get(W));else for(const[W,K]of I.parameters.entries())await p(C,K,T.parameters.get(W));return await g(I,C,T),T};return{render(I,C){a(C,I);const T=P.get(C);return T!==void 0?Promise.resolve(T):b(I,C)}}},Ug=(n,e,t,s,r,i,o,a,c,l,u,h,m,p,g,y,w,x,M,P)=>class extends g{constructor(b,I){super(b,I),this._nativeContext=b,this._audioWorklet=n===void 0?void 0:{addModule:(C,T)=>n(this,C,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(b,I,C){return new t({length:I,numberOfChannels:b,sampleRate:C})}createBufferSource(){return new s(this)}createChannelMerger(b=6){return new i(this,{numberOfInputs:b})}createChannelSplitter(b=6){return new o(this,{numberOfOutputs:b})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(b=1){return new u(this,{maxDelayTime:b})}createDynamicsCompressor(){return new h(this)}createGain(){return new m(this)}createIIRFilter(b,I){return new p(this,{feedback:I,feedforward:b})}createOscillator(){return new y(this)}createPanner(){return new w(this)}createPeriodicWave(b,I,C={disableNormalization:!1}){return new x(this,{...C,imag:I,real:b})}createStereoPanner(){return new M(this)}createWaveShaper(){return new P(this)}decodeAudioData(b,I,C){return l(this._nativeContext,b).then(T=>(typeof I=="function"&&I(T),T),T=>{throw typeof C=="function"&&C(T),T})}},Vg={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},qg=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),m={...Vg,...u},p=r(h,m),g=o(h),y=g?t():null;super(l,!1,p,y),this._Q=e(this,g,p.Q,gt,It),this._detune=e(this,g,p.detune,1200*Math.log2(gt),-1200*Math.log2(gt)),this._frequency=e(this,g,p.frequency,l.sampleRate/2,0),this._gain=e(this,g,p.gain,40*Math.log10(gt),It),this._nativeBiquadFilterNode=p,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,h)}catch(m){throw m.code===11?s():m}if(l.length!==u.length||u.length!==h.length)throw s()}},$g=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=ht(l,c);if(!u){const h={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,h)}return i.set(c,l),u?(await n(c,a.Q,l.Q),await n(c,a.detune,l.detune),await n(c,a.frequency,l.frequency),await n(c,a.gain,l.gain)):(await s(c,a.Q,l.Q),await s(c,a.detune,l.detune),await s(c,a.frequency,l.frequency),await s(c,a.gain,l.gain)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},Wg=(n,e)=>(t,s)=>{const r=e.get(t);if(r!==void 0)return r;const i=n.get(t);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},jg={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Gg=(n,e,t,s,r)=>class extends n{constructor(o,a){const c=s(o),l={...jg,...a},u=t(c,l),h=r(c)?e():null;super(o,!1,u,h)}},Hg=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ht(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},zg={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Yg=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=i({...zg,...c}),h=t(l,u),m=r(l)?e():null;super(a,!1,h,m)}},Zg=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ht(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,l)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Xg=n=>(e,t,s)=>n(t,e,s),Kg=n=>(e,t,s=0,r=0)=>{const i=e[s];if(i===void 0)throw n();return bi(t)?i.connect(t,0,r):i.connect(t,0)},Jg=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},Qg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},e_=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...Qg,...l},m=s(u,h),p=i(u),g=p?t():null;super(c,!1,m,g),this._constantSourceNodeRenderer=g,this._nativeConstantSourceNode=m,this._offset=e(this,p,m.offset,gt,It),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){ws(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),an(this)&&xr(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},t_=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let h=t(l);const m=ht(h,u);if(!m){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,p),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),m?await n(u,l.offset,h.offset):await s(u,l.offset,h.offset),await r(l,u,h),h};return{set start(l){o=l},set stop(l){a=l},render(l,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):c(l,u)}}},n_=n=>e=>(n[0]=e,n[0]),s_={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},r_=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u={...s_,...c},h=t(l,u),p=r(l)?e():null;super(a,!1,h,p),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},i_=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ht(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,l)}return s.set(o,a),Es(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},o_=(n,e)=>(t,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,r)}catch(i){throw i.name==="SyntaxError"?n():i}},a_=()=>new DOMException("","DataCloneError"),il=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const r=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>r();try{e.postMessage(n,[n])}catch{}finally{r()}})},c_=(n,e,t,s,r,i,o,a,c,l,u)=>(h,m)=>{const p=o(h)?h:i(h);if(r.has(m)){const g=t();return Promise.reject(g)}try{r.add(m)}catch{}return e(c,()=>c(p))?p.decodeAudioData(m).then(g=>(il(m).catch(()=>{}),e(a,()=>a(g))||u(g),n.add(g),g)):new Promise((g,y)=>{const w=async()=>{try{await il(m)}catch{}},x=M=>{y(M),w()};try{p.decodeAudioData(m,M=>{typeof M.copyFromChannel!="function"&&(l(M),Pa(M)),n.add(M),w().then(()=>g(M))},M=>{x(M===null?s():M)})}catch(M){x(M)}})},l_=(n,e,t,s,r,i,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),m=a(h);if(u===l){if(e.delete(c),!m&&o(c)){const p=s(c),{outputs:g}=t(c);for(const y of g)if(Sr(y)){const w=s(y[0]);n(p,w,y[1],y[2])}else{const w=r(y[0]);p.connect(w,y[1])}}}else e.set(c,u-l)},u_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},h_=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...u_,...l},m=s(u,h),p=i(u),g=p?t(h.maxDelayTime):null;super(c,!1,m,g),this._delayTime=e(this,p,m.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},f_=(n,e,t,s,r)=>i=>{const o=new WeakMap,a=async(c,l)=>{let u=t(c);const h=ht(u,l);if(!h){const m={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,m)}return o.set(l,u),h?await n(l,c.delayTime,u.delayTime):await s(l,c.delayTime,u.delayTime),await r(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},d_=n=>(e,t,s,r)=>n(e[r],i=>i[0]===t&&i[1]===s),p_=n=>(e,t)=>{n(e).delete(t)},m_=n=>"delayTime"in n,g_=(n,e,t)=>function s(r,i){const o=gi(i)?i:t(n,i);if(m_(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,l)=>c.concat(l),[])},Lr=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},__=n=>(e,t=void 0,s=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?Lr(n,e,t).disconnect():bi(t)?s===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?Lr(n,e,s).disconnect(t,0):Lr(n,e,s).disconnect(t,0,r):s===void 0?e.forEach(i=>i.disconnect(t)):Lr(n,e,s).disconnect(t,0),y_={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},b_=(n,e,t,s,r,i,o,a)=>class extends n{constructor(l,u){const h=i(l),m={...y_,...u},p=s(h,m),g=o(h),y=g?t():null;super(l,!1,p,y),this._attack=e(this,g,p.attack),this._knee=e(this,g,p.knee),this._nativeDynamicsCompressorNode=p,this._ratio=e(this,g,p.ratio),this._release=e(this,g,p.release),this._threshold=e(this,g,p.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},v_=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=ht(l,c);if(!u){const h={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,h)}return i.set(c,l),u?(await n(c,a.attack,l.attack),await n(c,a.knee,l.knee),await n(c,a.ratio,l.ratio),await n(c,a.release,l.release),await n(c,a.threshold,l.threshold)):(await s(c,a.attack,l.attack),await s(c,a.knee,l.knee),await s(c,a.ratio,l.ratio),await s(c,a.release,l.release),await s(c,a.threshold,l.threshold)),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},w_=()=>new DOMException("","EncodingError"),x_=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,l=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(u,h,m,p,g)=>{if(h===a||h===n.location.href&&m===1&&p===1)return l(),s(g),!1;if(c!==null)return c(u,h,m,p,g)},i.onerror=()=>{l(),s(new SyntaxError)},i.onload=()=>{l(),t()},i.src=a,i.type="module",r.appendChild(i)}}),T_=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=n(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},S_=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},k_=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},I_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},E_=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...I_,...c},h=s(l,u),m=i(l),p=m?t():null;super(a,!1,h,p),this._gain=e(this,m,h.gain,gt,It)}get gain(){return this._gain}},C_=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=ht(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.gain,l.gain):await s(c,a.gain,l.gain),await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},A_=(n,e)=>t=>e(n,t),M_=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},N_=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},O_=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},R_=n=>e=>n.get(e),st=()=>new DOMException("","InvalidStateError"),D_=n=>e=>{const t=n.get(e);if(t===void 0)throw st();return t},P_=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},F_=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},to=()=>new DOMException("","InvalidAccessError"),B_=n=>{n.getFrequencyResponse=(e=>(t,s,r)=>{if(t.length!==s.length||s.length!==r.length)throw to();return e.call(n,t,s,r)})(n.getFrequencyResponse)},L_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},U_=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=s(a),u=r(l),h={...L_,...c},m=e(l,u?null:a.baseLatency,h),p=u?t(h.feedback,h.feedforward):null;super(a,!1,m,p),B_(m),this._nativeIIRFilterNode=m,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},gh=(n,e,t,s,r,i,o,a,c,l,u)=>{const h=l.length;let m=a;for(let p=0;p<h;p+=1){let g=t[0]*l[p];for(let y=1;y<r;y+=1){const w=m-y&c-1;g+=t[y]*i[w],g-=n[y]*o[w]}for(let y=r;y<s;y+=1)g+=t[y]*i[m-y&c-1];for(let y=r;y<e;y+=1)g-=n[y]*o[m-y&c-1];i[m]=l[p],o[m]=g,m=m+1&c-1,u[p]=g}return m},V_=(n,e,t,s)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let g=0;g<o;g+=1)i[g]/=r[0];for(let g=1;g<a;g+=1)r[g]/=r[0]}const l=32,u=new Float32Array(l),h=new Float32Array(l),m=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),p=n.numberOfChannels;for(let g=0;g<p;g+=1){const y=n.getChannelData(g),w=m.getChannelData(g);u.fill(0),h.fill(0),gh(r,o,i,a,c,u,h,0,l,y,w)}return m},q_=(n,e,t,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const l=async(u,h)=>{let m=null,p=e(u);const g=ht(p,h);if(h.createIIRFilter===void 0?m=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):g||(p=h.createIIRFilter(o,i)),a.set(h,m===null?p:m),m!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const w=new t(u.context.destination.channelCount,u.context.length,h.sampleRate);c=(async()=>{await s(u,w,w.destination);const x=await r(w);return V_(x,h,i,o)})()}const y=await c;return m.buffer=y,m.start(0),m}return await s(u,h,p),p};return{render(u,h){const m=a.get(h);return m!==void 0?Promise.resolve(m):l(u,h)}}},$_=(n,e,t,s,r,i)=>o=>(a,c)=>{const l=n.get(a);if(l===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=t(a);for(const m of h)if(Sr(m)){const p=s(m[0]);e(u,p,m[1],m[2])}else{const p=r(m[0]);u.disconnect(p,m[1])}}n.set(a,c)}else n.set(a,l+c)},W_=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},j_=(n,e)=>t=>n.has(t)||e(t),G_=(n,e)=>t=>n.has(t)||e(t),H_=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},z_=n=>e=>n!==null&&e instanceof n,Y_=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,Z_=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,X_=(n,e)=>t=>n(t)||e(t),K_=n=>e=>n!==null&&e instanceof n,J_=n=>n!==null&&n.isSecureContext,Q_=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},e0={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},t0=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i);if(s(a))throw new TypeError;const c={...e0,...o},l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},n0=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},s0=(n,e,t)=>class extends n{constructor(r,i){const o=t(r),a=e(o,i);super(r,!0,a,null)}},r0=(n,e,t,s,r,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,Qi.set(this,a),s(a)&&r.set(a,new Set),this._destination=new n(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},rr=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},i0=(n,e)=>(t,s,r)=>{const i=new Set;return t.connect=(o=>(a,c=0,l=0)=>{const u=i.size===0;if(e(a))return o.call(t,a,c,l),n(i,[a,c,l],h=>h[0]===a&&h[1]===c&&h[2]===l,!0),u&&s(),a;o.call(t,a,c),n(i,[a,c],h=>h[0]===a&&h[1]===c,!0),u&&s()})(t.connect),t.disconnect=(o=>(a,c,l)=>{const u=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const m of i)m[1]===a&&i.delete(m)}else{e(a)?o.call(t,a,c,l):o.call(t,a,c);for(const m of i)m[0]===a&&(c===void 0||m[1]===c)&&(l===void 0||m[2]===l)&&i.delete(m)}const h=i.size===0;u&&h&&r()})(t.disconnect),t},Be=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},et=(n,e)=>{Be(n,e,"channelCount"),Be(n,e,"channelCountMode"),Be(n,e,"channelInterpretation")},ol=n=>typeof n.getFloatTimeDomainData=="function",o0=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let r=0;r<s;r+=1)e[r]=(t[r]-128)*.0078125;return e}},a0=(n,e)=>(t,s)=>{const r=t.createAnalyser();if(et(r,s),!(s.maxDecibels>s.minDecibels))throw e();return Be(r,s,"fftSize"),Be(r,s,"maxDecibels"),Be(r,s,"minDecibels"),Be(r,s,"smoothingTimeConstant"),n(ol,()=>ol(r))||o0(r),r},c0=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Ue=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},l0=n=>{n.start=(e=>{let t=!1;return(s=0,r=0,i)=>{if(t)throw st();e.call(n,s,r,i),t=!0}})(n.start)},La=n=>{n.start=(e=>(t=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,r)})(n.start)},Ua=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},u0=(n,e,t,s,r,i,o,a,c,l,u)=>(h,m)=>{const p=h.createBufferSource();return et(p,m),Ue(p,m,"playbackRate"),Be(p,m,"buffer"),Be(p,m,"loop"),Be(p,m,"loopEnd"),Be(p,m,"loopStart"),e(t,()=>t(h))||l0(p),e(s,()=>s(h))||c(p),e(r,()=>r(h))||l(p,h),e(i,()=>i(h))||La(p),e(o,()=>o(h))||u(p,h),e(a,()=>a(h))||Ua(p),n(h,p),p},h0=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,f0=(n,e)=>(t,s,r)=>{const i=t.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=n(t,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},d0=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,p0=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},m0=(n,e,t,s,r)=>(i,o,a,c,l,u)=>{if(a!==null)try{const h=new a(i,c,u),m=new Map;let p=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>p,set:g=>{typeof p=="function"&&h.removeEventListener("processorerror",p),p=typeof g=="function"?g:null,typeof p=="function"&&h.addEventListener("processorerror",p)}}}),h.addEventListener=(g=>(...y)=>{if(y[0]==="processorerror"){const w=typeof y[1]=="function"?y[1]:typeof y[1]=="object"&&y[1]!==null&&typeof y[1].handleEvent=="function"?y[1].handleEvent:null;if(w!==null){const x=m.get(y[1]);x!==void 0?y[1]=x:(y[1]=M=>{M.type==="error"?(Object.defineProperties(M,{type:{value:"processorerror"}}),w(M)):w(new ErrorEvent(y[0],{...M}))},m.set(w,y[1]))}}return g.call(h,"error",y[1],y[2]),g.call(h,...y)})(h.addEventListener),h.removeEventListener=(g=>(...y)=>{if(y[0]==="processorerror"){const w=m.get(y[1]);w!==void 0&&(m.delete(y[1]),y[1]=w)}return g.call(h,"error",y[1],y[2]),g.call(h,y[0],y[1],y[2])})(h.removeEventListener),u.numberOfOutputs!==0){const g=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(g).connect(i.destination),r(h,()=>g.disconnect(),()=>g.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(l===void 0)throw s();return p0(u),e(i,o,l,u)},_h=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),g0=n=>new Promise((e,t)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),t(i)},r.postMessage(n)}),_0=async(n,e)=>{const t=await g0(e);return new n(t)},y0=(n,e,t,s)=>{let r=Xo.get(n);r===void 0&&(r=new WeakMap,Xo.set(n,r));const i=_0(t,s);return r.set(e,i),i},b0=(n,e,t,s,r,i,o,a,c,l,u,h,m)=>(p,g,y,w)=>{if(w.numberOfInputs===0&&w.numberOfOutputs===0)throw c();const x=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(x.some(D=>D<1))throw c();if(x.length!==w.numberOfOutputs)throw e();if(w.channelCountMode!=="explicit")throw c();const M=w.channelCount*w.numberOfInputs,P=x.reduce((D,L)=>D+L,0),S=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length;if(M+S>6||P>6)throw c();const b=new MessageChannel,I=[],C=[];for(let D=0;D<w.numberOfInputs;D+=1)I.push(o(p,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),C.push(r(p,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const T=[];if(y.parameterDescriptors!==void 0)for(const{defaultValue:D,maxValue:L,minValue:G,name:O}of y.parameterDescriptors){const N=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:w.parameterData[O]!==void 0?w.parameterData[O]:D===void 0?0:D});Object.defineProperties(N.offset,{defaultValue:{get:()=>D===void 0?0:D},maxValue:{get:()=>L===void 0?gt:L},minValue:{get:()=>G===void 0?It:G}}),T.push(N)}const B=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,M+S)}),F=_h(g,p.sampleRate),V=a(p,F,M+S,Math.max(1,P)),W=r(p,{channelCount:Math.max(1,P),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,P)}),K=[];for(let D=0;D<w.numberOfOutputs;D+=1)K.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:x[D]}));for(let D=0;D<w.numberOfInputs;D+=1){I[D].connect(C[D]);for(let L=0;L<w.channelCount;L+=1)C[D].connect(B,L,D*w.channelCount+L)}const X=new ph(y.parameterDescriptors===void 0?[]:y.parameterDescriptors.map(({name:D},L)=>{const G=T[L];return G.connect(B,0,M+L),G.start(0),[D,G.offset]}));B.connect(V);let te=w.channelInterpretation,Z=null;const H=w.numberOfOutputs===0?[V]:K,ee={get bufferSize(){return F},get channelCount(){return w.channelCount},set channelCount(D){throw t()},get channelCountMode(){return w.channelCountMode},set channelCountMode(D){throw t()},get channelInterpretation(){return te},set channelInterpretation(D){for(const L of I)L.channelInterpretation=D;te=D},get context(){return V.context},get inputs(){return I},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get onprocessorerror(){return Z},set onprocessorerror(D){typeof Z=="function"&&ee.removeEventListener("processorerror",Z),Z=typeof D=="function"?D:null,typeof Z=="function"&&ee.addEventListener("processorerror",Z)},get parameters(){return X},get port(){return b.port2},addEventListener(...D){return V.addEventListener(D[0],D[1],D[2])},connect:n.bind(null,H),disconnect:l.bind(null,H),dispatchEvent(...D){return V.dispatchEvent(D[0])},removeEventListener(...D){return V.removeEventListener(D[0],D[1],D[2])}},re=new Map;b.port1.addEventListener=(D=>(...L)=>{if(L[0]==="message"){const G=typeof L[1]=="function"?L[1]:typeof L[1]=="object"&&L[1]!==null&&typeof L[1].handleEvent=="function"?L[1].handleEvent:null;if(G!==null){const O=re.get(L[1]);O!==void 0?L[1]=O:(L[1]=N=>{u(p.currentTime,p.sampleRate,()=>G(N))},re.set(G,L[1]))}}return D.call(b.port1,L[0],L[1],L[2])})(b.port1.addEventListener),b.port1.removeEventListener=(D=>(...L)=>{if(L[0]==="message"){const G=re.get(L[1]);G!==void 0&&(re.delete(L[1]),L[1]=G)}return D.call(b.port1,L[0],L[1],L[2])})(b.port1.removeEventListener);let oe=null;Object.defineProperty(b.port1,"onmessage",{get:()=>oe,set:D=>{typeof oe=="function"&&b.port1.removeEventListener("message",oe),oe=typeof D=="function"?D:null,typeof oe=="function"&&(b.port1.addEventListener("message",oe),b.port1.start())}}),y.prototype.port=b.port1;let Q=null;y0(p,ee,y,w).then(D=>Q=D);const qe=wi(w.numberOfInputs,w.channelCount),Ye=wi(w.numberOfOutputs,x),he=y.parameterDescriptors===void 0?[]:y.parameterDescriptors.reduce((D,{name:L})=>({...D,[L]:new Float32Array(128)}),{});let _e=!0;const Se=()=>{w.numberOfOutputs>0&&V.disconnect(W);for(let D=0,L=0;D<w.numberOfOutputs;D+=1){const G=K[D];for(let O=0;O<x[D];O+=1)W.disconnect(G,L+O,O);L+=x[D]}},se=new Map;V.onaudioprocess=({inputBuffer:D,outputBuffer:L})=>{if(Q!==null){const G=h(ee);for(let O=0;O<F;O+=128){for(let N=0;N<w.numberOfInputs;N+=1)for(let U=0;U<w.channelCount;U+=1)vi(D,qe[N],U,U,O);y.parameterDescriptors!==void 0&&y.parameterDescriptors.forEach(({name:N},U)=>{vi(D,he,N,M+U,O)});for(let N=0;N<w.numberOfInputs;N+=1)for(let U=0;U<x[N];U+=1)Ye[N][U].byteLength===0&&(Ye[N][U]=new Float32Array(128));try{const N=qe.map(($,Y)=>{if(G[Y].size>0)return se.set(Y,F/128),$;const ne=se.get(Y);return ne===void 0?[]:($.every(ie=>ie.every(ue=>ue===0))&&(ne===1?se.delete(Y):se.set(Y,ne-1)),$)});_e=u(p.currentTime+O/p.sampleRate,p.sampleRate,()=>Q.process(N,Ye,he));for(let $=0,Y=0;$<w.numberOfOutputs;$+=1){for(let z=0;z<x[$];z+=1)mh(L,Ye[$],z,Y+z,O);Y+=x[$]}}catch(N){_e=!1,ee.dispatchEvent(new ErrorEvent("processorerror",{colno:N.colno,filename:N.filename,lineno:N.lineno,message:N.message}))}if(!_e){for(let N=0;N<w.numberOfInputs;N+=1){I[N].disconnect(C[N]);for(let U=0;U<w.channelCount;U+=1)C[O].disconnect(B,U,N*w.channelCount+U)}if(y.parameterDescriptors!==void 0){const N=y.parameterDescriptors.length;for(let U=0;U<N;U+=1){const $=T[U];$.disconnect(B,0,M+U),$.stop()}}B.disconnect(V),V.onaudioprocess=null,rt?Se():E();break}}}};let rt=!1;const $e=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),St=()=>V.connect($e).connect(p.destination),E=()=>{V.disconnect($e),$e.disconnect()},A=()=>{if(_e){E(),w.numberOfOutputs>0&&V.connect(W);for(let D=0,L=0;D<w.numberOfOutputs;D+=1){const G=K[D];for(let O=0;O<x[D];O+=1)W.connect(G,L+O,O);L+=x[D]}}rt=!0},q=()=>{_e&&(St(),Se()),rt=!1};return St(),m(ee,A,q)},yh=(n,e)=>{const t=n.createBiquadFilter();return et(t,e),Ue(t,e,"Q"),Ue(t,e,"detune"),Ue(t,e,"frequency"),Ue(t,e,"gain"),Be(t,e,"type"),t},v0=(n,e)=>(t,s)=>{const r=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,r),et(r,s),r},w0=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw st()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw st()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw st()}})},kr=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return et(t,e),w0(t),t},x0=(n,e,t,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return et(a,o),Ue(a,o,"offset"),e(s,()=>s(i))||La(a),e(r,()=>r(i))||Ua(a),n(i,a),a},Cs=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),T0=(n,e,t,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=t(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(g){l.channelCount=g},get channelCountMode(){return l.channelCountMode},set channelCountMode(g){l.channelCountMode=g},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(g){l.channelInterpretation=g},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(g){c.onended=g},addEventListener(...g){return c.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return c.dispatchEvent(g[0])},removeEventListener(...g){return c.removeEventListener(g[0],g[1],g[2])},start(g=0){c.start.call(c,g)},stop(g=0){c.stop.call(c,g)}},m=()=>c.connect(l),p=()=>c.disconnect(l);return n(r,c),s(Cs(h,l),m,p)},S0=(n,e)=>(t,s)=>{const r=t.createConvolver();if(et(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),Be(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw n();return i.call(r,o)}),s.channelCountMode==="max"))throw n();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw n();return i.call(r,o)}),r},bh=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return et(t,e),Ue(t,e,"delayTime"),t},k0=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(et(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return Ue(s,t,"attack"),Ue(s,t,"knee"),Ue(s,t,"ratio"),Ue(s,t,"release"),Ue(s,t,"threshold"),s},Tt=(n,e)=>{const t=n.createGain();return et(t,e),Ue(t,e,"gain"),t},I0=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return et(r,s),r};function E0(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function C0(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function al(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=C0(t,e),t[0]+=n[s];return t}const A0=(n,e,t,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const h=_h(i,r.sampleRate),m=l instanceof Float64Array?l:new Float64Array(l),p=u instanceof Float64Array?u:new Float64Array(u),g=m.length,y=p.length,w=Math.min(g,y);if(g===0||g>20)throw s();if(m[0]===0)throw e();if(y===0||y>20)throw s();if(p[0]===0)throw e();if(m[0]!==1){for(let T=0;T<y;T+=1)p[T]/=m[0];for(let T=1;T<g;T+=1)m[T]/=m[0]}const x=t(r,h,o,o);x.channelCount=o,x.channelCountMode=a,x.channelInterpretation=c;const M=32,P=[],S=[],b=[];for(let T=0;T<o;T+=1){P.push(0);const B=new Float32Array(M),F=new Float32Array(M);B.fill(0),F.fill(0),S.push(B),b.push(F)}x.onaudioprocess=T=>{const B=T.inputBuffer,F=T.outputBuffer,V=B.numberOfChannels;for(let W=0;W<V;W+=1){const K=B.getChannelData(W),X=F.getChannelData(W);P[W]=gh(m,g,p,y,w,S[W],b[W],P[W],M,K,X)}};const I=r.sampleRate/2;return Cs({get bufferSize(){return h},get channelCount(){return x.channelCount},set channelCount(T){x.channelCount=T},get channelCountMode(){return x.channelCountMode},set channelCountMode(T){x.channelCountMode=T},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(T){x.channelInterpretation=T},get context(){return x.context},get inputs(){return[x]},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},addEventListener(...T){return x.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return x.dispatchEvent(T[0])},getFrequencyResponse(T,B,F){if(T.length!==B.length||B.length!==F.length)throw n();const V=T.length;for(let W=0;W<V;W+=1){const K=-Math.PI*(T[W]/I),X=[Math.cos(K),Math.sin(K)],te=al(p,X),Z=al(m,X),H=E0(te,Z);B[W]=Math.sqrt(H[0]*H[0]+H[1]*H[1]),F[W]=Math.atan2(H[1],H[0])}},removeEventListener(...T){return x.removeEventListener(T[0],T[1],T[2])}},x)},M0=(n,e)=>n.createMediaElementSource(e.mediaElement),N0=(n,e)=>{const t=n.createMediaStreamDestination();return et(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},O0=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=t.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},R0=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=t.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return i},D0=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,P0=(n,e,t,s,r,i)=>(o,a)=>{const c=o.createOscillator();return et(c,a),Ue(c,a,"detune"),Ue(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Be(c,a,"type"),e(t,()=>t(o))||La(c),e(s,()=>s(o))||i(c,o),e(r,()=>r(o))||Ua(c),n(o,c),c},F0=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(et(s,t),Ue(s,t,"orientationX"),Ue(s,t,"orientationY"),Ue(s,t,"orientationZ"),Ue(s,t,"positionX"),Ue(s,t,"positionY"),Ue(s,t,"positionZ"),Be(s,t,"coneInnerAngle"),Be(s,t,"coneOuterAngle"),Be(s,t,"coneOuterGain"),Be(s,t,"distanceModel"),Be(s,t,"maxDistance"),Be(s,t,"panningModel"),Be(s,t,"refDistance"),Be(s,t,"rolloffFactor"),s)},B0=(n,e,t,s,r,i,o,a,c,l)=>(u,{coneInnerAngle:h,coneOuterAngle:m,coneOuterGain:p,distanceModel:g,maxDistance:y,orientationX:w,orientationY:x,orientationZ:M,panningModel:P,positionX:S,positionY:b,positionZ:I,refDistance:C,rolloffFactor:T,...B})=>{const F=u.createPanner();if(B.channelCount>2||B.channelCountMode==="max")throw o();et(F,B);const V={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},W=t(u,{...V,channelInterpretation:"speakers",numberOfInputs:6}),K=s(u,{...B,gain:1}),X=s(u,{...V,gain:1}),te=s(u,{...V,gain:0}),Z=s(u,{...V,gain:0}),H=s(u,{...V,gain:0}),ee=s(u,{...V,gain:0}),re=s(u,{...V,gain:0}),oe=r(u,256,6,1),Q=i(u,{...V,curve:new Float32Array([1,1]),oversample:"none"});let ae=[w,x,M],qe=[S,b,I];const Ye=new Float32Array(1);oe.onaudioprocess=({inputBuffer:se})=>{const rt=[c(se,Ye,0),c(se,Ye,1),c(se,Ye,2)];rt.some((St,E)=>St!==ae[E])&&(F.setOrientation(...rt),ae=rt);const $e=[c(se,Ye,3),c(se,Ye,4),c(se,Ye,5)];$e.some((St,E)=>St!==qe[E])&&(F.setPosition(...$e),qe=$e)},Object.defineProperty(te.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(re.gain,"defaultValue",{get:()=>0});const he={get bufferSize(){},get channelCount(){return F.channelCount},set channelCount(se){if(se>2)throw o();K.channelCount=se,F.channelCount=se},get channelCountMode(){return F.channelCountMode},set channelCountMode(se){if(se==="max")throw o();K.channelCountMode=se,F.channelCountMode=se},get channelInterpretation(){return F.channelInterpretation},set channelInterpretation(se){K.channelInterpretation=se,F.channelInterpretation=se},get coneInnerAngle(){return F.coneInnerAngle},set coneInnerAngle(se){F.coneInnerAngle=se},get coneOuterAngle(){return F.coneOuterAngle},set coneOuterAngle(se){F.coneOuterAngle=se},get coneOuterGain(){return F.coneOuterGain},set coneOuterGain(se){if(se<0||se>1)throw e();F.coneOuterGain=se},get context(){return F.context},get distanceModel(){return F.distanceModel},set distanceModel(se){F.distanceModel=se},get inputs(){return[K]},get maxDistance(){return F.maxDistance},set maxDistance(se){if(se<0)throw new RangeError;F.maxDistance=se},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get orientationX(){return X.gain},get orientationY(){return te.gain},get orientationZ(){return Z.gain},get panningModel(){return F.panningModel},set panningModel(se){F.panningModel=se},get positionX(){return H.gain},get positionY(){return ee.gain},get positionZ(){return re.gain},get refDistance(){return F.refDistance},set refDistance(se){if(se<0)throw new RangeError;F.refDistance=se},get rolloffFactor(){return F.rolloffFactor},set rolloffFactor(se){if(se<0)throw new RangeError;F.rolloffFactor=se},addEventListener(...se){return K.addEventListener(se[0],se[1],se[2])},dispatchEvent(...se){return K.dispatchEvent(se[0])},removeEventListener(...se){return K.removeEventListener(se[0],se[1],se[2])}};h!==he.coneInnerAngle&&(he.coneInnerAngle=h),m!==he.coneOuterAngle&&(he.coneOuterAngle=m),p!==he.coneOuterGain&&(he.coneOuterGain=p),g!==he.distanceModel&&(he.distanceModel=g),y!==he.maxDistance&&(he.maxDistance=y),w!==he.orientationX.value&&(he.orientationX.value=w),x!==he.orientationY.value&&(he.orientationY.value=x),M!==he.orientationZ.value&&(he.orientationZ.value=M),P!==he.panningModel&&(he.panningModel=P),S!==he.positionX.value&&(he.positionX.value=S),b!==he.positionY.value&&(he.positionY.value=b),I!==he.positionZ.value&&(he.positionZ.value=I),C!==he.refDistance&&(he.refDistance=C),T!==he.rolloffFactor&&(he.rolloffFactor=T),(ae[0]!==1||ae[1]!==0||ae[2]!==0)&&F.setOrientation(...ae),(qe[0]!==0||qe[1]!==0||qe[2]!==0)&&F.setPosition(...qe);const _e=()=>{K.connect(F),n(K,Q,0,0),Q.connect(X).connect(W,0,0),Q.connect(te).connect(W,0,1),Q.connect(Z).connect(W,0,2),Q.connect(H).connect(W,0,3),Q.connect(ee).connect(W,0,4),Q.connect(re).connect(W,0,5),W.connect(oe).connect(u.destination)},Se=()=>{K.disconnect(F),a(K,Q,0,0),Q.disconnect(X),X.disconnect(W),Q.disconnect(te),te.disconnect(W),Q.disconnect(Z),Z.disconnect(W),Q.disconnect(H),H.disconnect(W),Q.disconnect(ee),ee.disconnect(W),Q.disconnect(re),re.disconnect(W),W.disconnect(oe),oe.disconnect(u.destination)};return l(Cs(he,F),_e,Se)},L0=n=>(e,{disableNormalization:t,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(s).length<2)throw n();return a},Ir=(n,e,t,s)=>n.createScriptProcessor(e,t,s),U0=(n,e)=>(t,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const i=t.createStereoPanner();return et(i,s),Ue(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},V0=(n,e,t,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},h=(g,y,w,x)=>{const M=new Float32Array(16385),P=new Float32Array(16385);for(let B=0;B<16385;B+=1){const F=B/16384*c;M[B]=Math.cos(F),P[B]=Math.sin(F)}const S=t(g,{...l,gain:0}),b=s(g,{...u,curve:M}),I=s(g,{...u,curve:a}),C=t(g,{...l,gain:0}),T=s(g,{...u,curve:P});return{connectGraph(){y.connect(S),y.connect(I.inputs===void 0?I:I.inputs[0]),y.connect(C),I.connect(w),w.connect(b.inputs===void 0?b:b.inputs[0]),w.connect(T.inputs===void 0?T:T.inputs[0]),b.connect(S.gain),T.connect(C.gain),S.connect(x,0,0),C.connect(x,0,1)},disconnectGraph(){y.disconnect(S),y.disconnect(I.inputs===void 0?I:I.inputs[0]),y.disconnect(C),I.disconnect(w),w.disconnect(b.inputs===void 0?b:b.inputs[0]),w.disconnect(T.inputs===void 0?T:T.inputs[0]),b.disconnect(S.gain),T.disconnect(C.gain),S.disconnect(x,0,0),C.disconnect(x,0,1)}}},m=(g,y,w,x)=>{const M=new Float32Array(16385),P=new Float32Array(16385),S=new Float32Array(16385),b=new Float32Array(16385),I=Math.floor(16385/2);for(let H=0;H<16385;H+=1)if(H>I){const ee=(H-I)/(16384-I)*c;M[H]=Math.cos(ee),P[H]=Math.sin(ee),S[H]=0,b[H]=1}else{const ee=H/(16384-I)*c;M[H]=1,P[H]=0,S[H]=Math.cos(ee),b[H]=Math.sin(ee)}const C=e(g,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=t(g,{...l,gain:0}),B=s(g,{...u,curve:M}),F=t(g,{...l,gain:0}),V=s(g,{...u,curve:P}),W=s(g,{...u,curve:a}),K=t(g,{...l,gain:0}),X=s(g,{...u,curve:S}),te=t(g,{...l,gain:0}),Z=s(g,{...u,curve:b});return{connectGraph(){y.connect(C),y.connect(W.inputs===void 0?W:W.inputs[0]),C.connect(T,0),C.connect(F,0),C.connect(K,1),C.connect(te,1),W.connect(w),w.connect(B.inputs===void 0?B:B.inputs[0]),w.connect(V.inputs===void 0?V:V.inputs[0]),w.connect(X.inputs===void 0?X:X.inputs[0]),w.connect(Z.inputs===void 0?Z:Z.inputs[0]),B.connect(T.gain),V.connect(F.gain),X.connect(K.gain),Z.connect(te.gain),T.connect(x,0,0),K.connect(x,0,0),F.connect(x,0,1),te.connect(x,0,1)},disconnectGraph(){y.disconnect(C),y.disconnect(W.inputs===void 0?W:W.inputs[0]),C.disconnect(T,0),C.disconnect(F,0),C.disconnect(K,1),C.disconnect(te,1),W.disconnect(w),w.disconnect(B.inputs===void 0?B:B.inputs[0]),w.disconnect(V.inputs===void 0?V:V.inputs[0]),w.disconnect(X.inputs===void 0?X:X.inputs[0]),w.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),B.disconnect(T.gain),V.disconnect(F.gain),X.disconnect(K.gain),Z.disconnect(te.gain),T.disconnect(x,0,0),K.disconnect(x,0,0),F.disconnect(x,0,1),te.disconnect(x,0,1)}}},p=(g,y,w,x,M)=>{if(y===1)return h(g,w,x,M);if(y===2)return m(g,w,x,M);throw r()};return(g,{channelCount:y,channelCountMode:w,pan:x,...M})=>{if(w==="max")throw r();const P=n(g,{...M,channelCount:1,channelCountMode:w,numberOfInputs:2}),S=t(g,{...M,channelCount:y,channelCountMode:w,gain:1}),b=t(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:x});let{connectGraph:I,disconnectGraph:C}=p(g,y,S,b,P);Object.defineProperty(b.gain,"defaultValue",{get:()=>0}),Object.defineProperty(b.gain,"maxValue",{get:()=>1}),Object.defineProperty(b.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return S.channelCount},set channelCount(W){S.channelCount!==W&&(B&&C(),{connectGraph:I,disconnectGraph:C}=p(g,W,S,b,P),B&&I()),S.channelCount=W},get channelCountMode(){return S.channelCountMode},set channelCountMode(W){if(W==="clamped-max"||W==="max")throw r();S.channelCountMode=W},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(W){S.channelInterpretation=W},get context(){return S.context},get inputs(){return[S]},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get pan(){return b.gain},addEventListener(...W){return S.addEventListener(W[0],W[1],W[2])},dispatchEvent(...W){return S.dispatchEvent(W[0])},removeEventListener(...W){return S.removeEventListener(W[0],W[1],W[2])}};let B=!1;const F=()=>{I(),B=!0},V=()=>{C(),B=!1};return i(Cs(T,P),F,V)}},q0=(n,e,t,s,r,i,o)=>(a,c)=>{const l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);et(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Be(l,{curve:u},"curve"),Be(l,c,"oversample");let h=null,m=!1;return o(l,"curve",y=>()=>y.call(l),y=>w=>(y.call(l,w),m&&(s(w)&&h===null?h=n(a,l):!s(w)&&h!==null&&(h(),h=null)),w)),r(l,()=>{m=!0,s(l.curve)&&(h=n(a,l))},()=>{m=!1,h!==null&&(h(),h=null)})},$0=(n,e,t,s,r)=>(i,{curve:o,oversample:a,...c})=>{const l=i.createWaveShaper(),u=i.createWaveShaper();et(l,c),et(u,c);const h=t(i,{...c,gain:1}),m=t(i,{...c,gain:-1}),p=t(i,{...c,gain:1}),g=t(i,{...c,gain:-1});let y=null,w=!1,x=null;const M={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(b){h.channelCount=b,m.channelCount=b,l.channelCount=b,p.channelCount=b,u.channelCount=b,g.channelCount=b},get channelCountMode(){return l.channelCountMode},set channelCountMode(b){h.channelCountMode=b,m.channelCountMode=b,l.channelCountMode=b,p.channelCountMode=b,u.channelCountMode=b,g.channelCountMode=b},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(b){h.channelInterpretation=b,m.channelInterpretation=b,l.channelInterpretation=b,p.channelInterpretation=b,u.channelInterpretation=b,g.channelInterpretation=b},get context(){return l.context},get curve(){return x},set curve(b){if(b!==null&&b.length<2)throw e();if(b===null)l.curve=b,u.curve=b;else{const I=b.length,C=new Float32Array(I+2-I%2),T=new Float32Array(I+2-I%2);C[0]=b[0],T[0]=-b[I-1];const B=Math.ceil((I+1)/2),F=(I+1)/2-1;for(let V=1;V<B;V+=1){const W=V/B*F,K=Math.floor(W),X=Math.ceil(W);C[V]=K===X?b[K]:(1-(W-K))*b[K]+(1-(X-W))*b[X],T[V]=K===X?-b[I-1-K]:-((1-(W-K))*b[I-1-K])-(1-(X-W))*b[I-1-X]}C[B]=I%2===1?b[B-1]:(b[B-2]+b[B-1])/2,l.curve=C,u.curve=T}x=b,w&&(s(x)&&y===null?y=n(i,h):y!==null&&(y(),y=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(b){l.oversample=b,u.oversample=b},addEventListener(...b){return h.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return h.dispatchEvent(b[0])},removeEventListener(...b){return h.removeEventListener(b[0],b[1],b[2])}};o!==null&&(M.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==M.oversample&&(M.oversample=a);const P=()=>{h.connect(l).connect(p),h.connect(m).connect(u).connect(g).connect(p),w=!0,s(x)&&(y=n(i,h))},S=()=>{h.disconnect(l),l.disconnect(p),h.disconnect(m),m.disconnect(u),u.disconnect(g),g.disconnect(p),w=!1,y!==null&&(y(),y=null)};return r(Cs(M,p),P,S)},bt=()=>new DOMException("","NotSupportedError"),W0={numberOfChannels:1},j0=(n,e,t,s,r)=>class extends n{constructor(o,a,c){let l;if(typeof o=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")l=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:m}={...W0,...l},p=s(h,u,m);e(rr,()=>rr(p))||p.addEventListener("statechange",(()=>{let g=0;const y=w=>{this._state==="running"&&(g>0?(p.removeEventListener("statechange",y),w.stopImmediatePropagation(),this._waitForThePromiseToSettle(w)):g+=1)};return y})()),super(p,h),this._length=u,this._nativeOfflineAudioContext=p,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,uh(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},G0={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},H0=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...G0,...l},m=t(u,h),p=i(u),g=p?s():null,y=c.sampleRate/2;super(c,!1,m,g),this._detune=e(this,p,m.detune,153600,-153600),this._frequency=e(this,p,m.frequency,y,-y),this._nativeOscillatorNode=m,this._onended=null,this._oscillatorNodeRenderer=g,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){ws(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),an(this)&&xr(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},z0=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const l=async(u,h)=>{let m=t(u);const p=ht(m,h);if(!p){const g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,periodicWave:o===null?void 0:o,type:m.type};m=e(h,g),a!==null&&m.start(a),c!==null&&m.stop(c)}return i.set(h,m),p?(await n(h,u.detune,m.detune),await n(h,u.frequency,m.frequency)):(await s(h,u.detune,m.detune),await s(h,u.frequency,m.frequency)),await r(u,h,m),m};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,h){const m=i.get(h);return m!==void 0?Promise.resolve(m):l(u,h)}}},Y0={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Z0=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...Y0,...l},m=t(u,h),p=i(u),g=p?s():null;super(c,!1,m,g),this._nativePannerNode=m,this._orientationX=e(this,p,m.orientationX,gt,It),this._orientationY=e(this,p,m.orientationY,gt,It),this._orientationZ=e(this,p,m.orientationZ,gt,It),this._positionX=e(this,p,m.positionX,gt,It),this._positionY=e(this,p,m.positionY,gt,It),this._positionZ=e(this,p,m.positionZ,gt,It),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},X0=(n,e,t,s,r,i,o,a,c,l)=>()=>{const u=new WeakMap;let h=null;const m=async(p,g)=>{let y=null,w=i(p);const x={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation},M={...x,coneInnerAngle:w.coneInnerAngle,coneOuterAngle:w.coneOuterAngle,coneOuterGain:w.coneOuterGain,distanceModel:w.distanceModel,maxDistance:w.maxDistance,panningModel:w.panningModel,refDistance:w.refDistance,rolloffFactor:w.rolloffFactor},P=ht(w,g);if("bufferSize"in w)y=s(g,{...x,gain:1});else if(!P){const S={...M,orientationX:w.orientationX.value,orientationY:w.orientationY.value,orientationZ:w.orientationZ.value,positionX:w.positionX.value,positionY:w.positionY.value,positionZ:w.positionZ.value};w=r(g,S)}if(u.set(g,y===null?w:y),y!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const V=new o(6,p.context.length,g.sampleRate),W=e(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});W.connect(V.destination),h=(async()=>{const K=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(X,te)=>{const Z=t(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:te===0?1:0});return await a(V,X,Z.offset),Z}));for(let X=0;X<6;X+=1)K[X].connect(W,0,X),K[X].start(0);return l(V)})()}const S=await h,b=s(g,{...x,gain:1});await c(p,g,b);const I=[];for(let V=0;V<S.numberOfChannels;V+=1)I.push(S.getChannelData(V));let C=[I[0][0],I[1][0],I[2][0]],T=[I[3][0],I[4][0],I[5][0]],B=s(g,{...x,gain:1}),F=r(g,{...M,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:T[0],positionY:T[1],positionZ:T[2]});b.connect(B).connect(F.inputs[0]),F.connect(y);for(let V=128;V<S.length;V+=128){const W=[I[0][V],I[1][V],I[2][V]],K=[I[3][V],I[4][V],I[5][V]];if(W.some((X,te)=>X!==C[te])||K.some((X,te)=>X!==T[te])){C=W,T=K;const X=V/g.sampleRate;B.gain.setValueAtTime(0,X),B=s(g,{...x,gain:0}),F=r(g,{...M,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),B.gain.setValueAtTime(1,X),b.connect(B).connect(F.inputs[0]),F.connect(y)}}return y}return P?(await n(g,p.orientationX,w.orientationX),await n(g,p.orientationY,w.orientationY),await n(g,p.orientationZ,w.orientationZ),await n(g,p.positionX,w.positionX),await n(g,p.positionY,w.positionY),await n(g,p.positionZ,w.positionZ)):(await a(g,p.orientationX,w.orientationX),await a(g,p.orientationY,w.orientationY),await a(g,p.orientationZ,w.orientationZ),await a(g,p.positionX,w.positionX),await a(g,p.positionY,w.positionY),await a(g,p.positionZ,w.positionZ)),Es(w)?await c(p,g,w.inputs[0]):await c(p,g,w),w};return{render(p,g){const y=u.get(g);return y!==void 0?Promise.resolve(y):m(p,g)}}},K0={disableNormalization:!1},J0=(n,e,t,s)=>class vh{constructor(i,o){const a=e(i),c=s({...K0,...o}),l=n(a,c);return t.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===vh.prototype||t.has(i)}},Q0=(n,e)=>(t,s,r)=>(n(s).replay(r),e(s,t,r)),ey=(n,e,t)=>async(s,r,i)=>{const o=n(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const m=await e(l).render(l,r),p=s.context.destination;!t(l)&&(s!==p||!t(s))&&m.connect(i,u,c)})).reduce((a,c)=>[...a,...c],[]))},ty=(n,e,t)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await n(a).render(a,r);t(a)||u.connect(i,c)}))},ny=(n,e,t,s)=>r=>n(rr,()=>rr(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),sy=n=>(e,t)=>{n.set(e,t)},ry=n=>(e,t)=>n.set(e,t),iy=(n,e,t,s,r,i,o,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(s(l)).map(u=>t(u).render(u,l)))).then(()=>r(l)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Pa(u)):e(i,()=>i(u))||a(u),n.add(u),u)),oy={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},ay=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const l=r(a),u={...oy,...c},h=t(l,u),m=i(l),p=m?s():null;super(a,!1,h,p),this._pan=e(this,m,h.pan)}get pan(){return this._pan}},cy=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let l=t(a);const u=ht(l,c);if(!u){const h={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,h)}return i.set(c,l),u?await n(c,a.pan,l.pan):await s(c,a.pan,l.pan),Es(l)?await r(a,c,l.inputs[0]):await r(a,c,l),l};return{render(a,c){const l=i.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},ly=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},uy=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new n(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},hy=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{s.disconnect(),r(t.currentTime!==0)},t.startRendering()})},fy=()=>new DOMException("","UnknownError"),dy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},py=(n,e,t,s,r,i,o)=>class extends n{constructor(c,l){const u=r(c),h={...dy,...l},m=t(u,h),g=i(u)?s():null;super(c,!0,m,g),this._isCurveNullified=!1,this._nativeWaveShaperNode=m,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},my=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ht(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,l)}return s.set(o,a),Es(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},gy=()=>typeof window>"u"?null:window,_y=(n,e)=>t=>{t.copyFromChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)s[h]=l[h+o]},t.copyToChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,l=t.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<c&&h<u;h+=1)l[h+o]=s[h]}},yy=n=>e=>{e.copyFromChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyToChannel)},by=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},vy=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=t.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},wh=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),xh=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},Er=(n,e,t,s)=>{let r=n;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,{get:t(i),set:s(o)})},wy=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),xy=n=>({...n,channelCount:n.numberOfOutputs}),Ty=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},Th=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;Th(n,e,t+1e-7)}},Sy=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},ky=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},Iy=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Va=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Sh=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},qa=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Ey=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},Cy=n=>{n.start=(e=>(t=0,s=0,r)=>{const i=n.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,r)})(n.start)},kh=(n,e)=>{const t=e.createGain();n.connect(t);const s=(r=>()=>{r.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Cs(n,t),n.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(n,o),i=!0}})(n.stop)},As=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},Ay=Zm(ts),My=tg(ts),Ny=d_(eo),Ih=new WeakMap,Oy=N_(Ih),$t=Wg(new Map,new WeakMap),Kt=gy(),Eh=a0($t,Jt),$a=M_(yt),ot=ey(yt,$a,Hn),Ry=og(Eh,De,ot),Ne=D_(Qi),hn=D0(Kt),Ie=K_(hn),Ch=new WeakMap,Ah=T_(As),Cr=h0(Kt),Wa=z_(Cr),ja=Y_(Kt),Mh=Z_(Kt),ir=d0(Kt),ze=Ng(Xm(sh),eg(Ay,My,_i,Ny,yi,yt,Oy,wr,De,ts,an,Hn,Xr),$t,$_(Yo,yi,yt,De,sr,an),Jt,to,bt,l_(_i,Yo,yt,De,sr,Ne,an,Ie),g_(Ch,yt,Vt),Ah,Ne,Wa,ja,Mh,Ie,ir),Dy=ig(ze,Ry,Jt,Eh,Ne,Ie),Ga=new WeakSet,cl=c0(Kt),Nh=n_(new Uint32Array(1)),Ha=_y(Nh,Jt),za=yy(Nh),Oh=cg(Ga,$t,bt,cl,hn,ly(cl),Ha,za),no=ng(Tt),Rh=ty($a,Tr,Hn),Qt=Xg(Rh),Ms=u0(no,$t,Sy,ky,Iy,Va,Sh,qa,Cy,by(Er),kh),en=Q0(O_(Tr),Rh),Py=hg(Qt,Ms,De,en,ot),Wt=Og(Km(rh),Ch,Da,Rg,Wm,jm,Gm,Hm,zm,Go,th,Cr,Th),Fy=ug(ze,Py,Wt,st,Ms,Ne,Ie,As),By=vg(ze,wg,Jt,st,f0(Tt,Er),Ne,Ie,ot),Ly=$g(Qt,yh,De,en,ot),ns=ry(Ih),Uy=qg(ze,Wt,Ly,to,yh,Ne,Ie,ns),Mn=i0(ts,ja),Vy=vy(st,Mn),Nn=v0(Cr,Vy),qy=Hg(Nn,De,ot),$y=Gg(ze,qy,Nn,Ne,Ie),Wy=Zg(kr,De,ot),jy=Yg(ze,Wy,kr,Ne,Ie,xy),Gy=T0(no,Ms,Tt,Mn),Ns=x0(no,$t,Gy,Va,qa),Hy=t_(Qt,Ns,De,en,ot),zy=e_(ze,Wt,Hy,Ns,Ne,Ie,As),Dh=S0(bt,Er),Yy=i_(Dh,De,ot),Zy=r_(ze,Yy,Dh,Ne,Ie,ns),Xy=f_(Qt,bh,De,en,ot),Ky=h_(ze,Wt,Xy,bh,Ne,Ie,ns),Ph=k0(bt),Jy=v_(Qt,Ph,De,en,ot),Qy=b_(ze,Wt,Jy,Ph,bt,Ne,Ie,ns),eb=C_(Qt,Tt,De,en,ot),tb=E_(ze,Wt,eb,Tt,Ne,Ie),nb=A0(to,st,Ir,bt),so=ny($t,Tt,Ir,hy(Tt,hn)),sb=q_(Ms,De,hn,ot,so),rb=I0(nb),ib=U_(ze,rb,sb,Ne,Ie,ns),ob=xg(Wt,Nn,Ns,Ir,bt,wh,Ie,Er),Fh=new WeakMap,ab=r0(By,ob,Ah,Ie,Fh,As),Bh=P0(no,$t,Va,Sh,qa,kh),cb=z0(Qt,Bh,De,en,ot),lb=H0(ze,Wt,Bh,cb,Ne,Ie,As),Lh=Jg(Ms),ub=$0(Lh,st,Tt,xh,Mn),ro=q0(Lh,st,ub,xh,Mn,Cr,Er),hb=B0(_i,st,Nn,Tt,Ir,ro,bt,yi,wh,Mn),Uh=F0(hb),fb=X0(Qt,Nn,Ns,Tt,Uh,De,hn,en,ot,so),db=Z0(ze,Wt,Uh,fb,Ne,Ie,ns),pb=L0(Jt),mb=J0(pb,Ne,new WeakSet,Ty),gb=V0(Nn,kr,Tt,ro,bt,Mn),Vh=U0(gb,bt),_b=cy(Qt,Vh,De,en,ot),yb=ay(ze,Wt,Vh,_b,Ne,Ie),bb=my(ro,De,ot),vb=py(ze,st,ro,bb,Ne,Ie,ns),qh=J_(Kt),Ya=S_(Kt),$h=new WeakMap,wb=P_($h,hn),xb=qh?Qm($t,bt,x_(Kt),Ya,k_(Ym),Ne,wb,Ie,ir,new WeakMap,new WeakMap,uy(ir,hn),Kt):void 0,Tb=X_(Wa,Ie),Sb=c_(Ga,$t,a_,w_,new WeakSet,Ne,Tb,mi,rr,Ha,za),Wh=Ug(xb,Dy,Oh,Fy,Uy,$y,jy,zy,Zy,Sb,Ky,Qy,tb,ib,ab,lb,db,mb,yb,vb),kb=Q_(ze,M0,Ne,Ie),Ib=t0(ze,N0,Ne,Ie),Eb=n0(ze,O0,Ne,Ie),Cb=R0(st,Ie),Ab=s0(ze,Cb,Ne),Mb=bg(Wh,st,bt,fy,kb,Ib,Eb,Ab,Cr),Za=F_(Fh),Nb=sg(Za),jh=Kg(Jt),Ob=p_(Za),Gh=__(Jt),Hh=new WeakMap,Rb=A_(Hh,Vt),Db=b0(jh,Jt,st,Nn,kr,Ns,Tt,Ir,bt,Gh,Ya,Rb,Mn),Pb=m0(st,Db,Tt,bt,Mn),Fb=Lg(Qt,jh,Ms,Nn,kr,Ns,Tt,Ob,Gh,Ya,De,ir,hn,en,ot,so),Bb=R_($h),Lb=sy(Hh),ll=qh?Pg(Nb,ze,Wt,Fb,Pb,yt,Bb,Ne,Ie,ir,wy,Lb,Ey,As):void 0,Ub=o_(bt,hn),Vb=iy(Ga,$t,$a,Za,so,mi,Ha,za),qb=j0(Wh,$t,st,Ub,Vb),$b=W_(Qi,Wa),Wb=j_(Ra,ja),jb=G_(Da,Mh),Gb=H_(Qi,Ie);function Rt(n){return n===void 0}function ye(n){return n!==void 0}function Hb(n){return typeof n=="function"}function zn(n){return typeof n=="number"}function qn(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function zb(n){return typeof n=="boolean"}function Lt(n){return Array.isArray(n)}function qt(n){return typeof n=="string"}function Ur(n){return qt(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function me(n,e){if(!n)throw new Error(e)}function Sn(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function zh(n){!n.isOffline&&n.state!=="running"&&Xa('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Yh=!1,ul=!1;function hl(n){Yh=n}function Yb(n){Rt(n)&&Yh&&!ul&&(ul=!0,Xa("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Zh=console;function Zb(...n){Zh.log(...n)}function Xa(...n){Zh.warn(...n)}function Xb(n){return new Mb(n)}function Kb(n,e,t){return new qb(n,e,t)}const $n=typeof self=="object"?self:null,Jb=$n&&($n.hasOwnProperty("AudioContext")||$n.hasOwnProperty("webkitAudioContext"));function Qb(n,e,t){return me(ye(ll),"This node only works in a secure context (https or localhost)"),new ll(n,e,t)}function jt(n,e,t,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function Ze(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})}class ev{constructor(e,t,s,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Yn(n){return jb(n)}function wn(n){return Wb(n)}function Kr(n){return Gb(n)}function cs(n){return $b(n)}function tv(n){return n instanceof Oh}function nv(n,e){return n==="value"||Yn(e)||wn(e)||tv(e)}function gs(n,...e){if(!e.length)return n;const t=e.shift();if(qn(n)&&qn(t))for(const s in t)nv(s,t[s])?n[s]=t[s]:qn(t[s])?(n[s]||Object.assign(n,{[s]:{}}),gs(n[s],t[s])):Object.assign(n,{[s]:t[s]});return gs(n,...e)}function sv(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function J(n,e,t=[],s){const r={},i=Array.from(e);if(qn(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(gs(r,{[s]:i[0]}),t.splice(t.indexOf(s),1),i.shift())),i.length===1&&qn(i[0]))gs(r,i[0]);else for(let o=0;o<t.length;o++)ye(i[o])&&(r[t[o]]=i[o]);return gs(n,r)}function rv(n){return n.constructor.getDefaults()}function _s(n,e){return Rt(n)?e:n}function fl(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class fn{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||$n&&this.toString()===$n.TONE_DEBUG_CLASS)&&Zb(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}fn.version=eh;const Ka=1e-6;function xs(n,e){return n>e+Ka}function Qo(n,e){return xs(n,e)||Pt(n,e)}function xi(n,e){return n+Ka<e}function Pt(n,e){return Math.abs(n-e)<Ka}function iv(n,e,t){return Math.max(Math.min(n,t),e)}class Dt extends fn{constructor(){super(),this.name="Timeline",this._timeline=[];const e=J(Dt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(me(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];me(Qo(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Pt(this._timeline[t].time,e)){for(let s=t;s>=0&&Pt(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Qo(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Pt(a[t],e)){for(let l=o;l<this._timeline.length;l++){const u=this._timeline[l];if(Pt(u[t],e))o=l;else break}return o}else{if(xi(a[t],e)&&xs(c[t],e))return o;xs(a[t],e)?i=o:s=o+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&Pt(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&Pt(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Xh=[];function io(n){Xh.push(n)}function ov(n){Xh.forEach(e=>e(n))}const Kh=[];function oo(n){Kh.push(n)}function av(n){Kh.forEach(e=>e(n))}class Ar extends fn{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{Rt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const s=(...r)=>{t(...r),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(Rt(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Rt(t))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Ar.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class Jh extends Ar{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Mr extends Jh{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Dt,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=J(Mr.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=Xb({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new ev(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(ov(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return me(cs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return me(cs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return me(cs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){me(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){me(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){me(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){me(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return Qb(this.rawContext,e,t)}addAudioWorkletModule(e){return Ze(this,void 0,void 0,function*(){me(ye(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Ze(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return cs(this._context)?this._context.resume():Promise.resolve()}close(){return Ze(this,void 0,void 0,function*(){cs(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&av(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+t})};return r(),s}}class cv extends Jh{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Ze(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ve(n,e){Lt(e)?e.forEach(t=>Ve(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function Qh(n,e){Lt(e)?e.forEach(t=>Qh(n,t)):Object.defineProperty(n,e,{writable:!0})}const ke=()=>{};class Re extends fn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ke;const e=J(Re.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,qt(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:ke,onload:ke,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:vt().sampleRate}set(e){return e instanceof Re?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Ze(this,void 0,void 0,function*(){const t=Re.load(e).then(s=>{this.set(s),this.onload(this)});Re.downloads.push(t);try{yield t}finally{const s=Re.downloads.indexOf(t);Re.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Lt(e)&&e[0].length>0,s=t?e.length:1,r=t?e[0].length:e.length,i=vt(),o=i.createBuffer(s,r,i.sampleRate),a=!t&&s===1?[e]:e;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(zn(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/s),this.fromArray(t)}return this}toArray(e){if(zn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){me(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);me(s<r,"The start time must be less than the end time");const i=r-s,o=vt().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new Re(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Re().fromArray(e)}static fromUrl(e){return Ze(this,void 0,void 0,function*(){return yield new Re().load(e)})}static load(e){return Ze(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const c=t[1].split("|");let l=c[0];for(const u of c)if(Re.supportsType(u)){l=u;break}e=e.replace(t[0],l)}const s=Re.baseUrl===""||Re.baseUrl.endsWith("/")?Re.baseUrl:Re.baseUrl+"/",r=document.createElement("a");r.href=s+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield vt().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Ze(this,void 0,void 0,function*(){for(yield Promise.resolve();Re.downloads.length;)yield Re.downloads[0]})}}Re.baseUrl="";Re.downloads=[];class Ja extends Mr{constructor(){super({clockSource:"offline",context:Kr(arguments[0])?arguments[0]:Kb(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Kr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Kr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Ze(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return Ze(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Re(t)})}close(){return Promise.resolve()}}const ef=new cv;let us=ef;function vt(){return us===ef&&Jb&&lv(new Mr),us}function lv(n,e=!1){e&&us.dispose(),cs(n)?us=new Mr(n):Kr(n)?us=new Ja(n):us=n}if($n&&!$n.TONE_SILENCE_LOGGING){const e=` * Tone.js v${eh} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function uv(n){return Math.pow(10,n/20)}function hv(n){return 20*(Math.log(n)/Math.LN10)}function tf(n){return Math.pow(2,n/12)}let ao=440;function fv(){return ao}function dv(n){ao=n}function Bn(n){return Math.round(nf(n))}function nf(n){return 69+12*Math.log2(n/ao)}function sf(n){return ao*Math.pow(2,(n-69)/12)}class Qa extends fn{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),r=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Qa&&this.fromType(this._val),Rt(this._val))return this._noArg();if(qt(this._val)&&Rt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(qn(this._val)){let e=0;for(const t in this._val)if(ye(this._val[t])){const s=this._val[t],r=new this.constructor(this.context,t).valueOf()*s;e+=r}return e}if(ye(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return qt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Ft extends Qa{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Ft(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let s=t[0],r=new Ft(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new Ft(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Bn(this.toFrequency())}_now(){return this.context.now()}}class wt extends Ft{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return fv()}static set A4(e){dv(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:wt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const r=pv[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:wt.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new wt(this.context,this.valueOf()*tf(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Bn(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/wt.A4);let s=Math.round(12*t)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),mv[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return sf(e)}static ftom(e){return Bn(e)}}const pv={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},mv=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function gv(n,e){return new wt(vt(),n,e)}class Xs extends Ft{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class xt extends fn{constructor(){super();const e=J(xt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:vt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return Yb(e),new Ft(this.context,e).toSeconds()}toFrequency(e){return new wt(this.context,e).toFrequency()}toTicks(e){return new Xs(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Rt(e[s])&&delete t[s]}),t}get(){const e=rv(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];ye(s)&&ye(s.value)&&ye(s.setValueAtTime)?e[t]=s.value:s instanceof xt?e[t]=s._getPartialProperties(e[t]):Lt(s)||zn(s)||qt(s)||zb(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&ye(this[t])&&(this[t]&&ye(this[t].value)&&ye(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof xt?this[t].set(e[t]):this[t]=e[t])}),this}}class ec extends Dt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return Sn(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Fe extends xt{constructor(){super(J(Fe.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=J(Fe.getDefaults(),arguments,["param","units","convert"]);for(me(ye(e.param)&&(Yn(e.param)||e.param instanceof Fe),"param must be an AudioParam");!Yn(e.param);)e.param=e.param._param;this._swappable=ye(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Dt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ye(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(xt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ye(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ye(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return ye(this.maxValue)&&ye(this.minValue)&&Sn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?uv(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?hv(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),r=this._fromType(e);return me(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,t):i=this._exponentialInterpolate(r.time,o,s.time,s.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),r=this.toSeconds(t);return me(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=Pt(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(t);return me(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const r=this._fromType(e);me(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),me(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,t,s,r=1){s=this.toSeconds(s),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return me(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));me(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const r=this._events.get(t),i=this._events.getAfter(t);return r&&Pt(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){me(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,r,i){return s+(t-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,s,r,i){return t+(r-t)*((i-e)/(s-e))}_exponentialInterpolate(e,t,s,r,i){return t*Math.pow(r/t,(i-e)/(s-e))}}class pe extends xt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return ye(this.input)?Yn(this.input)||this.input instanceof Fe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ye(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ye(e)&&(e instanceof pe||wn(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();me(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return Os(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Xa("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return _v(this,e,t,s),this}chain(...e){return ea(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),ye(this.input)&&(this.input instanceof pe?this.input.dispose():wn(this.input)&&this.input.disconnect()),ye(this.output)&&(this.output instanceof pe?this.output.dispose():wn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ea(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof pe?t.connect(s):wn(t)&&Os(t,s),s),e)}function Os(n,e,t=0,s=0){for(me(ye(n),"Cannot connect from undefined node"),me(ye(e),"Cannot connect to undefined node"),(e instanceof pe||wn(e))&&me(e.numberOfInputs>0,"Cannot connect to node with no inputs"),me(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof pe||e instanceof Fe;)ye(e.input)&&(e=e.input);for(;n instanceof pe;)ye(n.output)&&(n=n.output);Yn(e)?n.connect(e,t):n.connect(e,t,s)}function _v(n,e,t=0,s=0){if(ye(e))for(;e instanceof pe;)e=e.input;for(;!wn(n);)ye(n.output)&&(n=n.output);Yn(e)?n.disconnect(e,t):wn(e)?n.disconnect(e,t,s):n.disconnect()}class Qe extends pe{constructor(){super(J(Qe.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=J(Qe.getDefaults(),arguments,["gain","units"]);this.gain=new Fe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ve(this,"gain")}static getDefaults(){return Object.assign(pe.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ts extends pe{constructor(e){super(e),this.onended=ke,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Qe({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(pe.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ke})}_startGain(e,t=1){me(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){me(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ke&&(this.onended(this),this.onended=ke,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),me(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=ke,this}}class Ti extends Ts{constructor(){super(J(Ti.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=J(Ti.getDefaults(),arguments,["offset"]);Os(this._source,this._gainNode),this.offset=new Fe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Ts.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class tt extends pe{constructor(){super(J(tt.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=J(tt.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Ti({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(pe.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return tc(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,r){return this._param.setValueCurveAtTime(e,t,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function tc(n,e,t,s){(e instanceof Fe||Yn(e)||e instanceof tt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof tt&&(e.overridden=!0)),Os(n,e,t,s)}class Si extends Fe{constructor(){super(J(Si.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Dt(1/0),this._multiplier=1;const e=J(Si.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Fe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+t,l=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,l=this._exponentialInterpolate(r.time,r.value,t,s,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Rt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,l=(-r-a)/o;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class ki extends tt{constructor(){super(J(ki.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=J(ki.getDefaults(),arguments,["value"]);this.input=this._param=new Si({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(tt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Ii extends xt{constructor(){super(J(Ii.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new ec,this._tickOffset=new Dt,this._ticksAtTime=new Dt,this._secondsAtTime=new Dt;const e=J(Ii.getDefaults(),arguments,["frequency"]);this.frequency=new ki({context:this.context,units:e.units,value:e.frequency}),Ve(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},xt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),ye(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let o=r||s,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,t+this.sampleTime,l=>{let u=o.time;const h=this._tickOffset.get(l.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&l.state!=="started"&&(a+=this.frequency.getTicksAtTime(l.time)-this.frequency.getTicksAtTime(u),l.time!==i.time&&(c={state:l.state,time:l.time,ticks:a})),o=l}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const r=this._secondsAtTime.get(e);let i=r||t,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let l=i.time;const u=this._tickOffset.get(c.time);u&&u.time>=i.time&&(o=u.seconds,l=u.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-l,c.time!==s.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,s){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),l=a-c;let u=Math.ceil(l)-l;u=Pt(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<t;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(m){i=m;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class or extends xt{constructor(){super(J(or.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=ke,this._lastUpdate=0,this._state=new ec("stopped"),this._boundLoop=this._loop.bind(this);const e=J(or.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Ii({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ve(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(xt.getDefaults(),{callback:ke,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){zh(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ar.mixin(or);class Nr extends fn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=J(Nr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ke,onload:ke,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return me(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=ke,r=ke){return qt(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Re(this.baseUrl+t,s,r))):this._buffers.set(e.toString(),new Re(t,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class nc extends wt{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Bn(super._frequencyToUnits(e))}_ticksToUnits(e){return Bn(super._ticksToUnits(e))}_beatsToUnits(e){return Bn(super._beatsToUnits(e))}_secondsToUnits(e){return Bn(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return sf(this.toMidi())}transpose(e){return new nc(this.context,this.toMidi()+e)}}function ar(n,e){return new nc(vt(),n,e)}class hs extends Xs{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class yv extends xt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Dt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}io(n=>{n.draw=new yv({context:n})});oo(n=>{n.draw.dispose()});class bv extends fn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){me(ye(e.time),"Events must have a time property"),me(ye(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new vv(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,r=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let r=1;r<t.length;r++)t[r].low>s.low&&(s=t[r]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class vv{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class kn extends pe{constructor(){super(J(kn.getDefaults(),arguments,["volume"])),this.name="Volume";const e=J(kn.getDefaults(),arguments,["volume"]);this.input=this.output=new Qe({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ve(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(pe.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ei extends pe{constructor(){super(J(Ei.getDefaults(),arguments)),this.name="Destination",this.input=new kn({context:this.context}),this.output=new Qe({context:this.context}),this.volume=this.input.volume;const e=J(Ei.getDefaults(),arguments);ea(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(pe.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),ea(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}io(n=>{n.destination=new Ei({context:n})});oo(n=>{n.destination.dispose()});class wv extends fn{constructor(e){super(),this.name="TimelineValue",this._timeline=new Dt({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Ss extends pe{constructor(){super(Object.assign(J(Ss.getDefaults(),arguments,["context"])))}connect(e,t=0,s=0){return tc(this,e,t,s),this}}class ks extends Ss{constructor(){super(Object.assign(J(ks.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=J(ks.getDefaults(),arguments,["mapping","length"]);Lt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Hb(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(tt.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));me(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Ci extends Ss{constructor(){super(Object.assign(J(Ci.getDefaults(),arguments,["value"]))),this.name="Pow";const e=J(Ci.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new ks({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Ss.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class In{constructor(e,t){this.id=In._eventId++,this._remainderTime=0;const s=Object.assign(In.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:ke,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}In._eventId=0;class sc extends In{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(sc.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},In.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return xi(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new hs(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){xi(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new hs(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);xs(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class cr extends xt{constructor(){super(J(cr.getDefaults(),arguments)),this.name="Transport",this._loop=new wv(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Dt,this._repeatedEvents=new bv,this._syncedSignals=[],this._swingAmount=0;const e=J(cr.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new or({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ve(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(xt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new hs(this.context,this._swingTicks*2/3).toSeconds()*r}hl(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),hl(!1)}schedule(e,t){const s=new In(this,{callback:e,time:new Xs(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,r=1/0){const i=new sc(this,{callback:e,duration:new Ft(this.context,r).toTicks(),interval:new Ft(this.context,t).toTicks(),time:new Xs(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const s=new In(this,{callback:e,once:!0,time:new Xs(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new hs(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return ye(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Lt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Ft(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Ft(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new hs(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new hs(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),r=e-s%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),o=[];if(e.units==="time"){const c=.015625/i,l=new Qe(c),u=new Ci(-1),h=new Qe(c);r.chain(l,u,h),r=h,i=1/i,o=[l,u,h]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/i:t=0);const a=new Qe(t);return r.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Qh(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ar.mixin(cr);io(n=>{n.transport=new cr({context:n})});oo(n=>{n.transport.dispose()});class Ct extends pe{constructor(e){super(e),this.input=void 0,this._state=new ec("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ke,this._syncedStop=ke,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new kn({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ve(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(pe.getDefaults(),{mute:!1,onstop:ke,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let r=Rt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")me(xs(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(_s(t,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else zh(this.context),this._start(r,t,s);return this}stop(e){let t=Rt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||ye(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(xs(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const r=t-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ke,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Zn extends Ts{constructor(){super(J(Zn.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=J(Zn.getDefaults(),arguments,["url","onload"]);Os(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Fe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Re(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ts.getDefaults(),{url:new Re,loop:!1,loopEnd:0,loopStart:0,onload:ke,onerror:ke,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,r=1){me(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=_s(t,this.loopStart):t=_s(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Qo(o,a)&&(o=(o-c)%l+c),Pt(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,xi(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),ye(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function ss(n,e){return Ze(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new Ja(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Ai extends Ts{constructor(){super(J(Ai.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=J(Ai.getDefaults(),arguments,["frequency","type"]);Os(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Fe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Fe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ve(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ts.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class je extends Ct{constructor(){super(J(je.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=J(je.getDefaults(),arguments,["frequency","type"]);this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),Ve(this,"frequency"),this.detune=new tt({context:this.context,units:"cents",value:e.detune}),Ve(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Ct.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new Ai({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return je._periodicWaveCache.find(t=>t.phase===this._phase&&sv(t.partials,this._partials));{const e=je._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(ye(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),je._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),je._periodicWaveCache.length>100&&je._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Sn(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const l=2/(c*Math.PI);let u;switch(e){case"sine":u=c<=a?1:0,this._partials[c-1]=u;break;case"square":u=c&1?2*l:0,this._partials[c-1]=u;break;case"sawtooth":u=l*(c&1?1:-1),this._partials[c-1]=u;break;case"triangle":c&1?u=2*(l*l)*(c-1>>1&1?-1:1):u=0,this._partials[c-1]=u;break;case"custom":u=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[c]=-u*Math.sin(t*c),o[c]=u*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+t[o]*Math.sin(o*s);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,t,o/i*r),s);return iv(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}je._periodicWaveCache=[];class xv extends Ss{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new ks({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Xn extends tt{constructor(){super(Object.assign(J(Xn.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=J(Xn.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Qe({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(tt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class lr extends Ct{constructor(){super(J(lr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new xv({context:this.context}),this._modulationNode=new Qe({context:this.context});const e=J(lr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new je({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new je({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Xn({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ve(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(je.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ur extends Ct{constructor(){super(J(ur.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Qe({context:this.context,gain:0});const e=J(ur.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new je({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new je({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Xn({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Xn({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ve(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(je.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Is extends Ct{constructor(){super(J(Is.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Qe({context:this.context,gain:0}),this._thresh=new ks({context:this.context,mapping:t=>t<=0?-1:1});const e=J(Is.getDefaults(),arguments,["frequency","width"]);this.width=new tt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new je({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ve(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class hr extends Ct{constructor(){super(J(hr.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=J(hr.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new tt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ve(this,["frequency","detune"])}static getDefaults(){return Object.assign(je.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+s*i)}}get count(){return this._oscillators.length}set count(e){if(Sn(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new je({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):ke});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class fr extends Ct{constructor(){super(J(fr.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Xn({context:this.context,value:2});const e=J(fr.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Is({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new je({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ve(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const dl={am:lr,fat:hr,fm:ur,oscillator:je,pulse:Is,pwm:fr};class dr extends Ct{constructor(){super(J(dr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=J(dr.getDefaults(),arguments,["frequency","type"]);this.frequency=new tt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new tt({context:this.context,units:"cents",value:e.detune}),Ve(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(je.getDefaults(),ur.getDefaults(),lr.getDefaults(),hr.getDefaults(),Is.getDefaults(),fr.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=dl[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof dl[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&zn(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&zn(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&qt(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return Ze(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function rf(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Sn(i,n,e),t.set(this,i)}})}}function dn(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Sn(this.toSeconds(i),n,e),t.set(this,i)}})}}let of=class ta extends Ct{constructor(){super(J(ta.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=J(ta.getDefaults(),arguments,["url","onload"]);this._buffer=new Re({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ct.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ke,onerror:ke,playbackRate:1,reverse:!1})}load(e){return Ze(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ke){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=_s(t,this._loopStart):t=_s(t,0);const r=this.toSeconds(t),i=s;s=_s(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Zn({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Rt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Sn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Sn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};jt([dn(0)],of.prototype,"fadeIn",void 0);jt([dn(0)],of.prototype,"fadeOut",void 0);class ln extends pe{constructor(){super(J(ln.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new tt({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=J(ln.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(pe.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(qt(e))return e;{let s;for(s in Vr)if(Vr[s][t]===e)return s;return e}}_setCurve(e,t,s){if(qt(s)&&Reflect.has(Vr,s)){const r=Vr[s];qn(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(Lt(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(me(Lt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return tc(this,e,t,s),this}asArray(e=1024){return Ze(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,s=new Ja(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}jt([dn(0)],ln.prototype,"attack",void 0);jt([dn(0)],ln.prototype,"decay",void 0);jt([rf(0,1)],ln.prototype,"sustain",void 0);jt([dn(0)],ln.prototype,"release",void 0);const Vr=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const r=[],i=6.4;for(e=0;e<127;e++){t=e/127;const m=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=m/10+t*.83}r[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const c=[];for(e=0;e<128;e++)t=e/127,c[e]=.5*(1-Math.cos(Math.PI*t));const l=[];for(e=0;e<128;e++){t=e/127;const m=Math.pow(t,3)*4+.2,p=Math.cos(m*Math.PI*2*t);l[e]=Math.abs(p*(1-t))}function u(m){const p=new Array(m.length);for(let g=0;g<m.length;g++)p[g]=1-m[g];return p}function h(m){return m.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:c,Out:u(c)},step:{In:o,Out:u(o)}}})();let Mi=class na extends pe{constructor(){super(J(na.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const e=J(na.getDefaults(),arguments);this._volume=this.output=new kn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ve(this,"volume")}static getDefaults(){return Object.assign(pe.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(a=>{r[t]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};class Kn extends Mi{constructor(){super(J(Kn.getDefaults(),arguments));const e=J(Kn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Mi.getDefaults(),{detune:0,onsilence:ke,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),r=e instanceof wt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}jt([dn(0)],Kn.prototype,"portamento",void 0);class rc extends ln{constructor(){super(J(rc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Qe({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class pr extends Kn{constructor(){super(J(pr.getDefaults(),arguments)),this.name="Synth";const e=J(pr.getDefaults(),arguments);this.oscillator=new dr(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new rc(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ve(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Kn.getDefaults(),{envelope:Object.assign(fl(ln.getDefaults(),Object.keys(pe.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(fl(dr.getDefaults(),[...Object.keys(Ct.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class mr extends pr{constructor(){super(J(mr.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=J(mr.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ve(this,["oscillator","envelope"])}static getDefaults(){return gs(Kn.getDefaults(),pr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),r=this.toFrequency(e instanceof wt?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}jt([rf(0)],mr.prototype,"octaves",void 0);jt([dn(0)],mr.prototype,"pitchDecay",void 0);const af=new Set;function ic(n){af.add(n)}function cf(n,e){const t=`registerProcessor("${n}", ${e})`;af.add(t)}const Tv=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;ic(Tv);const Sv=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;ic(Sv);const kv=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;ic(kv);const Iv="feedback-comb-filter",Ev=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;cf(Iv,Ev);class Jn extends Mi{constructor(){super(J(Jn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=J(Jn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(me(Ur(s)||zn(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Ur(s)){const i=new wt(this.context,s).toMidi();t[i]=e.urls[s]}else zn(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new Nr({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Mi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ke,onerror:ke,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=nf(new wt(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=o-c,u=this._buffers.get(l),h=tf(c+a),m=new Zn({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);m.start(t,0,u.duration/h,s),Lt(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(m),m.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const p=this._activeSources.get(o),g=p.indexOf(m);g!==-1&&p.splice(g,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new wt(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),Lt(t)?(me(Lt(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,s){if(me(Ur(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Ur(e)){const r=new wt(this.context,e).toMidi();this._buffers.add(r,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}jt([dn(0)],Jn.prototype,"attack",void 0);jt([dn(0)],Jn.prototype,"release",void 0);class Ni extends pe{constructor(){super(Object.assign(J(Ni.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=J(Ni.getDefaults(),arguments,["pan"]);this.pan=new Fe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ve(this,"pan")}static getDefaults(){return Object.assign(pe.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Cv="bit-crusher",Av=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;cf(Cv,Av);class We extends pe{constructor(){super(J(We.getDefaults(),arguments,["solo"])),this.name="Solo";const e=J(We.getDefaults(),arguments,["solo"]);this.input=this.output=new Qe({context:this.context}),We._allSolos.has(this.context)||We._allSolos.set(this.context,new Set),We._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(pe.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),We._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){We._soloed.has(this.context)||We._soloed.set(this.context,new Set),We._soloed.get(this.context).add(this)}_removeSolo(){We._soloed.has(this.context)&&We._soloed.get(this.context).delete(this)}_isSoloed(){return We._soloed.has(this.context)&&We._soloed.get(this.context).has(this)}_noSolos(){return!We._soloed.has(this.context)||We._soloed.has(this.context)&&We._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),We._allSolos.get(this.context).delete(this),this._removeSolo(),this}}We._allSolos=new Map;We._soloed=new Map;class Oi extends pe{constructor(){super(J(Oi.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=J(Oi.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Ni({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new kn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ve(this,["pan","volume"])}static getDefaults(){return Object.assign(pe.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Fn extends pe{constructor(){super(J(Fn.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=J(Fn.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new We({solo:e.solo,context:this.context}),this._panVol=this.output=new Oi({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ve(this,["pan","volume"])}static getDefaults(){return Object.assign(pe.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Fn.buses.has(e)||Fn.buses.set(e,new Qe({context:this.context})),Fn.buses.get(e)}send(e,t=0){const s=this._getBus(e),r=new Qe({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Fn.buses=new Map;class Mv extends pe{constructor(){super(...arguments),this.name="Listener",this.positionX=new Fe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Fe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Fe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Fe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Fe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Fe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Fe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Fe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Fe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(pe.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}io(n=>{n.listener=new Mv({context:n})});oo(n=>{n.listener.dispose()});function Nv(){return vt().now()}vt().transport;vt().destination;vt().destination;vt().listener;vt().draw;vt();var qr={},So,pl;function Ov(){if(pl)return So;pl=1;function n(r){var i=new s(r),o=i.readChunk();if(o.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+o.id+"'";for(var a=e(o.data),c=[],l=0;!i.eof()&&l<a.numTracks;l++){var u=i.readChunk();if(u.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+u.id+"'";var h=t(u.data);c.push(h)}return{header:a,tracks:c}}function e(r){var i=new s(r),o=i.readUInt16(),a=i.readUInt16(),c={format:o,numTracks:a},l=i.readUInt16();return l&32768?(c.framesPerSecond=256-(l>>8),c.ticksPerFrame=l&255):c.ticksPerBeat=l,c}function t(r){for(var i=new s(r),o=[];!i.eof();){var a=l();o.push(a)}return o;var c;function l(){var u={};u.deltaTime=i.readVarInt();var h=i.readUInt8();if((h&240)===240)if(h===255){u.meta=!0;var m=i.readUInt8(),p=i.readVarInt();switch(m){case 0:if(u.type="sequenceNumber",p!==2)throw"Expected length for sequenceNumber event is 2, got "+p;return u.number=i.readUInt16(),u;case 1:return u.type="text",u.text=i.readString(p),u;case 2:return u.type="copyrightNotice",u.text=i.readString(p),u;case 3:return u.type="trackName",u.text=i.readString(p),u;case 4:return u.type="instrumentName",u.text=i.readString(p),u;case 5:return u.type="lyrics",u.text=i.readString(p),u;case 6:return u.type="marker",u.text=i.readString(p),u;case 7:return u.type="cuePoint",u.text=i.readString(p),u;case 32:if(u.type="channelPrefix",p!=1)throw"Expected length for channelPrefix event is 1, got "+p;return u.channel=i.readUInt8(),u;case 33:if(u.type="portPrefix",p!=1)throw"Expected length for portPrefix event is 1, got "+p;return u.port=i.readUInt8(),u;case 47:if(u.type="endOfTrack",p!=0)throw"Expected length for endOfTrack event is 0, got "+p;return u;case 81:if(u.type="setTempo",p!=3)throw"Expected length for setTempo event is 3, got "+p;return u.microsecondsPerBeat=i.readUInt24(),u;case 84:if(u.type="smpteOffset",p!=5)throw"Expected length for smpteOffset event is 5, got "+p;var g=i.readUInt8(),y={0:24,32:25,64:29,96:30};return u.frameRate=y[g&96],u.hour=g&31,u.min=i.readUInt8(),u.sec=i.readUInt8(),u.frame=i.readUInt8(),u.subFrame=i.readUInt8(),u;case 88:if(u.type="timeSignature",p!=2&&p!=4)throw"Expected length for timeSignature event is 4 or 2, got "+p;return u.numerator=i.readUInt8(),u.denominator=1<<i.readUInt8(),p===4?(u.metronome=i.readUInt8(),u.thirtyseconds=i.readUInt8()):(u.metronome=36,u.thirtyseconds=8),u;case 89:if(u.type="keySignature",p!=2)throw"Expected length for keySignature event is 2, got "+p;return u.key=i.readInt8(),u.scale=i.readUInt8(),u;case 127:return u.type="sequencerSpecific",u.data=i.readBytes(p),u;default:return u.type="unknownMeta",u.data=i.readBytes(p),u.metatypeByte=m,u}}else if(h==240){u.type="sysEx";var p=i.readVarInt();return u.data=i.readBytes(p),u}else if(h==247){u.type="endSysEx";var p=i.readVarInt();return u.data=i.readBytes(p),u}else throw"Unrecognised MIDI event type byte: "+h;else{var w;if(h&128)w=i.readUInt8(),c=h;else{if(c===null)throw"Running status byte encountered before status byte";w=h,h=c,u.running=!0}var x=h>>4;switch(u.channel=h&15,x){case 8:return u.type="noteOff",u.noteNumber=w,u.velocity=i.readUInt8(),u;case 9:var M=i.readUInt8();return u.type=M===0?"noteOff":"noteOn",u.noteNumber=w,u.velocity=M,M===0&&(u.byte9=!0),u;case 10:return u.type="noteAftertouch",u.noteNumber=w,u.amount=i.readUInt8(),u;case 11:return u.type="controller",u.controllerType=w,u.value=i.readUInt8(),u;case 12:return u.type="programChange",u.programNumber=w,u;case 13:return u.type="channelAftertouch",u.amount=w,u;case 14:return u.type="pitchBend",u.value=w+(i.readUInt8()<<7)-8192,u;default:throw"Unrecognised MIDI event type: "+x}}}}function s(r){this.buffer=r,this.bufferLen=this.buffer.length,this.pos=0}return s.prototype.eof=function(){return this.pos>=this.bufferLen},s.prototype.readUInt8=function(){var r=this.buffer[this.pos];return this.pos+=1,r},s.prototype.readInt8=function(){var r=this.readUInt8();return r&128?r-256:r},s.prototype.readUInt16=function(){var r=this.readUInt8(),i=this.readUInt8();return(r<<8)+i},s.prototype.readInt16=function(){var r=this.readUInt16();return r&32768?r-65536:r},s.prototype.readUInt24=function(){var r=this.readUInt8(),i=this.readUInt8(),o=this.readUInt8();return(r<<16)+(i<<8)+o},s.prototype.readInt24=function(){var r=this.readUInt24();return r&8388608?r-16777216:r},s.prototype.readUInt32=function(){var r=this.readUInt8(),i=this.readUInt8(),o=this.readUInt8(),a=this.readUInt8();return(r<<24)+(i<<16)+(o<<8)+a},s.prototype.readBytes=function(r){var i=this.buffer.slice(this.pos,this.pos+r);return this.pos+=r,i},s.prototype.readString=function(r){var i=this.readBytes(r);return String.fromCharCode.apply(null,i)},s.prototype.readVarInt=function(){for(var r=0;!this.eof();){var i=this.readUInt8();if(i&128)r+=i&127,r<<=7;else return r+i}return r},s.prototype.readChunk=function(){var r=this.readString(4),i=this.readUInt32(),o=this.readBytes(i);return{id:r,length:i,data:o}},So=n,So}var ko,ml;function Rv(){if(ml)return ko;ml=1;function n(i,o){if(typeof i!="object")throw"Invalid MIDI data";o=o||{};var a=i.header||{},c=i.tracks||[],l,u=c.length,h=new r;for(e(h,a,u),l=0;l<u;l++)t(h,c[l],o);return h.buffer}function e(i,o,a){var c=o.format==null?1:o.format,l=128;o.timeDivision?l=o.timeDivision:o.ticksPerFrame&&o.framesPerSecond?l=-(o.framesPerSecond&255)<<8|o.ticksPerFrame&255:o.ticksPerBeat&&(l=o.ticksPerBeat&32767);var u=new r;u.writeUInt16(c),u.writeUInt16(a),u.writeUInt16(l),i.writeChunk("MThd",u.buffer)}function t(i,o,a){var c=new r,l,u=o.length,h=null;for(l=0;l<u;l++)(a.running===!1||!a.running&&!o[l].running)&&(h=null),h=s(c,o[l],h,a.useByte9ForNoteOff);i.writeChunk("MTrk",c.buffer)}function s(i,o,a,c){var l=o.type,u=o.deltaTime,h=o.text||"",m=o.data||[],p=null;switch(i.writeVarInt(u),l){case"sequenceNumber":i.writeUInt8(255),i.writeUInt8(0),i.writeVarInt(2),i.writeUInt16(o.number);break;case"text":i.writeUInt8(255),i.writeUInt8(1),i.writeVarInt(h.length),i.writeString(h);break;case"copyrightNotice":i.writeUInt8(255),i.writeUInt8(2),i.writeVarInt(h.length),i.writeString(h);break;case"trackName":i.writeUInt8(255),i.writeUInt8(3),i.writeVarInt(h.length),i.writeString(h);break;case"instrumentName":i.writeUInt8(255),i.writeUInt8(4),i.writeVarInt(h.length),i.writeString(h);break;case"lyrics":i.writeUInt8(255),i.writeUInt8(5),i.writeVarInt(h.length),i.writeString(h);break;case"marker":i.writeUInt8(255),i.writeUInt8(6),i.writeVarInt(h.length),i.writeString(h);break;case"cuePoint":i.writeUInt8(255),i.writeUInt8(7),i.writeVarInt(h.length),i.writeString(h);break;case"channelPrefix":i.writeUInt8(255),i.writeUInt8(32),i.writeVarInt(1),i.writeUInt8(o.channel);break;case"portPrefix":i.writeUInt8(255),i.writeUInt8(33),i.writeVarInt(1),i.writeUInt8(o.port);break;case"endOfTrack":i.writeUInt8(255),i.writeUInt8(47),i.writeVarInt(0);break;case"setTempo":i.writeUInt8(255),i.writeUInt8(81),i.writeVarInt(3),i.writeUInt24(o.microsecondsPerBeat);break;case"smpteOffset":i.writeUInt8(255),i.writeUInt8(84),i.writeVarInt(5);var g={24:0,25:32,29:64,30:96},y=o.hour&31|g[o.frameRate];i.writeUInt8(y),i.writeUInt8(o.min),i.writeUInt8(o.sec),i.writeUInt8(o.frame),i.writeUInt8(o.subFrame);break;case"timeSignature":i.writeUInt8(255),i.writeUInt8(88),i.writeVarInt(4),i.writeUInt8(o.numerator);var w=Math.floor(Math.log(o.denominator)/Math.LN2)&255;i.writeUInt8(w),i.writeUInt8(o.metronome),i.writeUInt8(o.thirtyseconds||8);break;case"keySignature":i.writeUInt8(255),i.writeUInt8(89),i.writeVarInt(2),i.writeInt8(o.key),i.writeUInt8(o.scale);break;case"sequencerSpecific":i.writeUInt8(255),i.writeUInt8(127),i.writeVarInt(m.length),i.writeBytes(m);break;case"unknownMeta":o.metatypeByte!=null&&(i.writeUInt8(255),i.writeUInt8(o.metatypeByte),i.writeVarInt(m.length),i.writeBytes(m));break;case"sysEx":i.writeUInt8(240),i.writeVarInt(m.length),i.writeBytes(m);break;case"endSysEx":i.writeUInt8(247),i.writeVarInt(m.length),i.writeBytes(m);break;case"noteOff":var x=c!==!1&&o.byte9||c&&o.velocity==0?144:128;p=x|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.noteNumber),i.writeUInt8(o.velocity);break;case"noteOn":p=144|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.noteNumber),i.writeUInt8(o.velocity);break;case"noteAftertouch":p=160|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.noteNumber),i.writeUInt8(o.amount);break;case"controller":p=176|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.controllerType),i.writeUInt8(o.value);break;case"programChange":p=192|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.programNumber);break;case"channelAftertouch":p=208|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.amount);break;case"pitchBend":p=224|o.channel,p!==a&&i.writeUInt8(p);var M=8192+o.value,P=M&127,S=M>>7&127;i.writeUInt8(P),i.writeUInt8(S);break;default:throw"Unrecognized event type: "+l}return p}function r(){this.buffer=[]}return r.prototype.writeUInt8=function(i){this.buffer.push(i&255)},r.prototype.writeInt8=r.prototype.writeUInt8,r.prototype.writeUInt16=function(i){var o=i>>8&255,a=i&255;this.writeUInt8(o),this.writeUInt8(a)},r.prototype.writeInt16=r.prototype.writeUInt16,r.prototype.writeUInt24=function(i){var o=i>>16&255,a=i>>8&255,c=i&255;this.writeUInt8(o),this.writeUInt8(a),this.writeUInt8(c)},r.prototype.writeInt24=r.prototype.writeUInt24,r.prototype.writeUInt32=function(i){var o=i>>24&255,a=i>>16&255,c=i>>8&255,l=i&255;this.writeUInt8(o),this.writeUInt8(a),this.writeUInt8(c),this.writeUInt8(l)},r.prototype.writeInt32=r.prototype.writeUInt32,r.prototype.writeBytes=function(i){this.buffer=this.buffer.concat(Array.prototype.slice.call(i,0))},r.prototype.writeString=function(i){var o,a=i.length,c=[];for(o=0;o<a;o++)c.push(i.codePointAt(o));this.writeBytes(c)},r.prototype.writeVarInt=function(i){if(i<0)throw"Cannot write negative variable-length integer";if(i<=127)this.writeUInt8(i);else{var o=i,a=[];for(a.push(o&127),o>>=7;o;){var c=o&127|128;a.push(c),o>>=7}this.writeBytes(a.reverse())}},r.prototype.writeChunk=function(i,o){this.writeString(i),this.writeUInt32(o.length),this.writeBytes(o)},ko=n,ko}var gl;function Dv(){return gl||(gl=1,qr.parseMidi=Ov(),qr.writeMidi=Rv()),qr}var lf=Dv();function Jr(n,e,t="ticks"){let s=0;const r=n.length;let i=r;if(r>0&&n[r-1][t]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=n[o],c=n[o+1];if(a[t]===e){for(let l=o;l<n.length;l++)n[l][t]===e&&(o=l);return o}else{if(a[t]<e&&c[t]>e)return o;a[t]>e?i=o:a[t]<e&&(s=o+1)}}return-1}function Io(n,e,t="ticks"){if(n.length){const s=Jr(n,e[t],t);n.splice(s+1,0,e)}else n.push(e)}const $r=new WeakMap,uf=[["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"],["Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#","G#","D#","A#"]];class _l{constructor(e){if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",$r.set(this,480),e){$r.set(this,e.header.ticksPerBeat),e.tracks.forEach(s=>{s.forEach(r=>{r.meta&&(r.type==="timeSignature"?this.timeSignatures.push({ticks:r.absoluteTime,timeSignature:[r.numerator,r.denominator]}):r.type==="setTempo"?this.tempos.push({bpm:6e7/r.microsecondsPerBeat,ticks:r.absoluteTime}):r.type==="keySignature"?this.keySignatures.push({key:uf[r.scale][r.key+7],scale:r.scale===0?"major":"minor",ticks:r.absoluteTime}):(r.type==="marker"||r.type==="lyrics")&&this.meta.push({text:r.text,ticks:r.absoluteTime,type:r.type}))})});let t=0;e.tracks[0].forEach(s=>{t+=s.deltaTime,s.meta&&(s.type==="trackName"?this.name=s.text:(s.type==="text"||s.type==="cuePoint")&&this.meta.push({text:s.text,ticks:t,type:s.type}))}),this.update()}}update(){let e=0,t=0;this.tempos.sort((s,r)=>s.ticks-r.ticks),this.tempos.forEach((s,r)=>{const i=r>0?this.tempos[r-1].bpm:this.tempos[0].bpm,o=s.ticks/this.ppq-t,a=60/i*o;s.time=a+e,e=s.time,t+=o}),this.timeSignatures.sort((s,r)=>s.ticks-r.ticks),this.timeSignatures.forEach((s,r)=>{const i=r>0?this.timeSignatures[r-1]:this.timeSignatures[0],o=(s.ticks-i.ticks)/this.ppq,a=yl(o,i.timeSignature);i.measures=i.measures||0,s.measures=a+i.measures})}ticksToSeconds(e){const t=Jr(this.tempos,e);if(t!==-1){const s=this.tempos[t],r=s.time,i=(e-s.ticks)/this.ppq;return r+60/s.bpm*i}else{const s=e/this.ppq;return 60/120*s}}ticksToMeasures(e){const t=Jr(this.timeSignatures,e);if(t!==-1){const s=this.timeSignatures[t],r=(e-s.ticks)/this.ppq;return s.measures+yl(r,s.timeSignature)}else return e/this.ppq/4}get ppq(){return $r.get(this)}secondsToTicks(e){const t=Jr(this.tempos,e,"time");if(t!==-1){const s=this.tempos[t],r=s.time,o=(e-r)/(60/s.bpm);return Math.round(s.ticks+o*this.ppq)}else{const s=e/.5;return Math.round(s*this.ppq)}}toJSON(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(e=>({bpm:e.bpm,ticks:e.ticks})),timeSignatures:this.timeSignatures}}fromJSON(e){this.name=e.name,this.tempos=e.tempos.map(t=>Object.assign({},t)),this.timeSignatures=e.timeSignatures.map(t=>Object.assign({},t)),this.keySignatures=e.keySignatures.map(t=>Object.assign({},t)),this.meta=e.meta.map(t=>Object.assign({},t)),$r.set(this,e.ppq),this.update()}setTempo(e){this.tempos=[{bpm:e,ticks:0}],this.update()}}function yl(n,e){return n/(e[0]/e[1])/4}const Ri={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},Wr=Object.keys(Ri).reduce((n,e)=>(n[Ri[e]]=e,n),{}),Eo=new WeakMap,bl=new WeakMap;class Pv{constructor(e,t){Eo.set(this,t),bl.set(this,e.controllerType),this.ticks=e.absoluteTime,this.value=e.value}get number(){return bl.get(this)}get name(){return Ri[this.number]?Ri[this.number]:null}get time(){return Eo.get(this).ticksToSeconds(this.ticks)}set time(e){const t=Eo.get(this);this.ticks=t.secondsToTicks(e)}toJSON(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}}}function Fv(){return new Proxy({},{get(n,e){if(n[e])return n[e];if(Wr.hasOwnProperty(e))return n[Wr[e]]},set(n,e,t){return Wr.hasOwnProperty(e)?n[Wr[e]]=t:n[e]=t,!0}})}const Co=new WeakMap;class Bv{constructor(e,t){Co.set(this,t),this.ticks=e.absoluteTime,this.value=e.value}get time(){return Co.get(this).ticksToSeconds(this.ticks)}set time(e){const t=Co.get(this);this.ticks=t.secondsToTicks(e)}toJSON(){return{ticks:this.ticks,time:this.time,value:this.value}}}const vl=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],Lv=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],Uv={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"},wl=new WeakMap;class xl{constructor(e,t){if(this.number=0,wl.set(this,t),this.number=0,e){const s=e.find(r=>r.type==="programChange");s&&(this.number=s.programNumber)}}get name(){return this.percussion?Uv[this.number]:vl[this.number]}set name(e){const t=vl.indexOf(e);t!==-1&&(this.number=t)}get family(){return this.percussion?"drums":Lv[Math.floor(this.number/8)]}get percussion(){return wl.get(this).channel===9}toJSON(){return{family:this.family,number:this.number,name:this.name}}fromJSON(e){this.number=e.number}}function Vv(n){const e=Math.floor(n/12)-1;return hf(n)+e.toString()}function hf(n){const e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],t=n%12;return e[t]}function qv(n){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(n)}const $v=function(){const n=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return t=>{const s=n.exec(t),r=s[1],i=s[2];return e[r.toLowerCase()]+(parseInt(i,10)+1)*12}}(),os=new WeakMap;let Wv=class{constructor(e,t,s){os.set(this,s),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=t.velocity,this.ticks=e.ticks,this.durationTicks=t.ticks-e.ticks}get name(){return Vv(this.midi)}set name(e){this.midi=$v(e)}get octave(){return Math.floor(this.midi/12)-1}set octave(e){const t=e-this.octave;this.midi+=t*12}get pitch(){return hf(this.midi)}set pitch(e){this.midi=12*(this.octave+1)+qv(e)}get duration(){const e=os.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)}set duration(e){const s=os.get(this).secondsToTicks(this.time+e);this.durationTicks=s-this.ticks}get time(){return os.get(this).ticksToSeconds(this.ticks)}set time(e){const t=os.get(this);this.ticks=t.secondsToTicks(e)}get bars(){return os.get(this).ticksToMeasures(this.ticks)}toJSON(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}}};const jr=new WeakMap;class Ao{constructor(e,t){if(this.name="",this.notes=[],this.controlChanges=Fv(),this.pitchBends=[],jr.set(this,t),e){const s=e.find(r=>r.type==="trackName");this.name=s?s.text:""}if(this.instrument=new xl(e,this),this.channel=0,e){const s=e.filter(c=>c.type==="noteOn"),r=e.filter(c=>c.type==="noteOff");for(;s.length;){const c=s.shift();this.channel=c.channel;const l=r.findIndex(u=>u.noteNumber===c.noteNumber&&u.absoluteTime>=c.absoluteTime);if(l!==-1){const u=r.splice(l,1)[0];this.addNote({durationTicks:u.absoluteTime-c.absoluteTime,midi:c.noteNumber,noteOffVelocity:u.velocity/127,ticks:c.absoluteTime,velocity:c.velocity/127})}}e.filter(c=>c.type==="controller").forEach(c=>{this.addCC({number:c.controllerType,ticks:c.absoluteTime,value:c.value/127})}),e.filter(c=>c.type==="pitchBend").forEach(c=>{this.addPitchBend({ticks:c.absoluteTime,value:c.value/Math.pow(2,13)})});const a=e.find(c=>c.type==="endOfTrack");this.endOfTrackTicks=a!==void 0?a.absoluteTime:void 0}}addNote(e){const t=jr.get(this),s=new Wv({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},t);return Object.assign(s,e),Io(this.notes,s,"ticks"),this}addCC(e){const t=jr.get(this),s=new Pv({controllerType:e.number},t);return delete e.number,Object.assign(s,e),Array.isArray(this.controlChanges[s.number])||(this.controlChanges[s.number]=[]),Io(this.controlChanges[s.number],s,"ticks"),this}addPitchBend(e){const t=jr.get(this),s=new Bv({},t);return Object.assign(s,e),Io(this.pitchBends,s,"ticks"),this}get duration(){if(!this.notes.length)return 0;let e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration;for(let t=0;t<this.notes.length-1;t++){const s=this.notes[t].time+this.notes[t].duration;e<s&&(e=s)}return e}get durationTicks(){if(!this.notes.length)return 0;let e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks;for(let t=0;t<this.notes.length-1;t++){const s=this.notes[t].ticks+this.notes[t].durationTicks;e<s&&(e=s)}return e}fromJSON(e){this.name=e.name,this.channel=e.channel,this.instrument=new xl(void 0,this),this.instrument.fromJSON(e.instrument),e.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=e.endOfTrackTicks);for(const t in e.controlChanges)e.controlChanges[t]&&e.controlChanges[t].forEach(s=>{this.addCC({number:s.number,ticks:s.ticks,value:s.value})});e.notes.forEach(t=>{this.addNote({durationTicks:t.durationTicks,midi:t.midi,ticks:t.ticks,velocity:t.velocity})}),e.pitchBends.forEach(t=>{this.addPitchBend({value:t.value,ticks:t.value,time:t.time})})}toJSON(){const e={};for(let s=0;s<127;s++)this.controlChanges.hasOwnProperty(s)&&(e[s]=this.controlChanges[s].map(r=>r.toJSON()));const t={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map(s=>s.toJSON()),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(s=>s.toJSON())};return this.endOfTrackTicks!==void 0&&(t.endOfTrackTicks=this.endOfTrackTicks),t}}function jv(n){var e=[];return ff(n,e),e}function ff(n,e){for(var t=0;t<n.length;t++){var s=n[t];Array.isArray(s)?ff(s,e):e.push(s)}}function Gv(n,e){return[{absoluteTime:n.ticks,channel:e,deltaTime:0,noteNumber:n.midi,type:"noteOn",velocity:Math.floor(n.velocity*127)},{absoluteTime:n.ticks+n.durationTicks,channel:e,deltaTime:0,noteNumber:n.midi,type:"noteOff",velocity:Math.floor(n.noteOffVelocity*127)}]}function Hv(n){return jv(n.notes.map(e=>Gv(e,n.channel)))}function zv(n,e){return{absoluteTime:n.ticks,channel:e,controllerType:n.number,deltaTime:0,type:"controller",value:Math.floor(n.value*127)}}function Yv(n){const e=[];for(let t=0;t<127;t++)n.controlChanges.hasOwnProperty(t)&&n.controlChanges[t].forEach(s=>{e.push(zv(s,n.channel))});return e}function Zv(n,e){return{absoluteTime:n.ticks,channel:e,deltaTime:0,type:"pitchBend",value:n.value}}function Xv(n){const e=[];return n.pitchBends.forEach(t=>{e.push(Zv(t,n.channel))}),e}function Kv(n){return{absoluteTime:0,channel:n.channel,deltaTime:0,programNumber:n.instrument.number,type:"programChange"}}function Jv(n){return{absoluteTime:0,deltaTime:0,meta:!0,text:n,type:"trackName"}}function Qv(n){return{absoluteTime:n.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/n.bpm),type:"setTempo"}}function ew(n){return{absoluteTime:n.ticks,deltaTime:0,denominator:n.timeSignature[1],meta:!0,metronome:24,numerator:n.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function tw(n){const e=n.scale==="major"?0:1,t=uf[e].indexOf(n.key);return{absoluteTime:n.ticks,deltaTime:0,key:t-7,meta:!0,scale:e,type:"keySignature"}}function nw(n){return{absoluteTime:n.ticks,deltaTime:0,meta:!0,text:n.text,type:n.type}}function sw(n){const e={header:{format:1,numTracks:n.tracks.length+1,ticksPerBeat:n.header.ppq},tracks:[[{absoluteTime:0,deltaTime:0,meta:!0,text:n.header.name,type:"trackName"},...n.header.keySignatures.map(t=>tw(t)),...n.header.meta.map(t=>nw(t)),...n.header.tempos.map(t=>Qv(t)),...n.header.timeSignatures.map(t=>ew(t))],...n.tracks.map(t=>[Jv(t.name),Kv(t),...Hv(t),...Yv(t),...Xv(t)])]};return e.tracks=e.tracks.map(t=>{t=t.sort((r,i)=>r.absoluteTime-i.absoluteTime);let s=0;return t.forEach(r=>{r.deltaTime=Math.round(r.absoluteTime-s),s=r.absoluteTime,delete r.absoluteTime}),t.push({deltaTime:0,meta:!0,type:"endOfTrack"}),t}),new Uint8Array(lf.writeMidi(e))}class Wn{static async fromUrl(e){const t=await fetch(e);if(t.ok){const s=await t.arrayBuffer();return new Wn(s)}else throw new Error(`Could not load '${e}'`)}constructor(e){let t=null;if(e){const s=e instanceof ArrayBuffer?new Uint8Array(e):e;t=lf.parseMidi(s),t.tracks.forEach(r=>{let i=0;r.forEach(o=>{i+=o.deltaTime,o.absoluteTime=i})}),t.tracks=rw(t.tracks)}this.header=new _l(t),this.tracks=[],e&&(this.tracks=t.tracks.map(s=>new Ao(s,this.header)),t.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}get name(){return this.header.name}set name(e){this.header.name=e}get duration(){const e=this.tracks.map(t=>t.duration);return Math.max(...e)}get durationTicks(){const e=this.tracks.map(t=>t.durationTicks);return Math.max(...e)}addTrack(){const e=new Ao(void 0,this.header);return this.tracks.push(e),e}toArray(){return sw(this)}toJSON(){return{header:this.header.toJSON(),tracks:this.tracks.map(e=>e.toJSON())}}fromJSON(e){this.header=new _l,this.header.fromJSON(e.header),this.tracks=e.tracks.map(t=>{const s=new Ao(void 0,this.header);return s.fromJSON(t),s})}clone(){const e=new Wn;return e.fromJSON(this.toJSON()),e}}function rw(n){const e=[];for(let t=0;t<n.length;t++){const s=e.length,r=new Map,i=Array(16).fill(0);for(const o of n[t]){let a=s;const c=o.channel;if(c!==void 0){o.type==="programChange"&&(i[c]=o.programNumber);const u=`${i[c]} ${c}`;r.has(u)?a=r.get(u):(a=s+r.size,r.set(u,a))}e[a]||e.push([]),e[a].push(o)}}return e}function Tl(n){return n.header.tempos.length>0?n.header.tempos[0].bpm/60:120/60}class Qr{constructor(e,t,s,r){le(this,"onset");le(this,"duration");le(this,"pitch");le(this,"velocity");this.onset=e,this.duration=t,this.pitch=s,this.velocity=r}equals(e){return this.onset===e.onset&&this.duration===e.duration&&this.pitch===e.pitch&&this.velocity===e.velocity}}class Ks{constructor(e=null){le(this,"notes");le(this,"bps");le(this,"midiData",null);le(this,"_duration",0);if(!e){this.notes=[],this.bps=120/60;return}this.midiData=e;const t=new Wn(e);this.bps=Tl(t),this.notes=t.tracks[0].notes.map(s=>new Qr(s.time*this.bps,s.duration*this.bps,s.midi,s.velocity*127)),this.recalculateDuration()}get duration(){return this._duration}toMidi(){const e=new Wn;if(e.addTrack(),this.midiData){const s=new Wn(this.midiData);e.header=s.header}e.header.update();const t=e.header.secondsToTicks(1);this.bps=Tl(e);for(const s of this.notes)e.tracks[0].addNote({ticks:s.onset/this.bps*t,durationTicks:s.duration/this.bps*t,midi:s.pitch,velocity:s.velocity});return e}getNotes(){return this.notes}getNotesBetween(e,t){return this.notes.filter(s=>s.onset<t&&s.onset+s.duration>=e)}getNoteAt(e,t){const s=this.notes.find(r=>r.onset<e&&r.onset+r.duration>e&&r.pitch===t)||null;return s||null}getNotesOnsetBetween(e,t){return this.notes.filter(s=>s.onset<t&&s.onset>=e)}addNote(e){this.notes.push(e),this._duration=Math.max(this._duration,e.onset+e.duration)}removeNote(e){this.notes=this.notes.filter(t=>!t.equals(e)),this.recalculateDuration()}overlapWith(e,t=0){for(const s of e.notes)this.addNote(new Qr(s.onset+t,s.duration,s.pitch,s.velocity))}slice(e,t,s=!1){e-=.001,t-=.001;const r=new Ks;return r.notes=this.notes.filter(i=>i.onset>=e&&i.onset<=t),r.notes=r.notes.map(i=>new Qr(s?i.onset-e:i.onset,i.duration,i.pitch,i.velocity)),r.recalculateDuration(),r}removeSlice(e,t){e-=.001,t-=.001,this.notes=this.notes.filter(s=>s.onset<=e||s.onset>=t),this.recalculateDuration()}recalculateDuration(){this.notes.length===0?this._duration=0:this._duration=Math.max(...this.notes.map(e=>e.onset+e.duration))}}function iw(n,e,t){const s=(n+16)/116,r=e/500+s,i=s-t/200,[o,a,c]=[r,s,i].map(l=>{const u=l**3;return u>.008856?u:(l-16/116)/7.787});return{x:o*95.047,y:a*100,z:c*108.883}}function ow(n,e,t){n/=100,e/=100,t/=100;let s=n*3.2406+e*-1.5372+t*-.4986,r=n*-.9689+e*1.8758+t*.0415,i=n*.0557+e*-.204+t*1.057;const o=a=>a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a;return s=o(s),r=o(r),i=o(i),{r:Math.min(255,Math.max(0,s*255)),g:Math.min(255,Math.max(0,r*255)),b:Math.min(255,Math.max(0,i*255))}}function aw(n,e,t){const s=iw(n,e,t);return ow(s.x,s.y,s.z)}function Sl(n,e,t){const s=aw(n,e,t);return`rgb(${s.r}, ${s.g}, ${s.b})`}var cw=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};class co extends pe{constructor(e){super(e),this.name="PianoComponent",this.input=void 0,this.output=new kn({context:this.context}),this._enabled=!1,this.volume=this.output.volume,this._loaded=!1,this.volume.value=e.volume,this._enabled=e.enabled,this.samples=e.samples}get loaded(){return this._loaded}load(){return cw(this,void 0,void 0,function*(){if(this._enabled)yield this._internalLoad(),this._loaded=!0;else return Promise.resolve()})}}function df(n){return gv(n,"midi").toNote()}function Di(n,e){return Math.random()*(e-n)+n}function lw(n){return`rel${n-20}.[mp3|ogg]`}function uw(n){return`harmS${df(n).replace("#","s")}.[mp3|ogg]`}function hw(n,e){return`${df(n).replace("#","s")}v${e}.[mp3|ogg]`}const fw={1:[8],2:[6,12],3:[1,7,15],4:[1,5,10,15],5:[1,4,8,12,16],6:[1,3,7,10,13,16],7:[1,3,6,9,11,13,16],8:[1,3,5,7,9,11,13,16],9:[1,3,5,7,9,11,13,15,16],10:[1,2,3,5,7,9,11,13,15,16],11:[1,2,3,5,7,9,11,13,14,15,16],12:[1,2,3,4,5,7,9,11,13,14,15,16],13:[1,2,3,4,5,7,9,11,12,13,14,15,16],14:[1,2,3,4,5,6,7,9,11,12,13,14,15,16],15:[1,2,3,4,5,6,7,9,10,11,12,13,14,15,16],16:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]},dw=[21,24,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87,90,93,96,99,102,105,108];function pw(n,e){return dw.filter(t=>n<=t&&t<=e)}const ei=[21,24,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87];function mw(n,e){return ei.filter(t=>n<=t&&t<=e)}function gw(n){return ei[0]<=n&&n<=ei[ei.length-1]}class _w extends co{constructor(e){super(e),this._urls={};const t=mw(e.minNote,e.maxNote);for(const s of t)this._urls[s]=uw(s)}triggerAttack(e,t,s){this._enabled&&gw(e)&&this._sampler.triggerAttack(ar(e).toNote(),t,s*Di(.5,1))}_internalLoad(){return new Promise(e=>{this._sampler=new Jn({baseUrl:this.samples,onload:e,urls:this._urls}).connect(this.output)})}}class yw extends co{constructor(e){super(e),this._urls={};for(let t=e.minNote;t<=e.maxNote;t++)this._urls[t]=lw(t)}_internalLoad(){return new Promise(e=>{this._buffers=new Nr(this._urls,e,this.samples)})}start(e,t,s){this._enabled&&this._buffers.has(e)&&new Zn({url:this._buffers.get(e),context:this.context}).connect(this.output).start(t,0,void 0,.015*s*Di(.5,1))}}class bw extends co{constructor(e){super(e),this._downTime=1/0,this._currentSound=null,this._downTime=1/0}_internalLoad(){return new Promise(e=>{this._buffers=new Nr({down1:"pedalD1.mp3",down2:"pedalD2.mp3",up1:"pedalU1.mp3",up2:"pedalU2.mp3"},e,this.samples)})}_squash(e){this._currentSound&&this._currentSound.state!=="stopped"&&this._currentSound.stop(e),this._currentSound=null}_playSample(e,t){this._enabled&&(this._currentSound=new Zn({url:this._buffers.get(`${t}${Math.random()>.5?1:2}`),context:this.context,curve:"exponential",fadeIn:.05,fadeOut:.1}).connect(this.output),this._currentSound.start(e,Di(0,.01),void 0,.1*Di(.5,1)))}down(e){this._squash(e),this._downTime=e,this._playSample(e,"down")}up(e){this._squash(e),this._downTime=1/0,this._playSample(e,"up")}isDown(e){return e>this._downTime}}class vw extends pe{constructor(e){super(e),this.name="PianoString",this._urls={},e.notes.forEach(t=>this._urls[t]=hw(t,e.velocity)),this.samples=e.samples}load(){return new Promise(e=>{this._sampler=this.output=new Jn({attack:0,baseUrl:this.samples,curve:"exponential",onload:e,release:.4,urls:this._urls,volume:3})})}triggerAttack(e,t,s){this._sampler.triggerAttack(e,t,s)}triggerRelease(e,t){this._sampler.triggerRelease(e,t)}}var kl=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};class ww extends co{constructor(e){super(e);const t=pw(e.minNote,e.maxNote),s=fw[e.velocities].slice();this._strings=s.map(r=>new vw(Object.assign(e,{notes:t,velocity:r}))),this._activeNotes=new Map}scale(e,t,s,r,i){return(e-t)/(s-t)*(i-r)+r}triggerAttack(e,t,s){const r=this.scale(s,0,1,-.5,this._strings.length-.51),i=Math.max(Math.round(r),0);let o=1+r-i;this._strings.length===1&&(o=s);const a=this._strings[i];this._activeNotes.has(e)&&this.triggerRelease(e,t),this._activeNotes.set(e,a),a.triggerAttack(ar(e).toNote(),t,o)}triggerRelease(e,t){this._activeNotes.has(e)&&(this._activeNotes.get(e).triggerRelease(ar(e).toNote(),t),this._activeNotes.delete(e))}_internalLoad(){return kl(this,void 0,void 0,function*(){yield Promise.all(this._strings.map(e=>kl(this,void 0,void 0,function*(){yield e.load(),e.connect(this.output)})))})}}var xw=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};class Pi extends pe{constructor(){super(J(Pi.getDefaults(),arguments)),this.name="Piano",this.input=void 0,this.output=new Qe({context:this.context}),this._heldNotes=new Map,this._loaded=!1;const e=J(Pi.getDefaults(),arguments);e.url.endsWith("/")||(e.url+="/"),this.maxPolyphony=e.maxPolyphony,this._heldNotes=new Map,this._sustainedNotes=new Map,this._strings=new ww(Object.assign({},e,{enabled:!0,samples:e.url,volume:e.volume.strings})).connect(this.output),this.strings=this._strings.volume,this._pedal=new bw(Object.assign({},e,{enabled:e.pedal,samples:e.url,volume:e.volume.pedal})).connect(this.output),this.pedal=this._pedal.volume,this._keybed=new yw(Object.assign({},e,{enabled:e.release,samples:e.url,volume:e.volume.keybed})).connect(this.output),this.keybed=this._keybed.volume,this._harmonics=new _w(Object.assign({},e,{enabled:e.release,samples:e.url,volume:e.volume.harmonics})).connect(this.output),this.harmonics=this._harmonics.volume}static getDefaults(){return Object.assign(pe.getDefaults(),{maxNote:108,minNote:21,pedal:!0,release:!1,url:"https://tambien.github.io/Piano/audio/",velocities:1,maxPolyphony:32,volume:{harmonics:0,keybed:0,pedal:0,strings:0}})}load(){return xw(this,void 0,void 0,function*(){yield Promise.all([this._strings.load(),this._pedal.load(),this._keybed.load(),this._harmonics.load()]),this._loaded=!0})}get loaded(){return this._loaded}pedalDown({time:e=this.immediate()}={}){return this.loaded&&(e=this.toSeconds(e),this._pedal.isDown(e)||this._pedal.down(e)),this}pedalUp({time:e=this.immediate()}={}){if(this.loaded){const t=this.toSeconds(e);this._pedal.isDown(t)&&(this._pedal.up(t),this._sustainedNotes.forEach((s,r)=>{this._heldNotes.has(r)||this._strings.triggerRelease(r,t)}),this._sustainedNotes.clear())}return this}keyDown({note:e,midi:t,time:s=this.immediate(),velocity:r=.8}){return this.loaded&&this.maxPolyphony>this._heldNotes.size+this._sustainedNotes.size?(s=this.toSeconds(s),qt(e)&&(t=Math.round(ar(e).toMidi())),this._heldNotes.has(t)||(this._heldNotes.set(t,{time:s,velocity:r}),this._strings.triggerAttack(t,s,r))):console.warn("samples not loaded"),this}keyUp({note:e,midi:t,time:s=this.immediate(),velocity:r=.8}){if(this.loaded&&(s=this.toSeconds(s),qt(e)&&(t=Math.round(ar(e).toMidi())),this._heldNotes.has(t))){const i=this._heldNotes.get(t);this._heldNotes.delete(t);const o=Math.pow(Math.max(s-i.time,.1),.7),a=i.velocity;let c=3/o*a*r;c=Math.max(c,.4),c=Math.min(c,4),this._pedal.isDown(s)?this._sustainedNotes.has(t)||this._sustainedNotes.set(t,s):(this._strings.triggerRelease(t,s),this._harmonics.triggerAttack(t,s,c)),this._keybed.start(t,s,r)}return this}stopAll(){return this.pedalUp(),this._heldNotes.forEach((e,t)=>{this.keyUp({midi:t})}),this}}var Gr={exports:{}},Il;function Tw(){if(Il)return Gr.exports;Il=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(b,I,C){return Function.prototype.apply.call(b,I,C)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:t=function(b){return Object.getOwnPropertyNames(b)};function s(S){console&&console.warn&&console.warn(S)}var r=Number.isNaN||function(b){return b!==b};function i(){i.init.call(this)}Gr.exports=i,Gr.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(S){if(typeof S!="number"||S<0||r(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");o=S}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||r(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this};function c(S){return S._maxListeners===void 0?i.defaultMaxListeners:S._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(b){for(var I=[],C=1;C<arguments.length;C++)I.push(arguments[C]);var T=b==="error",B=this._events;if(B!==void 0)T=T&&B.error===void 0;else if(!T)return!1;if(T){var F;if(I.length>0&&(F=I[0]),F instanceof Error)throw F;var V=new Error("Unhandled error."+(F?" ("+F.message+")":""));throw V.context=F,V}var W=B[b];if(W===void 0)return!1;if(typeof W=="function")e(W,this,I);else for(var K=W.length,X=g(W,K),C=0;C<K;++C)e(X[C],this,I);return!0};function l(S,b,I,C){var T,B,F;if(a(I),B=S._events,B===void 0?(B=S._events=Object.create(null),S._eventsCount=0):(B.newListener!==void 0&&(S.emit("newListener",b,I.listener?I.listener:I),B=S._events),F=B[b]),F===void 0)F=B[b]=I,++S._eventsCount;else if(typeof F=="function"?F=B[b]=C?[I,F]:[F,I]:C?F.unshift(I):F.push(I),T=c(S),T>0&&F.length>T&&!F.warned){F.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+F.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=S,V.type=b,V.count=F.length,s(V)}return S}i.prototype.addListener=function(b,I){return l(this,b,I,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(b,I){return l(this,b,I,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(S,b,I){var C={fired:!1,wrapFn:void 0,target:S,type:b,listener:I},T=u.bind(C);return T.listener=I,C.wrapFn=T,T}i.prototype.once=function(b,I){return a(I),this.on(b,h(this,b,I)),this},i.prototype.prependOnceListener=function(b,I){return a(I),this.prependListener(b,h(this,b,I)),this},i.prototype.removeListener=function(b,I){var C,T,B,F,V;if(a(I),T=this._events,T===void 0)return this;if(C=T[b],C===void 0)return this;if(C===I||C.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete T[b],T.removeListener&&this.emit("removeListener",b,C.listener||I));else if(typeof C!="function"){for(B=-1,F=C.length-1;F>=0;F--)if(C[F]===I||C[F].listener===I){V=C[F].listener,B=F;break}if(B<0)return this;B===0?C.shift():y(C,B),C.length===1&&(T[b]=C[0]),T.removeListener!==void 0&&this.emit("removeListener",b,V||I)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(b){var I,C,T;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[b]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[b]),this;if(arguments.length===0){var B=Object.keys(C),F;for(T=0;T<B.length;++T)F=B[T],F!=="removeListener"&&this.removeAllListeners(F);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=C[b],typeof I=="function")this.removeListener(b,I);else if(I!==void 0)for(T=I.length-1;T>=0;T--)this.removeListener(b,I[T]);return this};function m(S,b,I){var C=S._events;if(C===void 0)return[];var T=C[b];return T===void 0?[]:typeof T=="function"?I?[T.listener||T]:[T]:I?w(T):g(T,T.length)}i.prototype.listeners=function(b){return m(this,b,!0)},i.prototype.rawListeners=function(b){return m(this,b,!1)},i.listenerCount=function(S,b){return typeof S.listenerCount=="function"?S.listenerCount(b):p.call(S,b)},i.prototype.listenerCount=p;function p(S){var b=this._events;if(b!==void 0){var I=b[S];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function g(S,b){for(var I=new Array(b),C=0;C<b;++C)I[C]=S[C];return I}function y(S,b){for(;b+1<S.length;b++)S[b]=S[b+1];S.pop()}function w(S){for(var b=new Array(S.length),I=0;I<b.length;++I)b[I]=S[I].listener||S[I];return b}function x(S,b){return new Promise(function(I,C){function T(F){S.removeListener(b,B),C(F)}function B(){typeof S.removeListener=="function"&&S.removeListener("error",T),I([].slice.call(arguments))}P(S,b,B,{once:!0}),b!=="error"&&M(S,T,{once:!0})})}function M(S,b,I){typeof S.on=="function"&&P(S,"error",b,I)}function P(S,b,I,C){if(typeof S.on=="function")C.once?S.once(b,I):S.on(b,I);else if(typeof S.addEventListener=="function")S.addEventListener(b,function T(B){C.once&&S.removeEventListener(b,T),I(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return Gr.exports}var Sw=Tw(),ti={exports:{}},kw=ti.exports,El;function Iw(){return El||(El=1,function(n){(function(e){function t(){if(t.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(t.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=["entry","increment","decrement"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:(function(){return this.interface!==void 0}).bind(this)},inputs:{enumerable:!0,get:(function(){return this._inputs}).bind(this)},outputs:{enumerable:!0,get:(function(){return this._outputs}).bind(this)},sysexEnabled:{enumerable:!0,get:(function(){return!(!this.interface||!this.interface.sysexEnabled)}).bind(this)},nrpnEventsEnabled:{enumerable:!0,get:(function(){return!!this._nrpnEventsEnabled}).bind(this),set:function(o){return this._nrpnEventsEnabled=o,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:(function(){return this._nrpnTypes}).bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}var s=new t;function r(o){var a=this;this._userHandlers={channel:{},system:{}},this._midiInput=o,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return a._midiInput.connection}},id:{enumerable:!0,get:function(){return a._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return a._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return a._midiInput.name}},state:{enumerable:!0,get:function(){return a._midiInput.state}},type:{enumerable:!0,get:function(){return a._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function i(o){var a=this;this._midiOutput=o,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return a._midiOutput.connection}},id:{enumerable:!0,get:function(){return a._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return a._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return a._midiOutput.name}},state:{enumerable:!0,get:function(){return a._midiOutput.state}},type:{enumerable:!0,get:function(){return a._midiOutput.type}}})}t.prototype.enable=function(o,a){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:a}).then((function(c){var l,u=[],h=[];this.interface=c,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(x){u.push(x)};for(var m=c.inputs.values(),p=m.next();p&&!p.done;p=m.next())h.push(p.value.open());for(var g=c.outputs.values(),y=g.next();y&&!y.done;y=g.next())h.push(y.value.open());function w(){clearTimeout(l),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),typeof o=="function"&&o.call(this),u.forEach((function(x){this._onInterfaceStateChange(x)}).bind(this))}l=setTimeout(w.bind(this),200),Promise&&Promise.all(h).catch(function(x){}).then(w.bind(this))}).bind(this),(function(c){typeof o=="function"&&o.call(this,c)}).bind(this)):typeof o=="function"&&o(new Error("The Web MIDI API is not supported by your browser.")))},t.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.enabled&&(this.removeListener(),this.inputs.forEach(function(o){o.removeListener()})),this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers()},t.prototype.addListener=function(o,a){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if(typeof a!="function")throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(o)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[o].push(a),this},t.prototype.hasListener=function(o,a){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if(typeof a!="function")throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(o)))throw new TypeError("The specified event type is not supported.");for(var c=0;c<this._userHandlers[o].length;c++)if(this._userHandlers[o][c]===a)return!0;return!1},t.prototype.removeListener=function(o,a){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(a!==void 0&&typeof a!="function")throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(o))if(a)for(var c=0;c<this._userHandlers[o].length;c++)this._userHandlers[o][c]===a&&this._userHandlers[o].splice(c,1);else this._userHandlers[o]=[];else{if(o!==void 0)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},t.prototype.toMIDIChannels=function(o){var a;if(o==="all"||o===void 0)a=["all"];else{if(o==="none")return a=[];a=Array.isArray(o)?o:[o]}return-1<a.indexOf("all")&&(a=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),a.map(function(c){return parseInt(c)}).filter(function(c){return 1<=c&&c<=16})},t.prototype.getInputById=function(o){if(!this.enabled)throw new Error("WebMidi is not enabled.");o=String(o);for(var a=0;a<this.inputs.length;a++)if(this.inputs[a].id===o)return this.inputs[a];return!1},t.prototype.getOutputById=function(o){if(!this.enabled)throw new Error("WebMidi is not enabled.");o=String(o);for(var a=0;a<this.outputs.length;a++)if(this.outputs[a].id===o)return this.outputs[a];return!1},t.prototype.getInputByName=function(o){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var a=0;a<this.inputs.length;a++)if(~this.inputs[a].name.indexOf(o))return this.inputs[a];return!1},t.prototype.getOctave=function(o){if(o!=null&&0<=o&&o<=127)return Math.floor(Math.floor(o)/12-1)+Math.floor(s.octaveOffset)},t.prototype.getOutputByName=function(o){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var a=0;a<this.outputs.length;a++)if(~this.outputs[a].name.indexOf(o))return this.outputs[a];return!1},t.prototype.guessNoteNumber=function(o){var a=!1;if(o&&o.toFixed&&0<=o&&o<=127?a=Math.round(o):0<=parseInt(o)&&parseInt(o)<=127?a=parseInt(o):(typeof o=="string"||o instanceof String)&&(a=this.noteNameToNumber(o)),a===!1)throw new Error("Invalid input value ("+o+").");return a},t.prototype.noteNameToNumber=function(o){typeof o!="string"&&(o="");var a=o.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!a)throw new RangeError("Invalid note name.");var c=s._semitones[a[1].toUpperCase()],l=12*(parseInt(a[3])+1-Math.floor(s.octaveOffset))+c;if(-1<a[2].toLowerCase().indexOf("b")?l-=a[2].length:-1<a[2].toLowerCase().indexOf("#")&&(l+=a[2].length),l<0||127<l)throw new RangeError("Invalid note name or note outside valid range.");return l},t.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},t.prototype._updateInputs=function(){for(var o=0;o<this._inputs.length;o++){for(var a=!0,c=this.interface.inputs.values(),l=c.next();l&&!l.done;l=c.next())if(this._inputs[o]._midiInput===l.value){a=!1;break}a&&this._inputs.splice(o,1)}this.interface&&this.interface.inputs.forEach((function(u){for(var h=!0,m=0;m<this._inputs.length;m++)this._inputs[m]._midiInput===u&&(h=!1);h&&this._inputs.push(new r(u))}).bind(this))},t.prototype._updateOutputs=function(){for(var o=0;o<this._outputs.length;o++){for(var a=!0,c=this.interface.outputs.values(),l=c.next();l&&!l.done;l=c.next())if(this._outputs[o]._midiOutput===l.value){a=!1;break}a&&this._outputs.splice(o,1)}this.interface&&this.interface.outputs.forEach((function(u){for(var h=!0,m=0;m<this._outputs.length;m++)this._outputs[m]._midiOutput===u&&(h=!1);h&&this._outputs.push(new i(u))}).bind(this))},t.prototype._onInterfaceStateChange=function(o){this._updateInputsAndOutputs();var a={timestamp:o.timeStamp,type:o.port.state};this.interface&&o.port.state==="connected"?o.port.type==="output"?a.port=this.getOutputById(o.port.id):o.port.type==="input"&&(a.port=this.getInputById(o.port.id)):a.port={connection:"closed",id:o.port.id,manufacturer:o.port.manufacturer,name:o.port.name,state:o.port.state,type:o.port.type},this._userHandlers[o.port.state].forEach(function(c){c(a)})},t.prototype._resetInterfaceUserHandlers=function(){for(var o=0;o<this._midiInterfaceEvents.length;o++)this._userHandlers[this._midiInterfaceEvents[o]]=[]},r.prototype.on=r.prototype.addListener=function(o,a,c){var l=this;if(a===void 0&&(a="all"),Array.isArray(a)||(a=[a]),a.forEach(function(h){if(h!=="all"&&!(1<=h&&h<=16))throw new RangeError("The 'channel' parameter is invalid.")}),typeof c!="function")throw new TypeError("The 'listener' parameter must be a function.");if(s.MIDI_SYSTEM_MESSAGES[o]!==void 0)this._userHandlers.system[o]||(this._userHandlers.system[o]=[]),this._userHandlers.system[o].push(c);else{if(s.MIDI_CHANNEL_MESSAGES[o]===void 0)throw new TypeError("The specified event type is not supported.");if(-1<a.indexOf("all")){a=[];for(var u=1;u<=16;u++)a.push(u)}this._userHandlers.channel[o]||(this._userHandlers.channel[o]=[]),a.forEach(function(h){l._userHandlers.channel[o][h]||(l._userHandlers.channel[o][h]=[]),l._userHandlers.channel[o][h].push(c)})}return this},r.prototype.hasListener=function(o,a,c){var l=this;if(typeof c!="function")throw new TypeError("The 'listener' parameter must be a function.");if(a===void 0&&(a="all"),a.constructor!==Array&&(a=[a]),s.MIDI_SYSTEM_MESSAGES[o]!==void 0){for(var u=0;u<this._userHandlers.system[o].length;u++)if(this._userHandlers.system[o][u]===c)return!0}else if(s.MIDI_CHANNEL_MESSAGES[o]!==void 0){if(-1<a.indexOf("all")){a=[];for(var h=1;h<=16;h++)a.push(h)}return!!this._userHandlers.channel[o]&&a.every(function(m){var p=l._userHandlers.channel[o][m];return p&&-1<p.indexOf(c)})}return!1},r.prototype.removeListener=function(o,a,c){var l=this;if(c!==void 0&&typeof c!="function")throw new TypeError("The 'listener' parameter must be a function.");if(a===void 0&&(a="all"),a.constructor!==Array&&(a=[a]),s.MIDI_SYSTEM_MESSAGES[o]!==void 0)if(c===void 0)this._userHandlers.system[o]=[];else for(var u=0;u<this._userHandlers.system[o].length;u++)this._userHandlers.system[o][u]===c&&this._userHandlers.system[o].splice(u,1);else if(s.MIDI_CHANNEL_MESSAGES[o]!==void 0){if(-1<a.indexOf("all")){a=[];for(var h=1;h<=16;h++)a.push(h)}if(!this._userHandlers.channel[o])return this;a.forEach(function(m){var p=l._userHandlers.channel[o][m];if(p)if(c===void 0)l._userHandlers.channel[o][m]=[];else for(var g=0;g<p.length;g++)p[g]===c&&p.splice(g,1)})}else{if(o!==void 0)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},r.prototype._initializeUserHandlers=function(){for(var o in s.MIDI_CHANNEL_MESSAGES)Object.prototype.hasOwnProperty.call(s.MIDI_CHANNEL_MESSAGES,o)&&(this._userHandlers.channel[o]={});for(var a in s.MIDI_SYSTEM_MESSAGES)Object.prototype.hasOwnProperty.call(s.MIDI_SYSTEM_MESSAGES,a)&&(this._userHandlers.system[a]=[])},r.prototype._onMidiMessage=function(o){if(0<this._userHandlers.system.midimessage.length){var a={target:this,data:o.data,timestamp:o.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach(function(c){c(a)})}o.data[0]<240?(this._parseChannelEvent(o),this._parseNrpnEvent(o)):o.data[0]<=255&&this._parseSystemEvent(o)},r.prototype._parseNrpnEvent=function(o){var a,c,l=o.data[0]>>4,u=15&o.data[0],h=1+u;if(1<o.data.length&&(a=o.data[1],c=2<o.data.length?o.data[2]:void 0),s.nrpnEventsEnabled&&l===s.MIDI_CHANNEL_MESSAGES.controlchange&&(a>=s.MIDI_NRPN_MESSAGES.increment&&a<=s.MIDI_NRPN_MESSAGES.parammsb||a===s.MIDI_NRPN_MESSAGES.entrymsb||a===s.MIDI_NRPN_MESSAGES.entrylsb)){var m={target:this,type:"controlchange",data:o.data,timestamp:o.timeStamp,channel:h,controller:{number:a,name:this.getCcNameByNumber(a)},value:c};if(m.controller.number===s.MIDI_NRPN_MESSAGES.parammsb&&m.value!=s.MIDI_NRPN_MESSAGES.nullactiveparameter)s._nrpnBuffer[u]=[],s._nrpnBuffer[u][0]=m;else if(s._nrpnBuffer[u].length===1&&m.controller.number===s.MIDI_NRPN_MESSAGES.paramlsb)s._nrpnBuffer[u].push(m);else if(s._nrpnBuffer[u].length!==2||m.controller.number!==s.MIDI_NRPN_MESSAGES.increment&&m.controller.number!==s.MIDI_NRPN_MESSAGES.decrement&&m.controller.number!==s.MIDI_NRPN_MESSAGES.entrymsb)if(s._nrpnBuffer[u].length===3&&s._nrpnBuffer[u][2].number===s.MIDI_NRPN_MESSAGES.entrymsb&&m.controller.number===s.MIDI_NRPN_MESSAGES.entrylsb)s._nrpnBuffer[u].push(m);else if(3<=s._nrpnBuffer[u].length&&s._nrpnBuffer[u].length<=4&&m.controller.number===s.MIDI_NRPN_MESSAGES.parammsb&&m.value===s.MIDI_NRPN_MESSAGES.nullactiveparameter)s._nrpnBuffer[u].push(m);else if(4<=s._nrpnBuffer[u].length&&s._nrpnBuffer[u].length<=5&&m.controller.number===s.MIDI_NRPN_MESSAGES.paramlsb&&m.value===s.MIDI_NRPN_MESSAGES.nullactiveparameter){s._nrpnBuffer[u].push(m);var p=[];s._nrpnBuffer[u].forEach(function(M){p.push(M.data)});var g=s._nrpnBuffer[u][0].value<<7|s._nrpnBuffer[u][1].value,y=s._nrpnBuffer[u][2].value;s._nrpnBuffer[u].length===6&&(y=s._nrpnBuffer[u][2].value<<7|s._nrpnBuffer[u][3].value);var w="";switch(s._nrpnBuffer[u][2].controller.number){case s.MIDI_NRPN_MESSAGES.entrymsb:w=s._nrpnTypes[0];break;case s.MIDI_NRPN_MESSAGES.increment:w=s._nrpnTypes[1];break;case s.MIDI_NRPN_MESSAGES.decrement:w=s._nrpnTypes[2];break;default:throw new Error("The NPRN type was unidentifiable.")}var x={timestamp:m.timestamp,channel:m.channel,type:"nrpn",data:p,controller:{number:g,type:w,name:"Non-Registered Parameter "+g},value:y};s._nrpnBuffer[u]=[],this._userHandlers.channel[x.type]&&this._userHandlers.channel[x.type][x.channel]&&this._userHandlers.channel[x.type][x.channel].forEach(function(M){M(x)})}else s._nrpnBuffer[u]=[];else s._nrpnBuffer[u].push(m)}},r.prototype._parseChannelEvent=function(o){var a,c,l=o.data[0]>>4,u=1+(15&o.data[0]);1<o.data.length&&(a=o.data[1],c=2<o.data.length?o.data[2]:void 0);var h={target:this,data:o.data,timestamp:o.timeStamp,channel:u};l===s.MIDI_CHANNEL_MESSAGES.noteoff||l===s.MIDI_CHANNEL_MESSAGES.noteon&&c===0?(h.type="noteoff",h.note={number:a,name:s._notes[a%12],octave:s.getOctave(a)},h.velocity=c/127,h.rawVelocity=c):l===s.MIDI_CHANNEL_MESSAGES.noteon?(h.type="noteon",h.note={number:a,name:s._notes[a%12],octave:s.getOctave(a)},h.velocity=c/127,h.rawVelocity=c):l===s.MIDI_CHANNEL_MESSAGES.keyaftertouch?(h.type="keyaftertouch",h.note={number:a,name:s._notes[a%12],octave:s.getOctave(a)},h.value=c/127):l===s.MIDI_CHANNEL_MESSAGES.controlchange&&0<=a&&a<=119?(h.type="controlchange",h.controller={number:a,name:this.getCcNameByNumber(a)},h.value=c):l===s.MIDI_CHANNEL_MESSAGES.channelmode&&120<=a&&a<=127?(h.type="channelmode",h.controller={number:a,name:this.getChannelModeByNumber(a)},h.value=c):l===s.MIDI_CHANNEL_MESSAGES.programchange?(h.type="programchange",h.value=a):l===s.MIDI_CHANNEL_MESSAGES.channelaftertouch?(h.type="channelaftertouch",h.value=a/127):l===s.MIDI_CHANNEL_MESSAGES.pitchbend?(h.type="pitchbend",h.value=((c<<7)+a-8192)/8192):h.type="unknownchannelmessage",this._userHandlers.channel[h.type]&&this._userHandlers.channel[h.type][u]&&this._userHandlers.channel[h.type][u].forEach(function(m){m(h)})},r.prototype.getCcNameByNumber=function(o){if(!(0<=(o=Math.floor(o))&&o<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var a in s.MIDI_CONTROL_CHANGE_MESSAGES)if(Object.prototype.hasOwnProperty.call(s.MIDI_CONTROL_CHANGE_MESSAGES,a)&&o===s.MIDI_CONTROL_CHANGE_MESSAGES[a])return a},r.prototype.getChannelModeByNumber=function(o){if(!(120<=(o=Math.floor(o))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var a in s.MIDI_CHANNEL_MODE_MESSAGES)if(Object.prototype.hasOwnProperty.call(s.MIDI_CHANNEL_MODE_MESSAGES,a)&&o===s.MIDI_CHANNEL_MODE_MESSAGES[a])return a},r.prototype._parseSystemEvent=function(o){var a=o.data[0],c={target:this,data:o.data,timestamp:o.timeStamp};a===s.MIDI_SYSTEM_MESSAGES.sysex?c.type="sysex":a===s.MIDI_SYSTEM_MESSAGES.timecode?c.type="timecode":a===s.MIDI_SYSTEM_MESSAGES.songposition?c.type="songposition":a===s.MIDI_SYSTEM_MESSAGES.songselect?(c.type="songselect",c.song=o.data[1]):a===s.MIDI_SYSTEM_MESSAGES.tuningrequest?c.type="tuningrequest":a===s.MIDI_SYSTEM_MESSAGES.clock?c.type="clock":a===s.MIDI_SYSTEM_MESSAGES.start?c.type="start":a===s.MIDI_SYSTEM_MESSAGES.continue?c.type="continue":a===s.MIDI_SYSTEM_MESSAGES.stop?c.type="stop":a===s.MIDI_SYSTEM_MESSAGES.activesensing?c.type="activesensing":a===s.MIDI_SYSTEM_MESSAGES.reset?c.type="reset":c.type="unknownsystemmessage",this._userHandlers.system[c.type]&&this._userHandlers.system[c.type].forEach(function(l){l(c)})},i.prototype.send=function(o,a,c){if(!(128<=o&&o<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");a===void 0&&(a=[]),Array.isArray(a)||(a=[a]);var l=[];return a.forEach(function(u){var h=Math.floor(u);if(!(0<=h&&h<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");l.push(h)}),this._midiOutput.send([o].concat(l),parseFloat(c)||0),this},i.prototype.sendSysex=function(o,a,c){if(!s.sysexEnabled)throw new Error("Sysex message support must first be activated.");return c=c||{},o=[].concat(o),a.forEach(function(l){if(l<0||127<l)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")}),a=o.concat(a,s.MIDI_SYSTEM_MESSAGES.sysexend),this.send(s.MIDI_SYSTEM_MESSAGES.sysex,a,this._parseTimeParameter(c.time)),this},i.prototype.sendTimecodeQuarterFrame=function(o,a){return a=a||{},this.send(s.MIDI_SYSTEM_MESSAGES.timecode,o,this._parseTimeParameter(a.time)),this},i.prototype.sendSongPosition=function(o,a){a=a||{};var c=(o=Math.floor(o)||0)>>7&127,l=127&o;return this.send(s.MIDI_SYSTEM_MESSAGES.songposition,[c,l],this._parseTimeParameter(a.time)),this},i.prototype.sendSongSelect=function(o,a){if(a=a||{},!(0<=(o=Math.floor(o))&&o<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(s.MIDI_SYSTEM_MESSAGES.songselect,[o],this._parseTimeParameter(a.time)),this},i.prototype.sendTuningRequest=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(o.time)),this},i.prototype.sendClock=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(o.time)),this},i.prototype.sendStart=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(o.time)),this},i.prototype.sendContinue=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(o.time)),this},i.prototype.sendStop=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(o.time)),this},i.prototype.sendActiveSensing=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(o.time)),this},i.prototype.sendReset=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(o.time)),this},i.prototype.stopNote=function(o,a,c){if(o==="all")return this.sendChannelMode("allnotesoff",0,a,c);var l=64;return(c=c||{}).rawVelocity?!isNaN(c.velocity)&&0<=c.velocity&&c.velocity<=127&&(l=c.velocity):!isNaN(c.velocity)&&0<=c.velocity&&c.velocity<=1&&(l=127*c.velocity),this._convertNoteToArray(o).forEach((function(u){s.toMIDIChannels(a).forEach((function(h){this.send((s.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(h-1),[u,Math.round(l)],this._parseTimeParameter(c.time))}).bind(this))}).bind(this)),this},i.prototype.playNote=function(o,a,c){var l,u=64;if((c=c||{}).rawVelocity?!isNaN(c.velocity)&&0<=c.velocity&&c.velocity<=127&&(u=c.velocity):!isNaN(c.velocity)&&0<=c.velocity&&c.velocity<=1&&(u=127*c.velocity),l=this._parseTimeParameter(c.time),this._convertNoteToArray(o).forEach((function(m){s.toMIDIChannels(a).forEach((function(p){this.send((s.MIDI_CHANNEL_MESSAGES.noteon<<4)+(p-1),[m,Math.round(u)],l)}).bind(this))}).bind(this)),!isNaN(c.duration)){c.duration<=0&&(c.duration=0);var h=64;c.rawVelocity?!isNaN(c.release)&&0<=c.release&&c.release<=127&&(h=c.release):!isNaN(c.release)&&0<=c.release&&c.release<=1&&(h=127*c.release),this._convertNoteToArray(o).forEach((function(m){s.toMIDIChannels(a).forEach((function(p){this.send((s.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(p-1),[m,Math.round(h)],(l||s.time)+c.duration)}).bind(this))}).bind(this))}return this},i.prototype.sendKeyAftertouch=function(o,a,c,l){var u=this;if(l=l||{},a<1||16<a)throw new RangeError("The channel must be between 1 and 16.");(isNaN(c)||c<0||1<c)&&(c=.5);var h=Math.round(127*c);return this._convertNoteToArray(o).forEach(function(m){s.toMIDIChannels(a).forEach(function(p){u.send((s.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(p-1),[m,h],u._parseTimeParameter(l.time))})}),this},i.prototype.sendControlChange=function(o,a,c,l){if(l=l||{},typeof o=="string"){if((o=s.MIDI_CONTROL_CHANGE_MESSAGES[o])===void 0)throw new TypeError("Invalid controller name.")}else if(!(0<=(o=Math.floor(o))&&o<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(a=Math.floor(a)||0)&&a<=127))throw new RangeError("Controller value must be between 0 and 127.");return s.toMIDIChannels(c).forEach((function(u){this.send((s.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(u-1),[o,a],this._parseTimeParameter(l.time))}).bind(this)),this},i.prototype._selectRegisteredParameter=function(o,a,c){var l=this;if(o[0]=Math.floor(o[0]),!(0<=o[0]&&o[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(o[1]=Math.floor(o[1]),!(0<=o[1]&&o[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return s.toMIDIChannels(a).forEach(function(){l.sendControlChange(101,o[0],a,{time:c}),l.sendControlChange(100,o[1],a,{time:c})}),this},i.prototype._selectNonRegisteredParameter=function(o,a,c){var l=this;if(o[0]=Math.floor(o[0]),!(0<=o[0]&&o[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(o[1]=Math.floor(o[1]),!(0<=o[1]&&o[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return s.toMIDIChannels(a).forEach(function(){l.sendControlChange(99,o[0],a,{time:c}),l.sendControlChange(98,o[1],a,{time:c})}),this},i.prototype._setCurrentRegisteredParameter=function(o,a,c){var l=this;if((o=[].concat(o))[0]=Math.floor(o[0]),!(0<=o[0]&&o[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return s.toMIDIChannels(a).forEach(function(){l.sendControlChange(6,o[0],a,{time:c})}),o[1]=Math.floor(o[1]),0<=o[1]&&o[1]<=127&&s.toMIDIChannels(a).forEach(function(){l.sendControlChange(38,o[1],a,{time:c})}),this},i.prototype._deselectRegisteredParameter=function(o,a){var c=this;return s.toMIDIChannels(o).forEach(function(){c.sendControlChange(101,127,o,{time:a}),c.sendControlChange(100,127,o,{time:a})}),this},i.prototype.setRegisteredParameter=function(o,a,c,l){var u=this;if(l=l||{},!Array.isArray(o)){if(!s.MIDI_REGISTERED_PARAMETER[o])throw new Error("The specified parameter is not available.");o=s.MIDI_REGISTERED_PARAMETER[o]}return s.toMIDIChannels(c).forEach(function(){u._selectRegisteredParameter(o,c,l.time),u._setCurrentRegisteredParameter(a,c,l.time),u._deselectRegisteredParameter(c,l.time)}),this},i.prototype.setNonRegisteredParameter=function(o,a,c,l){var u=this;if(l=l||{},!(0<=o[0]&&o[0]<=127&&0<=o[1]&&o[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return a=[].concat(a),s.toMIDIChannels(c).forEach(function(){u._selectNonRegisteredParameter(o,c,l.time),u._setCurrentRegisteredParameter(a,c,l.time),u._deselectRegisteredParameter(c,l.time)}),this},i.prototype.incrementRegisteredParameter=function(o,a,c){var l=this;if(c=c||{},!Array.isArray(o)){if(!s.MIDI_REGISTERED_PARAMETER[o])throw new Error("The specified parameter is not available.");o=s.MIDI_REGISTERED_PARAMETER[o]}return s.toMIDIChannels(a).forEach(function(){l._selectRegisteredParameter(o,a,c.time),l.sendControlChange(96,0,a,{time:c.time}),l._deselectRegisteredParameter(a,c.time)}),this},i.prototype.decrementRegisteredParameter=function(o,a,c){if(c=c||{},!Array.isArray(o)){if(!s.MIDI_REGISTERED_PARAMETER[o])throw new TypeError("The specified parameter is not available.");o=s.MIDI_REGISTERED_PARAMETER[o]}return s.toMIDIChannels(a).forEach((function(){this._selectRegisteredParameter(o,a,c.time),this.sendControlChange(97,0,a,{time:c.time}),this._deselectRegisteredParameter(a,c.time)}).bind(this)),this},i.prototype.setPitchBendRange=function(o,a,c,l){var u=this;if(l=l||{},!(0<=(o=Math.floor(o)||0)&&o<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(a=Math.floor(a)||0)&&a<=127))throw new RangeError("The cents value must be between 0 and 127");return s.toMIDIChannels(c).forEach(function(){u.setRegisteredParameter("pitchbendrange",[o,a],c,{time:l.time})}),this},i.prototype.setModulationRange=function(o,a,c,l){var u=this;if(l=l||{},!(0<=(o=Math.floor(o)||0)&&o<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(a=Math.floor(a)||0)&&a<=127))throw new RangeError("The cents value must be between 0 and 127");return s.toMIDIChannels(c).forEach(function(){u.setRegisteredParameter("modulationrange",[o,a],c,{time:l.time})}),this},i.prototype.setMasterTuning=function(o,a,c){var l=this;if(c=c||{},(o=parseFloat(o)||0)<=-65||64<=o)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var u=Math.floor(o)+64,h=o-Math.floor(o),m=(h=Math.round((h+1)/2*16383))>>7&127,p=127&h;return s.toMIDIChannels(a).forEach(function(){l.setRegisteredParameter("channelcoarsetuning",u,a,{time:c.time}),l.setRegisteredParameter("channelfinetuning",[m,p],a,{time:c.time})}),this},i.prototype.setTuningProgram=function(o,a,c){var l=this;if(c=c||{},!(0<=(o=Math.floor(o))&&o<=127))throw new RangeError("The program value must be between 0 and 127");return s.toMIDIChannels(a).forEach(function(){l.setRegisteredParameter("tuningprogram",o,a,{time:c.time})}),this},i.prototype.setTuningBank=function(o,a,c){var l=this;if(c=c||{},!(0<=(o=Math.floor(o)||0)&&o<=127))throw new RangeError("The bank value must be between 0 and 127");return s.toMIDIChannels(a).forEach(function(){l.setRegisteredParameter("tuningbank",o,a,{time:c.time})}),this},i.prototype.sendChannelMode=function(o,a,c,l){if(l=l||{},typeof o=="string"){if(!(o=s.MIDI_CHANNEL_MODE_MESSAGES[o]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(o=Math.floor(o))&&o<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((a=Math.floor(a)||0)<0||127<a)throw new RangeError("Value must be an integer between 0 and 127.");return s.toMIDIChannels(c).forEach((function(u){this.send((s.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(u-1),[o,a],this._parseTimeParameter(l.time))}).bind(this)),this},i.prototype.sendProgramChange=function(o,a,c){var l=this;if(c=c||{},o=Math.floor(o),isNaN(o)||o<0||127<o)throw new RangeError("Program numbers must be between 0 and 127.");return s.toMIDIChannels(a).forEach(function(u){l.send((s.MIDI_CHANNEL_MESSAGES.programchange<<4)+(u-1),[o],l._parseTimeParameter(c.time))}),this},i.prototype.sendChannelAftertouch=function(o,a,c){var l=this;c=c||{},o=parseFloat(o),(isNaN(o)||o<0||1<o)&&(o=.5);var u=Math.round(127*o);return s.toMIDIChannels(a).forEach(function(h){l.send((s.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(h-1),[u],l._parseTimeParameter(c.time))}),this},i.prototype.sendPitchBend=function(o,a,c){var l=this;if(c=c||{},isNaN(o)||o<-1||1<o)throw new RangeError("Pitch bend value must be between -1 and 1.");var u=Math.round((o+1)/2*16383),h=u>>7&127,m=127&u;return s.toMIDIChannels(a).forEach(function(p){l.send((s.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(p-1),[m,h],l._parseTimeParameter(c.time))}),this},i.prototype._parseTimeParameter=function(o){var a,c=parseFloat(o);return typeof o=="string"&&o.substring(0,1)==="+"?c&&0<c&&(a=s.time+c):c>s.time&&(a=c),a},i.prototype._convertNoteToArray=function(o){var a=[];return Array.isArray(o)||(o=[o]),o.forEach(function(c){a.push(s.guessNoteNumber(c))}),a},n.exports?n.exports=s:e.WebMidi||(e.WebMidi=s)})(kw)}(ti)),ti.exports}var Ew=Iw();const Us=Fm(Ew);var Cl=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):r(u.value).then(a,c)}l((s=s.apply(n,e||[])).next())})};class At extends Sw.EventEmitter{constructor(e="all"){super(),this.deviceId=e,At.enabled().then(()=>{Us.addListener("connected",t=>{t.port.type==="input"&&this._addListeners(t.port)}),Us.addListener("disconnected",t=>{this._removeListeners(t.port)}),Us.inputs.forEach(t=>this._addListeners(t))})}_addListeners(e){At.connectedDevices.has(e.id)||(At.connectedDevices.set(e.id,e),this.emit("connect",this._inputToDevice(e)),e.addListener("noteon","all",t=>{(this.deviceId==="all"||this.deviceId===e.id)&&this.emit("keyDown",{note:`${t.note.name}${t.note.octave}`,midi:t.note.number,velocity:t.velocity,device:this._inputToDevice(e)})}),e.addListener("noteoff","all",t=>{(this.deviceId==="all"||this.deviceId===e.id)&&this.emit("keyUp",{note:`${t.note.name}${t.note.octave}`,midi:t.note.number,velocity:t.velocity,device:this._inputToDevice(e)})}),e.addListener("controlchange","all",t=>{(this.deviceId==="all"||this.deviceId===e.id)&&t.controller.name==="holdpedal"&&this.emit(t.value?"pedalDown":"pedalUp",{device:this._inputToDevice(e)})}))}_inputToDevice(e){return{name:e.name,id:e.id,manufacturer:e.manufacturer}}_removeListeners(e){if(At.connectedDevices.has(e.id)){const t=At.connectedDevices.get(e.id);this.emit("disconnect",this._inputToDevice(t)),At.connectedDevices.delete(e.id),t.removeListener("noteon"),t.removeListener("noteoff"),t.removeListener("controlchange")}}emit(e,t){return super.emit(e,t)}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}off(e,t){return super.off(e,t),this}static enabled(){return Cl(this,void 0,void 0,function*(){At._isEnabled||(yield new Promise((e,t)=>{Us.enable(s=>{s?t(s):(At._isEnabled=!0,e())})}))})}static getDevices(){return Cl(this,void 0,void 0,function*(){return yield At.enabled(),Us.inputs})}}At.connectedDevices=new Map;At._isEnabled=!1;class Cw{constructor(e){le(this,"pendingOffsets",new Map);le(this,"now",0);this.piano=e,this.piano=e}playNote(e,t,s,r){this.pendingOffsets.has(t)&&this.piano.keyUp({midi:t,time:r}),this.piano.keyDown({midi:t,velocity:s/127,time:e}),this.pendingOffsets.set(t,r)}playNoteImmediate(e,t,s){this.pendingOffsets.has(e)&&this.piano.keyUp({midi:e}),this.piano.keyDown({midi:e,velocity:t/127}),this.pendingOffsets.set(e,this.now+s)}stopNote(e){this.piano.keyUp({midi:e.pitch}),this.pendingOffsets.delete(e.pitch)}update(e){for(const[t,s]of this.pendingOffsets.entries())e>s&&(this.piano.keyUp({midi:t}),this.pendingOffsets.delete(t));this.now=e}stop(e=!1){for(const[t,s]of this.pendingOffsets.entries())e?this.piano.keyUp({midi:t,time:Nv()+(s-this.now)}):this.piano.keyUp({midi:t}),this.pendingOffsets.delete(t)}}class Aw{constructor(){le(this,"piano");le(this,"time",null);le(this,"timeVersion",0);le(this,"isReady",nt(!1));le(this,"playbackId",0);le(this,"notes",[]);le(this,"playing",!1);le(this,"startOffset",0);const e=new Pi({velocities:5,volume:{pedal:0,strings:0,keybed:0,harmonics:0}}),t=new Qe(.3).toDestination();e.disconnect(),e.chain(t),e.load().then(()=>{console.log("Piano loaded"),this.isReady.value=!0}),this.piano=new Cw(e)}isPlaying(){return this.playing}playNoteDown(e){this.piano&&this.piano.playNoteImmediate(e.pitch,e.velocity,e.endTime-e.startTime)}playNoteUp(e){this.piano&&this.piano.stop()}start(e,t=0,s=()=>{}){this.notes=e.notes,this.startOffset=t,this.playing=!0,this.playbackId++;const r=this.playbackId,i=performance.now();this.notes.sort((l,u)=>l.startTime-u.startTime);const o=this.notes[this.notes.length-1].endTime;let a=0;for(;a<this.notes.length&&!(this.notes[a].startTime>=t);a++);const c=()=>{if(r!==this.playbackId)return;const l=(performance.now()-i)/1e3+this.startOffset;for(this.time=l,this.timeVersion++,this.piano.update(l);a<this.notes.length;a++){const u=this.notes[a];if(l>=u.startTime)this.piano.playNoteImmediate(u.pitch,u.velocity,u.endTime-u.startTime),s(u);else break}if(l>o){this.stop();return}setTimeout(c,15)};return setTimeout(c,15),this.playbackId}stop(e=!1){var t;this.playing=!1,this.playbackId++,this.time=null,this.timeVersion++,(t=this.piano)==null||t.stop(e)}}const Ke=new Aw,Mw=["onKeydown"],Nw={class:"controls"},Ow=["disabled"],Rw={key:0,class:"loading-overlay"},Dw=Qn({__name:"PianorollEditor",props:{editable:{type:Boolean,default:!1},minPitch:{default:0},maxPitch:{default:127}},emits:["edit","transform","save"],setup(n,{expose:e,emit:t}){const s=n,r=t,i=nt(null);let o=null,a=10,c=10,l=10,u=10,h=3,m=nt(new Ks),p=0,g=null,y=null;const w=nt(!1),x=s.maxPitch-s.minPitch+1,M=nt(null);let P=!1;const S=nt(!1);let b=[],I=120;class C{constructor(N){le(this,"_note");const U=m.value.getNoteAt(H(N.clientX),oe(N.clientY));U?this._note=U:(this._note=W(H(N.clientX),oe(N.clientY)),m.value.addNote(this._note),r("edit",[this._note],[]),F()),Ke.playNoteDown({pitch:this._note.pitch,velocity:this._note.velocity,endTime:0,startTime:0})}get note(){return this._note}mouseDown(N){V()}mouseMove(N){m.value.removeNote(this._note);const U=W(H(N.clientX),oe(N.clientY),this._note.velocity);m.value.addNote(U),U.pitch!==this._note.pitch&&(Ke.playNoteUp({pitch:this._note.pitch,endTime:1,startTime:0,velocity:0}),Ke.playNoteDown({pitch:U.pitch,velocity:U.velocity,endTime:0,startTime:0})),r("edit",[U],[this._note]),F(),this._note=U,V()}mouseUp(N){Ke.playNoteUp({pitch:this._note.pitch,endTime:1,startTime:0,velocity:0})}}class T{mouseDown(N){const U=m.value.getNoteAt(H(N.clientX),oe(N.clientY));U&&(m.value.removeNote(U),V(),r("edit",[],[U]),F())}mouseMove(N){const U=m.value.getNoteAt(H(N.clientX),oe(N.clientY));U&&(m.value.removeNote(U),V(),r("edit",[],[U]),F())}mouseUp(N){}}class B{constructor(){le(this,"_wasPlaying",!1)}mouseDown(N){w.value&&($e(),this._wasPlaying=!0),p=Math.max(-2,H(N.clientX)),St(),V()}mouseMove(N){p=Math.max(-2,H(N.clientX)),St(),V()}mouseUp(N){this._wasPlaying&&se()}}const F=()=>{if(!w.value)return;const O=[];for(const N of m.value.getNotes())O.push({pitch:N.pitch,startTime:N.onset/m.value.bps,endTime:(N.onset+N.duration)/m.value.bps,velocity:N.velocity});Ke.stop(!0),Se=Ke.start({notes:O},p/m.value.bps+.1)},V=(O=!0)=>{if(!m||!o||!i.value)return;(c!=a||u!=l)&&(O&&r("transform",{scaleX:a,shiftX:l}),c=a,u=l);let N=i.value.clientHeight,U=i.value.clientWidth;i.value.height=N,i.value.width=U,o.clearRect(0,0,U,N);const $=["hsl(90, 60%, 20%)","hsl(180, 60%, 20%)","hsl(270, 60%, 20%)","hsl(45, 60%, 20%)","hsl(0, 60%, 20%)","hsl(135, 60%, 20%)","hsl(225, 60%, 20%)","hsl(315, 60%, 20%)"],Y=new Map;for(let k=0;k<b.length;k++){const R=b[k].text[0];Y.has(R)||Y.set(R,Y.size%$.length)}const z=10;for(let k=0;k<b.length;k++){const R=b[k].beat,j=k==b.length-1?m.value.duration:b[k+1].beat;o.beginPath(),o.fillStyle=$[Y.get(b[k].text[0])??0],o.rect(te(R),N-z,te(j)-te(R),z),o.fill(),o.fillStyle="#FFFFFF",o.font="12px Arial",o.textAlign="left",o.fillText(b[k].text,te(R),N-z/2)}o.strokeStyle="#333333",o.fillStyle="white",o.font="14px Arial";let ne=Math.floor(Z(0)*2)/2,ie=Math.floor(Z(U)*2)/2,ue=.5,_=[[480,16],[300,8],[140,4],[80,2],[40,1]];for(const[k,R]of _)if(ie-ne>k){ue=R,ne=Math.floor(ne/ue)*ue,ie=Math.floor(ie/ue)*ue;break}ne=Math.max(ne,0);for(let k=ne;k<=ie;k+=ue)k%4==0?o.strokeStyle="#444444":k%1==0?o.strokeStyle="#252525":o.strokeStyle="#151515",o.beginPath(),o.moveTo(te(k),0),o.lineTo(te(k),N),o.stroke(),o.fillStyle="#aaaaaa",k%4==0&&o.fillText((k/4+1).toString(),te(k)+5,15);const f=Math.max(0,-l),d=U/a-l;for(const k of m.value.getNotesBetween(f,d)){const R=k.pitch%12*30/180*Math.PI;let j=Math.pow(k.velocity/127,2)*128;o.beginPath(),o.roundRect((k.onset+l)*a+h,re(k.pitch),k.duration*a-2*h,N/x,1);const fe=Math.max(.2,1.1-k.velocity/127);o.globalAlpha=.2,o.fillStyle=Sl(j,Math.cos(R)*128*fe,Math.sin(R)*128*fe),o.fill(),o.beginPath();let ge=N/x*Math.exp(k.velocity/127*1.6-.4);o.rect((k.onset+l)*a,re(k.pitch)+N/x/2-ge/2,N/x,ge),o.globalAlpha=1,o.fillStyle=Sl(j,Math.cos(R)*128,Math.sin(R)*128),o.fill()}const v=10;o.strokeStyle=S.value?"#55FF00":"#FFFFFF88";for(let k=0;k<(w.value?v:1);k++)o.beginPath(),o.globalAlpha=Math.exp(-k/(v/3)),o.moveTo(X()-k,0),o.lineTo(X()-k,N),o.stroke();if(o.globalAlpha=1,y instanceof C){o.fillStyle="#FFFFFF",o.font="12px Arial",o.textAlign="left";const k=K(y.note.pitch);o.fillText(k,te(y.note.onset),re(y.note.pitch)-30)}},W=(O,N,U=80,$=.125)=>{O=Math.round(O/$)*$,O<0&&(O=0);const Y=m.value.getNotesOnsetBetween(O,O-O%4+4);let z=-O%4+4;for(const ne of Y)ne.pitch===N&&(z=Math.min(z,ne.onset-O));return z=Math.max(Math.round(z/$)*$,$),new Qr(O,z,N,U)},K=O=>["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][O%12]+(Math.floor(O/12)-1),X=()=>{let O=te(p);return Math.min(Math.max(O,5),i.value.clientWidth)},te=O=>O*a+l*a,Z=O=>(O-l*a)/a,H=O=>Z(O-i.value.getBoundingClientRect().left),ee=O=>O-i.value.getBoundingClientRect().left,re=O=>(x-O+s.minPitch-1)/x*i.value.clientHeight,oe=O=>{let N=Math.ceil(x-(O-i.value.getBoundingClientRect().top)/i.value.clientHeight*x)+s.minPitch-1;return Math.max(Math.min(N,s.maxPitch),s.minPitch)},Q=O=>{if(!(!S.value&&!O.ctrlKey)){if(O.preventDefault(),O.ctrlKey){let N=(O.clientX-i.value.getBoundingClientRect().left)/a-l;a*=Math.exp(O.deltaY/-700),a=Math.max(a,4),l=(O.clientX-i.value.getBoundingClientRect().left)/a-N,l=Math.min(l,100/a),O.preventDefault()}else l-=.5*O.deltaY/a,l=Math.min(l,100/a);V()}},ae=O=>{const N=X(),U=ee(O.clientX);O.buttons===1?Math.abs(N-U)<10||!s.editable?y=new B:s.editable&&(y=new C(O)):O.buttons===2&&s.editable&&(y=new T),y==null||y.mouseDown(O),P=!0},qe=O=>{P&&(y==null||y.mouseMove(O))},Ye=O=>{y==null||y.mouseUp(O),y=null,P=!1},he=O=>{var N;(N=O.dataTransfer)!=null&&N.types.includes("tool")&&O.preventDefault()},_e=()=>{w.value?rt():se()};let Se=0;const se=()=>{w.value=!0;const O=[];for(const Y of m.value.getNotes())O.push({pitch:Y.pitch,startTime:Y.onset/m.value.bps,endTime:(Y.onset+Y.duration)/m.value.bps,velocity:Y.velocity});const N={notes:O};Ke.isPlaying()&&Ke.stop();const U=Y=>{let z=Y.startTime*m.value.bps;z!==p&&(p=z)};Se=Ke.start(N,p/m.value.bps,U),Ke.time=p/m.value.bps,console.log("playing",Ke.time,N),Ke.timeVersion++;const $=Date.now();Ke.timeVersion,g=setInterval(()=>{if(Ke.playbackId!==Se){$e();return}Date.now()-$>0&&(p+=.02*m.value.bps,St()),V()},20)},rt=()=>{console.log("stopping"),g&&(clearInterval(g),g=null),Se===Ke.playbackId&&Ke.stop(),w.value=!1},$e=()=>{w.value&&rt()},St=()=>{const O=Math.min(i.value.clientWidth*.2,200),N=Math.min(Math.max(O*.2,X()),i.value.clientWidth-O);l+=(N-X())/a},E=()=>{const O=m.value.toMidi().toArray(),N=new Blob([O],{type:"audio/midi"}),U=URL.createObjectURL(N),$=document.createElement("a");$.href=U,$.download="edited_midi.mid",$.click(),URL.revokeObjectURL(U),r("save")},A=async O=>{$e(),p=0,l=10;const N=await fetch(O);if(!N.ok)throw q(),new Error(`Failed to fetch MIDI file: ${N.statusText}`);const U=await N.arrayBuffer();m.value=new Ks(U),I=m.value.bps,b=[];const $=new Wn(U);for(const Y of $.header.meta)Y.type==="marker"&&b.push({beat:Y.ticks/$.header.ppq,text:Y.text});console.log(b),V()},q=()=>{m.value=new Ks,V()},D=()=>{var O;_e(),(O=M.value)==null||O.focus()};Gi(()=>{var O;i.value&&(o=i.value.getContext("2d")),V(),r("transform",{scaleX:a,shiftX:l}),(O=M.value)==null||O.focus(),document.addEventListener("mousemove",qe),document.addEventListener("mouseup",Ye)}),ya(()=>{$e()}),Vn(m,O=>{V()});function L(O,N=!0){a=O.scaleX,l=O.shiftX,V(N)}function G(O){O!==null?m.value.bps=O:m.value.bps=I,F()}return e({loadMidiFile:A,transform:L,setBps:G}),(O,N)=>(Le(),Ge("div",{class:"pianoroll-editor",tabindex:"0",onKeydown:qp(Ps(_e,["prevent"]),["space"]),onFocus:N[1]||(N[1]=U=>{S.value=!0,V()}),onBlur:N[2]||(N[2]=U=>{S.value=!1,V()}),onWheel:Q,ref_key:"editorDiv",ref:M},[Me("canvas",{class:"pianoroll-canvas",ref_key:"pianorollCanvas",ref:i,onDragover:he,onMousedown:ae,onContextmenu:N[0]||(N[0]=Ps(()=>{},["prevent"]))},null,544),Me("div",Nw,[Me("button",{class:"control-btn",onClick:Ps(D,["prevent"]),disabled:!zr(Ke).isReady},cn(zr(Ke).isReady.value?w.value?"":"":"Loading soundfont..."),9,Ow),Me("button",{class:"control-btn",onClick:Ps(E,["prevent"])},""),O.editable?(Le(),Ge("button",{key:0,class:"control-btn",onClick:Ps(q,["prevent"])},"")):ci("",!0)]),zr(Ke).isReady.value?ci("",!0):(Le(),Ge("div",Rw,N[3]||(N[3]=[bs(" Loading soundfont..."),Me("br",null,null,-1),bs(" May take a while on first load. ")])))],40,Mw))}}),On=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},pf=On(Dw,[["__scopeId","data-v-1015fc6e"]]),Pw={class:"header-container"},Fw={class:"title"},Bw={class:"subtitle"},Lw={class:"links"},Uw={href:"https://github.com/eri24816/Midi-Demo-Page",target:"_blank",class:"link"},Vw={height:"20",width:"20",viewBox:"0 0 16 16",fill:"currentColor",style:{"vertical-align":"middle","margin-right":"6px"}},qw=Qn({__name:"HeaderComp",props:{title:{},description:{}},setup(n){return(e,t)=>(Le(),Ge("div",Pw,[Me("h1",Fw,cn(e.title),1),Me("p",Bw,cn(e.description),1),Me("div",Lw,[Me("a",Uw,[(Le(),Ge("svg",Vw,t[0]||(t[0]=[Me("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"},null,-1)]))),t[1]||(t[1]=bs(" Fork me on GitHub "))])])]))}}),$w=On(qw,[["__scopeId","data-v-2c321deb"]]),Ww={class:"tab-switcher"},jw={class:"file-list"},Gw={class:"sort-controls"},Hw=["title"],zw=["onClick"],Yw={class:"content"},Zw=Qn({__name:"TabSwitcher",props:{files:{}},emits:["select"],setup(n,{emit:e}){const t=n,s=e,r=nt(!0),i=nt(t.files[0]),o=Zi(()=>{const l=[...t.files].sort();return r.value?l:l.reverse()}),a=()=>{r.value=!r.value},c=l=>{i.value=l,s("select",l)};return Gi(()=>{t.files.length>0&&c(t.files[0])}),(l,u)=>(Le(),Ge("div",Ww,[Me("div",jw,[Me("div",Gw,[Me("button",{class:"sort-btn",onClick:a,title:r.value?"Sort Descending":"Sort Ascending"}," sort by name "+cn(r.value?"":""),9,Hw)]),(Le(!0),Ge(mt,null,ba(o.value,h=>(Le(),Ge("button",{key:h,class:_r(["file-btn",{active:i.value===h}]),onClick:m=>c(h)},cn(h),11,zw))),128))]),Me("div",Yw,[Ed(l.$slots,"default",{},void 0)])]))}}),Al=On(Zw,[["__scopeId","data-v-8c54ab9c"]]),Xw={class:"editor-group"},Kw={class:"editor-title"},Jw=Qn({__name:"EditorGroup",props:{names:{}},setup(n,{expose:e}){const t=n;function s(a){r.value.forEach(c=>{c.setBps(a)})}const r=nt([]),i=async(a,c)=>{const l=t.names.indexOf(a);try{await r.value[l].loadMidiFile(c)}catch(u){console.error(`Failed to load MIDI file for ${a}:`,u)}},o=(a,c)=>{c!==-1&&r.value.forEach((l,u)=>{u!==c&&l.transform(a,!1)})};return e({loadMidiFile:i,setBps:s}),(a,c)=>(Le(),Ge("div",Xw,[(Le(!0),Ge(mt,null,ba(a.names,(l,u)=>(Le(),Ge("div",{key:l,class:"editor-container"},[Me("h3",Kw,cn(l),1),Je(pf,{ref_for:!0,ref_key:"editors",ref:r,class:"editor",minPitch:21,maxPitch:108,onTransform:h=>o(h,u)},null,8,["onTransform"])]))),128))]))}}),Qw=On(Jw,[["__scopeId","data-v-0e213b27"]]),e1={},t1={class:"footer"};function n1(n,e){return Le(),Ge("footer",t1,e[0]||(e[0]=[Me("p",null,[bs(" Created by "),Me("a",{href:"https://github.com/eri24816",target:"_blank"},"eri24816"),bs(" while waiting his music generation AI to be trained. ")],-1)]))}const s1=On(e1,[["render",n1],["__scopeId","data-v-4bb00afa"]]),mf=Qp("bpm",()=>({bps:nt(null)})),r1={class:"slider-container"},i1={class:"slider-header"},o1={key:0},a1=["min","max","value"],c1=Qn({__name:"NullableSlider",props:{modelValue:{},min:{},max:{},label:{},defaultValue:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,r=nt(t.modelValue!==null),i=nt(t.modelValue??t.defaultValue??t.min);function o(){r.value?s("update:modelValue",i.value):s("update:modelValue",null)}function a(c){const l=c.target;r.value=!0,i.value=Number(l.value),r.value&&s("update:modelValue",i.value)}return Vn(()=>t.modelValue,c=>{c!==null?(i.value=c,r.value=!0):r.value=!1},{immediate:!0}),(c,l)=>(Le(),Ge("div",r1,[Me("div",i1,[c.label?(Le(),Ge("label",o1,cn(c.label),1)):ci("",!0),fd(Me("input",{type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=u=>r.value=u),onChange:o},null,544),[[Fp,r.value]])]),Me("input",{type:"range",min:c.min,max:c.max,value:i.value,onInput:a},null,40,a1),Me("div",{class:_r(["slider-value",{disabled:!r.value}])},cn(r.value?i.value:"Unset"),3)]))}}),l1=On(c1,[["__scopeId","data-v-3e0a37b5"]]),u1={class:"settings-panel"},h1={class:"setting-item"},f1=Qn({__name:"SettingsPanel",setup(n){const e=mf(),t=Zi({get:()=>e.bps?Math.round(e.bps*60):null,set:s=>e.bps=s?s/60:null});return(s,r)=>(Le(),Ge("div",u1,[Me("div",h1,[r[1]||(r[1]=Me("label",null,"BPM",-1)),Je(l1,{min:40,max:240,modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=i=>t.value=i)},null,8,["modelValue"])])]))}}),d1=On(f1,[["__scopeId","data-v-c12cd209"]]),p1={class:"app"},m1=["innerHTML"],g1=["innerHTML"],_1={key:1,class:"section-content"},y1={key:2,class:"section-content"},b1=Qn({__name:"App",setup(n){const e=nt([]);function t(p){return!("groups"in p)}const s=nt([]);function r(p,g,y){const w=s.value.findIndex(M=>M.sectionName===g);console.log(w);let x;x=`resource/${g}/${p}`,e.value[w].loadMidiFile(x)}async function i(p,g){const y=s.value.indexOf(g);if(y===-1)return;const w=e.value[y];if(w)for(const x of g.groupMembers){const M=`resource/${g.sectionName}/${x}/${p}`;await w.loadMidiFile(x,M)}}let o=null;async function a(p){return o[p]}function c(p){return p.replace(/^.*_(\d+)\.mid$/,"$1")}const l=nt({title:"",description:"",sections:[]}),u=nt({});function h(p){return Te(p,{breaks:!0})}const m=mf();return Vn(()=>m.bps,p=>{for(const g of e.value)g.setBps(p)}),Gi(async()=>{o=await fetch("resource/list.json").then(x=>x.json());const p=await fetch("resource/settings.json");if(p.ok){const x=await p.json();l.value=x}for(const x of l.value.sections)u.value[x.name]=x;const g=(await a(".")).dirs,y=new Map;for(const x of g)y.set(x,0);for(const x of l.value.sections)y.set(x.name,x.order);const w=g.sort((x,M)=>y.get(x)-y.get(M));for(const x of w){const M=await a(`${x}`);if(M.dirs.length>0){const P=M.dirs,S=new Set;for(const b of P)for(const I of(await a(`${x}/${b}`)).files)S.add(c(I));s.value.push({sectionName:x,groups:Array.from(S),groupMembers:P})}else s.value.push({sectionName:x,items:M.files})}}),(p,g)=>(Le(),Ge("div",p1,[Je($w,{title:l.value.title,description:l.value.description},null,8,["title","description"]),(Le(!0),Ge(mt,null,ba(s.value,y=>(Le(),Ge("div",{class:"section",key:y.sectionName},[Me("h2",{innerHTML:h(y.sectionName)},null,8,m1),u.value[y.sectionName]?(Le(),Ge("p",{key:0,class:"section-description",innerHTML:h(u.value[y.sectionName].description)},null,8,g1)):ci("",!0),t(y)?(Le(),Ge("div",_1,[Je(Al,{files:y.items,onSelect:w=>r(w,y.sectionName)},{default:Do(()=>[Je(pf,{ref_for:!0,ref_key:"editors",ref:e,class:"editor",minPitch:21,maxPitch:108,editable:!1},null,512)]),_:2},1032,["files","onSelect"])])):(Le(),Ge("div",y1,[Je(Al,{files:y.groups,onSelect:w=>i(w,y)},{default:Do(()=>[Je(Qw,{ref_for:!0,ref_key:"editors",ref:e,class:"editor-group",names:y.groupMembers},null,8,["names"])]),_:2},1032,["files","onSelect"])]))]))),128)),Je(d1),Je(s1)]))}}),v1=On(b1,[["__scopeId","data-v-0f6094ea"]]),gf=jp(v1);gf.use(zp());gf.mount("#app");
